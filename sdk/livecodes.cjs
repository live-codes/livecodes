"use strict";var ee=Object.create;var K=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var oe=Object.getPrototypeOf,re=Object.prototype.hasOwnProperty;var se=(c,h)=>()=>(h||c((h={exports:{}}).exports,h),h.exports),ie=(c,h)=>{for(var E in h)K(c,E,{get:h[E],enumerable:!0})},$=(c,h,E,y)=>{if(h&&typeof h=="object"||typeof h=="function")for(let M of ne(h))!re.call(c,M)&&M!==E&&K(c,M,{get:()=>h[M],enumerable:!(y=te(h,M))||y.enumerable});return c};var ae=(c,h,E)=>(E=c!=null?ee(oe(c)):{},$(h||!c||!c.__esModule?K(E,"default",{value:c,enumerable:!0}):E,c)),le=c=>$(K({},"__esModule",{value:!0}),c);var G=se((pe,W)=>{var ce=function(){var c=String.fromCharCode,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",y={};function M(r,e){if(!y[r]){y[r]={};for(var l=0;l<r.length;l++)y[r][r.charAt(l)]=l}return y[r][e]}var A={compressToBase64:function(r){if(r==null)return"";var e=A._compress(r,6,function(l){return h.charAt(l)});switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(r){return r==null?"":r==""?null:A._decompress(r.length,32,function(e){return M(h,r.charAt(e))})},compressToUTF16:function(r){return r==null?"":A._compress(r,15,function(e){return c(e+32)})+" "},decompressFromUTF16:function(r){return r==null?"":r==""?null:A._decompress(r.length,16384,function(e){return r.charCodeAt(e)-32})},compressToUint8Array:function(r){for(var e=A.compress(r),l=new Uint8Array(e.length*2),n=0,s=e.length;n<s;n++){var m=e.charCodeAt(n);l[n*2]=m>>>8,l[n*2+1]=m%256}return l},decompressFromUint8Array:function(r){if(r==null)return A.decompress(r);for(var e=new Array(r.length/2),l=0,n=e.length;l<n;l++)e[l]=r[l*2]*256+r[l*2+1];var s=[];return e.forEach(function(m){s.push(c(m))}),A.decompress(s.join(""))},compressToEncodedURIComponent:function(r){return r==null?"":A._compress(r,6,function(e){return E.charAt(e)})},decompressFromEncodedURIComponent:function(r){return r==null?"":r==""?null:(r=r.replace(/ /g,"+"),A._decompress(r.length,32,function(e){return M(E,r.charAt(e))}))},compress:function(r){return A._compress(r,16,function(e){return c(e)})},_compress:function(r,e,l){if(r==null)return"";var n,s,m={},v={},w="",O="",g="",S=2,P=3,d=2,f=[],t=0,o=0,x;for(x=0;x<r.length;x+=1)if(w=r.charAt(x),Object.prototype.hasOwnProperty.call(m,w)||(m[w]=P++,v[w]=!0),O=g+w,Object.prototype.hasOwnProperty.call(m,O))g=O;else{if(Object.prototype.hasOwnProperty.call(v,g)){if(g.charCodeAt(0)<256){for(n=0;n<d;n++)t=t<<1,o==e-1?(o=0,f.push(l(t)),t=0):o++;for(s=g.charCodeAt(0),n=0;n<8;n++)t=t<<1|s&1,o==e-1?(o=0,f.push(l(t)),t=0):o++,s=s>>1}else{for(s=1,n=0;n<d;n++)t=t<<1|s,o==e-1?(o=0,f.push(l(t)),t=0):o++,s=0;for(s=g.charCodeAt(0),n=0;n<16;n++)t=t<<1|s&1,o==e-1?(o=0,f.push(l(t)),t=0):o++,s=s>>1}S--,S==0&&(S=Math.pow(2,d),d++),delete v[g]}else for(s=m[g],n=0;n<d;n++)t=t<<1|s&1,o==e-1?(o=0,f.push(l(t)),t=0):o++,s=s>>1;S--,S==0&&(S=Math.pow(2,d),d++),m[O]=P++,g=String(w)}if(g!==""){if(Object.prototype.hasOwnProperty.call(v,g)){if(g.charCodeAt(0)<256){for(n=0;n<d;n++)t=t<<1,o==e-1?(o=0,f.push(l(t)),t=0):o++;for(s=g.charCodeAt(0),n=0;n<8;n++)t=t<<1|s&1,o==e-1?(o=0,f.push(l(t)),t=0):o++,s=s>>1}else{for(s=1,n=0;n<d;n++)t=t<<1|s,o==e-1?(o=0,f.push(l(t)),t=0):o++,s=0;for(s=g.charCodeAt(0),n=0;n<16;n++)t=t<<1|s&1,o==e-1?(o=0,f.push(l(t)),t=0):o++,s=s>>1}S--,S==0&&(S=Math.pow(2,d),d++),delete v[g]}else for(s=m[g],n=0;n<d;n++)t=t<<1|s&1,o==e-1?(o=0,f.push(l(t)),t=0):o++,s=s>>1;S--,S==0&&(S=Math.pow(2,d),d++)}for(s=2,n=0;n<d;n++)t=t<<1|s&1,o==e-1?(o=0,f.push(l(t)),t=0):o++,s=s>>1;for(;;)if(t=t<<1,o==e-1){f.push(l(t));break}else o++;return f.join("")},decompress:function(r){return r==null?"":r==""?null:A._decompress(r.length,32768,function(e){return r.charCodeAt(e)})},_decompress:function(r,e,l){var n=[],s,m=4,v=4,w=3,O="",g=[],S,P,d,f,t,o,x,a={val:l(0),position:e,index:1};for(S=0;S<3;S+=1)n[S]=S;for(d=0,t=Math.pow(2,2),o=1;o!=t;)f=a.val&a.position,a.position>>=1,a.position==0&&(a.position=e,a.val=l(a.index++)),d|=(f>0?1:0)*o,o<<=1;switch(s=d){case 0:for(d=0,t=Math.pow(2,8),o=1;o!=t;)f=a.val&a.position,a.position>>=1,a.position==0&&(a.position=e,a.val=l(a.index++)),d|=(f>0?1:0)*o,o<<=1;x=c(d);break;case 1:for(d=0,t=Math.pow(2,16),o=1;o!=t;)f=a.val&a.position,a.position>>=1,a.position==0&&(a.position=e,a.val=l(a.index++)),d|=(f>0?1:0)*o,o<<=1;x=c(d);break;case 2:return""}for(n[3]=x,P=x,g.push(x);;){if(a.index>r)return"";for(d=0,t=Math.pow(2,w),o=1;o!=t;)f=a.val&a.position,a.position>>=1,a.position==0&&(a.position=e,a.val=l(a.index++)),d|=(f>0?1:0)*o,o<<=1;switch(x=d){case 0:for(d=0,t=Math.pow(2,8),o=1;o!=t;)f=a.val&a.position,a.position>>=1,a.position==0&&(a.position=e,a.val=l(a.index++)),d|=(f>0?1:0)*o,o<<=1;n[v++]=c(d),x=v-1,m--;break;case 1:for(d=0,t=Math.pow(2,16),o=1;o!=t;)f=a.val&a.position,a.position>>=1,a.position==0&&(a.position=e,a.val=l(a.index++)),d|=(f>0?1:0)*o,o<<=1;n[v++]=c(d),x=v-1,m--;break;case 2:return g.join("")}if(m==0&&(m=Math.pow(2,w),w++),n[x])O=n[x];else if(x===v)O=P+P.charAt(0);else return null;g.push(O),n[v++]=P+O.charAt(0),m--,P=O,m==0&&(m=Math.pow(2,w),w++)}}};return A}();typeof W!="undefined"&&W!=null&&(W.exports=ce)});var fe={};ie(fe,{createPlayground:()=>de,getPlaygroundUrl:()=>X});module.exports=le(fe);var z=ae(G());async function de(c,h={}){typeof c=="object"&&!(c instanceof HTMLElement)&&(c.headless||c.view==="headless")&&(h=c,c=null);let{config:E={},headless:y,loading:M="lazy",view:A}=h,r=y||A==="headless",e=null,l=null;if(typeof c=="string")e=document.querySelector(c);else if(c instanceof HTMLElement)e=c;else if(!(r&&typeof c=="object"))throw new Error("A valid container element is required.");if(!e)if(r)e=document.createElement("div"),B(e),document.body.appendChild(e);else throw new Error(`Cannot find element: "${c}"`);let n=new URL(X(h)),s=n.origin;n.searchParams.set("embed","true"),n.searchParams.set("loading",r?"eager":M),n.searchParams.set("sdkVersion","0.13.0"),typeof E=="object"&&Object.keys(E).length>0&&n.searchParams.set("config","sdk");let m=h.params;typeof m=="object"&&Object.keys(m).length>0&&JSON.stringify(m).length<1800&&Object.keys(m).forEach(i=>{n.searchParams.set(i,encodeURIComponent(String(m[i])))});let v=!1,w="Cannot call API methods after calling `destroy()`.",O=[],g=(i,u="message")=>{addEventListener(u,i),O.push(i)},P=await new Promise(i=>{var C,U,R,k,j,q,J,N,Q;if(!e)return;let u=e.dataset.height||e.style.height;if(u&&!r){let I=isNaN(Number(u))?u:u+"px";e.style.height=I}e.dataset.defaultStyles!=="false"&&!r&&((C=e.style).backgroundColor||(C.backgroundColor="#fff"),(U=e.style).border||(U.border="1px solid black"),(R=e.style).borderRadius||(R.borderRadius="8px"),(k=e.style).boxSizing||(k.boxSizing="border-box"),(j=e.style).padding||(j.padding="0"),(q=e.style).width||(q.width="100%"),(J=e.style).height||(J.height=e.style.height||"300px"),e.style.minHeight="200px",e.style.flexGrow="1",(N=e.style).overflow||(N.overflow="hidden"),(Q=e.style).resize||(Q.resize="vertical"));let b="livecodes",L=e.querySelector(`iframe.${b}`),p=L||document.createElement("iframe");p.classList.add(b),p.setAttribute("allow","accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; web-share"),p.setAttribute("allowtransparency","true"),p.setAttribute("allowpaymentrequest","true"),p.setAttribute("allowfullscreen","true"),p.setAttribute("sandbox","allow-same-origin allow-downloads allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-presentation allow-scripts");let H=M==="eager"?"eager":"lazy";p.setAttribute("loading",H),r?B(p):(p.style.height="100%",p.style.minHeight="200px",p.style.width="100%",p.style.margin="0",p.style.border="0",p.style.borderRadius=e.style.borderRadius),g(function I(T){var _;T.source!==p.contentWindow||T.origin!==s||((_=T.data)==null?void 0:_.type)!=="livecodes-init"||(removeEventListener("message",I),l=Number(T.data.payload.appVersion.replace(/^v/,"")))}),(!l||l<46)&&g(function I(T){var _,Z;T.source!==p.contentWindow||T.origin!==s||((_=T.data)==null?void 0:_.type)!=="livecodes-get-config"||(removeEventListener("message",I),(Z=p.contentWindow)==null||Z.postMessage({type:"livecodes-config",payload:E},s))}),p.onload=()=>{i(p)},p.src=n.href,L||e.appendChild(p)}),d=new Promise(i=>{g(function u(b){var L;b.source!==P.contentWindow||b.origin!==s||((L=b.data)==null?void 0:L.type)!=="livecodes-ready"||(removeEventListener("message",u),i(),d.settled=!0)})}),f=()=>v?Promise.reject(w):new Promise(async i=>{var b;d.settled&&i();let u={type:"livecodes-load"};(b=P.contentWindow)==null||b.postMessage(u,s),await d,i()}),t=(i,u)=>new Promise(async(b,L)=>{var H;if(v)return L(w);await f();let p=V();g(function C(U){var R,k;if(!(U.source!==P.contentWindow||U.origin!==s||((R=U.data)==null?void 0:R.type)!=="livecodes-api-response"||((k=U.data)==null?void 0:k.id)!==p)&&U.data.method===i){removeEventListener("message",C);let j=U.data.payload;j!=null&&j.error?L(j.error):b(j)}}),(H=P.contentWindow)==null||H.postMessage({method:i,id:p,args:u},s)}),o={},x=["load","ready","code","console","tests","destroy"],a=(i,u)=>{var b;if(v)throw new Error(w);return x.includes(i)?(t("watch",[i]),o[i]||(o[i]=[]),(b=o[i])==null||b.push(u),{remove:()=>{var L,p;o[i]=(L=o[i])==null?void 0:L.filter(H=>H!==u),((p=o[i])==null?void 0:p.length)===0&&t("watch",[i,"unsubscribe"])}}):{remove:()=>{}}},Y=i=>({"livecodes-app-loaded":"load","livecodes-ready":"ready","livecodes-change":"code","livecodes-console":"console","livecodes-test-results":"tests","livecodes-destroy":"destroy"})[i];g(async function(u){var p,H,C,U;let b=Y((H=(p=u.data)==null?void 0:p.type)!=null?H:"");if(u.source!==P.contentWindow||u.origin!==s||!b||!o[b])return;let L=(C=u.data)==null?void 0:C.payload;(U=o[b])==null||U.forEach(R=>{R(L)})});let F=()=>{var i;(i=P==null?void 0:P.remove)==null||i.call(P),Object.values(o).forEach(u=>{u.length=0}),O.forEach(u=>removeEventListener("message",u)),O.length=0,D&&e&&D.unobserve(e),v=!0},D;M==="lazy"&&"IntersectionObserver"in window&&(D=new IntersectionObserver((i,u)=>{i.forEach(async b=>{b.isIntersecting&&(await f(),u.unobserve(e))})},{rootMargin:"150px"}),D.observe(e));function B(i){i.style.position="absolute",i.style.top="0",i.style.visibility="hidden",i.style.opacity="0"}let V=()=>(String(Math.random())+Date.now().toFixed()).replace("0.","");return{load:()=>f(),run:()=>t("run"),format:i=>t("format",[i]),getShareUrl:i=>t("getShareUrl",[i]),getConfig:i=>t("getConfig",[i]),setConfig:i=>t("setConfig",[i]),getCode:()=>t("getCode"),show:(i,u)=>t("show",[i,u]),runTests:()=>t("runTests"),onChange:i=>a("code",i),watch:a,exec:(i,...u)=>t("exec",[i,...u]),destroy:()=>v?Promise.reject(w):(F(),Promise.resolve())}}function X(c={}){let{appUrl:h="https://livecodes.io",params:E={},config:y={},headless:M,import:A,lite:r,view:e,...l}=c,n;try{n=new URL(h)}catch(v){throw new Error(`${h} is not a valid URL.`)}let s=new URLSearchParams;Object.entries(l).forEach(([v,w])=>{w!==void 0&&n.searchParams.set(v,String(w))});let m=c.view==="headless"||M;if(r&&(console.warn(`Deprecation notice: "lite" option is deprecated. Use "config: { mode: 'lite' }" instead.`),typeof y=="object"&&y.mode==null?y.mode="lite":n.searchParams.set("lite","true")),e&&(console.warn('Deprecation notice: The "view" option has been moved to "config.view". For headless mode use "headless: true".'),typeof y=="object"&&y.view==null&&e!=="headless"?y.view=e:n.searchParams.set("view",e)),typeof y=="string")try{new URL(y),n.searchParams.set("config",encodeURIComponent(y))}catch(v){throw new Error('"config" is not a valid URL or configuration object.')}else y&&typeof y=="object"&&Object.keys(y).length>0&&(y.title&&y.title!=="Untitled Project"&&n.searchParams.set("title",y.title),y.description&&y.description.length>0&&n.searchParams.set("description",y.description),s.set("config","code/"+(0,z.compressToEncodedURIComponent)(JSON.stringify(y))));if(E&&typeof E=="object"&&Object.keys(E).length>0)try{s.set("params",(0,z.compressToEncodedURIComponent)(JSON.stringify(E)))}catch(v){Object.keys(E).forEach(w=>{n.searchParams.set(w,encodeURIComponent(String(E[w])))})}return A&&n.searchParams.set("x",encodeURIComponent(A)),m&&n.searchParams.set("headless","true"),s.toString().length>0&&(n.hash=s.toString()),n.href}
