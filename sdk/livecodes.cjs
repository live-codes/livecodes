"use strict";var te=Object.create;var _=Object.defineProperty;var oe=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var re=Object.getPrototypeOf,se=Object.prototype.hasOwnProperty;var ie=(a,m)=>()=>(m||a((m={exports:{}}).exports,m),m.exports),ae=(a,m)=>{for(var b in m)_(a,b,{get:m[b],enumerable:!0})},G=(a,m,b,S)=>{if(m&&typeof m=="object"||typeof m=="function")for(let w of ne(m))!se.call(a,w)&&w!==b&&_(a,w,{get:()=>m[w],enumerable:!(S=oe(m,w))||S.enumerable});return a};var le=(a,m,b)=>(b=a!=null?te(re(a)):{},G(m||!a||!a.__esModule?_(b,"default",{value:a,enumerable:!0}):b,a)),ce=a=>G(_({},"__esModule",{value:!0}),a);var F=ie((ye,k)=>{var de=function(){var a=String.fromCharCode,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",S={};function w(o,n){if(!S[o]){S[o]={};for(var d=0;d<o.length;d++)S[o][o.charAt(d)]=d}return S[o][n]}var P={compressToBase64:function(o){if(o==null)return"";var n=P._compress(o,6,function(d){return m.charAt(d)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(o){return o==null?"":o==""?null:P._decompress(o.length,32,function(n){return w(m,o.charAt(n))})},compressToUTF16:function(o){return o==null?"":P._compress(o,15,function(n){return a(n+32)})+" "},decompressFromUTF16:function(o){return o==null?"":o==""?null:P._decompress(o.length,16384,function(n){return o.charCodeAt(n)-32})},compressToUint8Array:function(o){for(var n=P.compress(o),d=new Uint8Array(n.length*2),r=0,i=n.length;r<i;r++){var h=n.charCodeAt(r);d[r*2]=h>>>8,d[r*2+1]=h%256}return d},decompressFromUint8Array:function(o){if(o==null)return P.decompress(o);for(var n=new Array(o.length/2),d=0,r=n.length;d<r;d++)n[d]=o[d*2]*256+o[d*2+1];var i=[];return n.forEach(function(h){i.push(a(h))}),P.decompress(i.join(""))},compressToEncodedURIComponent:function(o){return o==null?"":P._compress(o,6,function(n){return b.charAt(n)})},decompressFromEncodedURIComponent:function(o){return o==null?"":o==""?null:(o=o.replace(/ /g,"+"),P._decompress(o.length,32,function(n){return w(b,o.charAt(n))}))},compress:function(o){return P._compress(o,16,function(n){return a(n)})},_compress:function(o,n,d){if(o==null)return"";var r,i,h={},f={},g="",A="",v="",x=2,U=3,l=2,p=[],t=0,e=0,E;for(E=0;E<o.length;E+=1)if(g=o.charAt(E),Object.prototype.hasOwnProperty.call(h,g)||(h[g]=U++,f[g]=!0),A=v+g,Object.prototype.hasOwnProperty.call(h,A))v=A;else{if(Object.prototype.hasOwnProperty.call(f,v)){if(v.charCodeAt(0)<256){for(r=0;r<l;r++)t=t<<1,e==n-1?(e=0,p.push(d(t)),t=0):e++;for(i=v.charCodeAt(0),r=0;r<8;r++)t=t<<1|i&1,e==n-1?(e=0,p.push(d(t)),t=0):e++,i=i>>1}else{for(i=1,r=0;r<l;r++)t=t<<1|i,e==n-1?(e=0,p.push(d(t)),t=0):e++,i=0;for(i=v.charCodeAt(0),r=0;r<16;r++)t=t<<1|i&1,e==n-1?(e=0,p.push(d(t)),t=0):e++,i=i>>1}x--,x==0&&(x=Math.pow(2,l),l++),delete f[v]}else for(i=h[v],r=0;r<l;r++)t=t<<1|i&1,e==n-1?(e=0,p.push(d(t)),t=0):e++,i=i>>1;x--,x==0&&(x=Math.pow(2,l),l++),h[A]=U++,v=String(g)}if(v!==""){if(Object.prototype.hasOwnProperty.call(f,v)){if(v.charCodeAt(0)<256){for(r=0;r<l;r++)t=t<<1,e==n-1?(e=0,p.push(d(t)),t=0):e++;for(i=v.charCodeAt(0),r=0;r<8;r++)t=t<<1|i&1,e==n-1?(e=0,p.push(d(t)),t=0):e++,i=i>>1}else{for(i=1,r=0;r<l;r++)t=t<<1|i,e==n-1?(e=0,p.push(d(t)),t=0):e++,i=0;for(i=v.charCodeAt(0),r=0;r<16;r++)t=t<<1|i&1,e==n-1?(e=0,p.push(d(t)),t=0):e++,i=i>>1}x--,x==0&&(x=Math.pow(2,l),l++),delete f[v]}else for(i=h[v],r=0;r<l;r++)t=t<<1|i&1,e==n-1?(e=0,p.push(d(t)),t=0):e++,i=i>>1;x--,x==0&&(x=Math.pow(2,l),l++)}for(i=2,r=0;r<l;r++)t=t<<1|i&1,e==n-1?(e=0,p.push(d(t)),t=0):e++,i=i>>1;for(;;)if(t=t<<1,e==n-1){p.push(d(t));break}else e++;return p.join("")},decompress:function(o){return o==null?"":o==""?null:P._decompress(o.length,32768,function(n){return o.charCodeAt(n)})},_decompress:function(o,n,d){var r=[],i,h=4,f=4,g=3,A="",v=[],x,U,l,p,t,e,E,c={val:d(0),position:n,index:1};for(x=0;x<3;x+=1)r[x]=x;for(l=0,t=Math.pow(2,2),e=1;e!=t;)p=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=d(c.index++)),l|=(p>0?1:0)*e,e<<=1;switch(i=l){case 0:for(l=0,t=Math.pow(2,8),e=1;e!=t;)p=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=d(c.index++)),l|=(p>0?1:0)*e,e<<=1;E=a(l);break;case 1:for(l=0,t=Math.pow(2,16),e=1;e!=t;)p=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=d(c.index++)),l|=(p>0?1:0)*e,e<<=1;E=a(l);break;case 2:return""}for(r[3]=E,U=E,v.push(E);;){if(c.index>o)return"";for(l=0,t=Math.pow(2,g),e=1;e!=t;)p=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=d(c.index++)),l|=(p>0?1:0)*e,e<<=1;switch(E=l){case 0:for(l=0,t=Math.pow(2,8),e=1;e!=t;)p=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=d(c.index++)),l|=(p>0?1:0)*e,e<<=1;r[f++]=a(l),E=f-1,h--;break;case 1:for(l=0,t=Math.pow(2,16),e=1;e!=t;)p=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=d(c.index++)),l|=(p>0?1:0)*e,e<<=1;r[f++]=a(l),E=f-1,h--;break;case 2:return v.join("")}if(h==0&&(h=Math.pow(2,g),g++),r[E])A=r[E];else if(E===f)A=U+U.charAt(0);else return null;v.push(A),r[f++]=U+A.charAt(0),h--,U=A,h==0&&(h=Math.pow(2,g),g++)}}};return P}();typeof k!="undefined"&&k!=null&&(k.exports=de)});var pe={};ae(pe,{createPlayground:()=>Y,getPlaygroundUrl:()=>fe});module.exports=ce(pe);var I=le(F());async function Y(a,m={}){typeof a=="object"&&!(a instanceof HTMLElement)&&a.view==="headless"&&(m=a,a=null);let{appUrl:b="https://livecodes.io/",params:S={},config:w={},import:P,headless:o,lite:n,loading:d="lazy",template:r,view:i}=m,h=o||i==="headless",f=null;if(typeof a=="string")f=document.querySelector(a);else if(a instanceof HTMLElement)f=a;else if(!(h&&typeof a=="object"))throw new Error("A valid container element is required.");if(!f)if(h)f=document.createElement("div"),W(f),document.body.appendChild(f);else throw new Error(`Cannot find element: "${a}"`);let g;try{g=new URL(b)}catch(s){throw new Error(`"${b}" is not a valid URL.`)}let A=g.origin;if(S&&typeof S=="object")try{g.searchParams.set("params",(0,I.compressToEncodedURIComponent)(JSON.stringify(S)))}catch(s){Object.keys(S).forEach(y=>{g.searchParams.set(y,encodeURIComponent(String(S[y])))})}if(r&&g.searchParams.set("template",r),P&&g.searchParams.set("x",encodeURIComponent(P)),h&&g.searchParams.set("headless","true"),n&&(console.warn(`Deprecation notice: "lite" option is deprecated. Use "config: { mode: 'lite' }" instead.`),typeof w=="object"&&w.mode==null?w.mode="lite":g.searchParams.set("lite","true")),i&&(console.warn('Deprecation notice: The "view" option has been moved to "config.view". For headless mode use "headless: true".'),typeof w=="object"&&w.view==null&&i!=="headless"?w.view=i:g.searchParams.set("view",i)),typeof w=="string")try{new URL(w),g.searchParams.set("config",encodeURIComponent(w))}catch(s){throw new Error('"config" is not a valid URL or configuration object.')}else if(typeof w=="object")Object.keys(w).length>0&&g.searchParams.set("config","sdk");else throw new Error('"config" is not a valid URL or configuration object.');g.searchParams.set("embed","true"),g.searchParams.set("loading",h?"eager":d);let v=!1,x="Cannot call API methods after calling `destroy()`.",l=await new Promise(s=>{var C,O,R,H,j,B,q,N,Q;if(!f)return;let y=f.dataset.height||f.style.height;if(y&&!h){let D=isNaN(Number(y))?y:y+"px";f.style.height=D}f.dataset.defaultStyles!=="false"&&!h&&((C=f.style).backgroundColor||(C.backgroundColor="#fff"),(O=f.style).border||(O.border="1px solid black"),(R=f.style).borderRadius||(R.borderRadius="8px"),(H=f.style).boxSizing||(H.boxSizing="border-box"),(j=f.style).padding||(j.padding="0"),(B=f.style).width||(B.width="100%"),(q=f.style).height||(q.height=f.style.height||"300px"),f.style.minHeight="200px",f.style.flexGrow="1",(N=f.style).overflow||(N.overflow="hidden"),(Q=f.style).resize||(Q.resize="vertical"));let L="livecodes",M=f.querySelector(`iframe.${L}`),u=M||document.createElement("iframe");u.classList.add(L),u.setAttribute("allow","accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; web-share"),u.setAttribute("allowtransparency","true"),u.setAttribute("allowpaymentrequest","true"),u.setAttribute("allowfullscreen","true"),u.setAttribute("sandbox","allow-same-origin allow-downloads allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-presentation allow-scripts");let T=d==="eager"?"eager":"lazy";u.setAttribute("loading",T),h?W(u):(u.style.height="100%",u.style.minHeight="200px",u.style.width="100%",u.style.margin="0",u.style.border="0",u.style.borderRadius=f.style.borderRadius),addEventListener("message",function D(K){var Z,$;K.source!==u.contentWindow||K.origin!==A||((Z=K.data)==null?void 0:Z.type)!=="livecodes-get-config"||(removeEventListener("message",D),($=u.contentWindow)==null||$.postMessage({type:"livecodes-config",payload:w},A))}),u.onload=()=>{s(u)},u.src=g.href,M||f.appendChild(u)}),p=new Promise(s=>{addEventListener("message",function y(L){var M;L.source!==l.contentWindow||L.origin!==A||((M=L.data)==null?void 0:M.type)!=="livecodes-ready"||(removeEventListener("message",y),s(),p.settled=!0)})}),t=()=>v?Promise.reject(x):new Promise(async s=>{var L;p.settled&&s();let y={type:"livecodes-load"};(L=l.contentWindow)==null||L.postMessage(y,A),await p,s()}),e=(s,y)=>new Promise(async(L,M)=>{var T;if(v)return M(x);await t();let u=ee();addEventListener("message",function C(O){var R,H;if(!(O.source!==l.contentWindow||O.origin!==A||((R=O.data)==null?void 0:R.type)!=="livecodes-api-response"||((H=O.data)==null?void 0:H.id)!==u)&&O.data.method===s){removeEventListener("message",C);let j=O.data.payload;j!=null&&j.error?M(j.error):L(j)}}),(T=l.contentWindow)==null||T.postMessage({method:s,id:u,args:y},A)}),E={},c=["load","ready","code","console","tests","destroy"],z=(s,y)=>{var L;if(v)throw new Error(x);return c.includes(s)?(e("watch",[s]),E[s]||(E[s]=[]),(L=E[s])==null||L.push(y),{remove:()=>{var M,u;E[s]=(M=E[s])==null?void 0:M.filter(T=>T!==y),((u=E[s])==null?void 0:u.length)===0&&e("watch",[s,"unsubscribe"])}}):{remove:()=>{}}},V=s=>({"livecodes-app-loaded":"load","livecodes-ready":"ready","livecodes-change":"code","livecodes-console":"console","livecodes-test-results":"tests","livecodes-destroy":"destroy"})[s];addEventListener("message",async s=>{var M,u,T,C;let y=V((u=(M=s.data)==null?void 0:M.type)!=null?u:"");if(s.source!==l.contentWindow||s.origin!==A||!y||!E[y])return;let L=(T=s.data)==null?void 0:T.payload;(C=E[y])==null||C.forEach(O=>{O(L)})});let J=()=>{var s;Object.values(E).forEach(y=>{y.length=0}),(s=l==null?void 0:l.remove)==null||s.call(l),v=!0};d==="lazy"&&"IntersectionObserver"in window&&new IntersectionObserver((y,L)=>{y.forEach(async M=>{M.isIntersecting&&(await t(),L.unobserve(f))})},{rootMargin:"150px"}).observe(f);function W(s){s.style.position="absolute",s.style.top="0",s.style.visibility="hidden",s.style.opacity="0"}let ee=()=>(String(Math.random())+Date.now().toFixed()).replace("0.","");return{load:()=>t(),run:()=>e("run"),format:s=>e("format",[s]),getShareUrl:s=>e("getShareUrl",[s]),getConfig:s=>e("getConfig",[s]),setConfig:s=>e("setConfig",[s]),getCode:()=>e("getCode"),show:(s,y)=>e("show",[s,y]),runTests:()=>e("runTests"),onChange:s=>z("code",s),watch:z,exec:(s,...y)=>e("exec",[s,...y]),destroy:()=>p.settled?e("destroy").then(J):v?Promise.reject(x):(J(),Promise.resolve())}}function fe(a={}){let{appUrl:m,params:b,config:S,import:w,...P}=a,o=typeof S=="string"?{config:S}:S&&typeof S=="object"&&Object.keys(S).length?{x:"code/"+(0,I.compressToEncodedURIComponent)(JSON.stringify(S))}:{},n;if(b&&typeof b=="object")try{n=(0,I.compressToEncodedURIComponent)(JSON.stringify(b))}catch(r){Object.keys(b).forEach(i=>{b[i]=encodeURIComponent(String(b[i]))})}let d=new URLSearchParams(JSON.parse(JSON.stringify({...P,...n?{params:n}:b,x:w,...o}))).toString();return(m||"https://livecodes.io")+(d?"?"+d:"")}var X;globalThis.document&&document.currentScript&&"prefill"in((X=document.currentScript)==null?void 0:X.dataset)&&window.addEventListener("load",()=>{document.querySelectorAll(".livecodes").forEach(a=>{let m,b=a.dataset.options;if(b)try{m=JSON.parse(b)}catch(o){}let S,w=a.dataset.config||a.dataset.prefill;if(w)try{S=JSON.parse(w)}catch(o){}let P=encodeURIComponent(a.outerHTML);a.innerHTML="",Y(a,{import:"dom/"+P,...m,...S?{config:S}:{}})})});
