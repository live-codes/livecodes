"use strict";var te=Object.create;var R=Object.defineProperty;var oe=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var re=Object.getPrototypeOf,se=Object.prototype.hasOwnProperty;var ie=(a,m)=>()=>(m||a((m={exports:{}}).exports,m),m.exports),ae=(a,m)=>{for(var x in m)R(a,x,{get:m[x],enumerable:!0})},$=(a,m,x,S)=>{if(m&&typeof m=="object"||typeof m=="function")for(let h of ne(m))!se.call(a,h)&&h!==x&&R(a,h,{get:()=>m[h],enumerable:!(S=oe(m,h))||S.enumerable});return a};var le=(a,m,x)=>(x=a!=null?te(re(a)):{},$(m||!a||!a.__esModule?R(x,"default",{value:a,enumerable:!0}):x,a)),ce=a=>$(R({},"__esModule",{value:!0}),a);var G=ie((me,k)=>{var de=function(){var a=String.fromCharCode,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",S={};function h(o,n){if(!S[o]){S[o]={};for(var d=0;d<o.length;d++)S[o][o.charAt(d)]=d}return S[o][n]}var A={compressToBase64:function(o){if(o==null)return"";var n=A._compress(o,6,function(d){return m.charAt(d)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(o){return o==null?"":o==""?null:A._decompress(o.length,32,function(n){return h(m,o.charAt(n))})},compressToUTF16:function(o){return o==null?"":A._compress(o,15,function(n){return a(n+32)})+" "},decompressFromUTF16:function(o){return o==null?"":o==""?null:A._decompress(o.length,16384,function(n){return o.charCodeAt(n)-32})},compressToUint8Array:function(o){for(var n=A.compress(o),d=new Uint8Array(n.length*2),s=0,i=n.length;s<i;s++){var y=n.charCodeAt(s);d[s*2]=y>>>8,d[s*2+1]=y%256}return d},decompressFromUint8Array:function(o){if(o==null)return A.decompress(o);for(var n=new Array(o.length/2),d=0,s=n.length;d<s;d++)n[d]=o[d*2]*256+o[d*2+1];var i=[];return n.forEach(function(y){i.push(a(y))}),A.decompress(i.join(""))},compressToEncodedURIComponent:function(o){return o==null?"":A._compress(o,6,function(n){return x.charAt(n)})},decompressFromEncodedURIComponent:function(o){return o==null?"":o==""?null:(o=o.replace(/ /g,"+"),A._decompress(o.length,32,function(n){return h(x,o.charAt(n))}))},compress:function(o){return A._compress(o,16,function(n){return a(n)})},_compress:function(o,n,d){if(o==null)return"";var s,i,y={},f={},g="",L="",w="",b=2,T=3,l=2,u=[],t=0,e=0,v;for(v=0;v<o.length;v+=1)if(g=o.charAt(v),Object.prototype.hasOwnProperty.call(y,g)||(y[g]=T++,f[g]=!0),L=w+g,Object.prototype.hasOwnProperty.call(y,L))w=L;else{if(Object.prototype.hasOwnProperty.call(f,w)){if(w.charCodeAt(0)<256){for(s=0;s<l;s++)t=t<<1,e==n-1?(e=0,u.push(d(t)),t=0):e++;for(i=w.charCodeAt(0),s=0;s<8;s++)t=t<<1|i&1,e==n-1?(e=0,u.push(d(t)),t=0):e++,i=i>>1}else{for(i=1,s=0;s<l;s++)t=t<<1|i,e==n-1?(e=0,u.push(d(t)),t=0):e++,i=0;for(i=w.charCodeAt(0),s=0;s<16;s++)t=t<<1|i&1,e==n-1?(e=0,u.push(d(t)),t=0):e++,i=i>>1}b--,b==0&&(b=Math.pow(2,l),l++),delete f[w]}else for(i=y[w],s=0;s<l;s++)t=t<<1|i&1,e==n-1?(e=0,u.push(d(t)),t=0):e++,i=i>>1;b--,b==0&&(b=Math.pow(2,l),l++),y[L]=T++,w=String(g)}if(w!==""){if(Object.prototype.hasOwnProperty.call(f,w)){if(w.charCodeAt(0)<256){for(s=0;s<l;s++)t=t<<1,e==n-1?(e=0,u.push(d(t)),t=0):e++;for(i=w.charCodeAt(0),s=0;s<8;s++)t=t<<1|i&1,e==n-1?(e=0,u.push(d(t)),t=0):e++,i=i>>1}else{for(i=1,s=0;s<l;s++)t=t<<1|i,e==n-1?(e=0,u.push(d(t)),t=0):e++,i=0;for(i=w.charCodeAt(0),s=0;s<16;s++)t=t<<1|i&1,e==n-1?(e=0,u.push(d(t)),t=0):e++,i=i>>1}b--,b==0&&(b=Math.pow(2,l),l++),delete f[w]}else for(i=y[w],s=0;s<l;s++)t=t<<1|i&1,e==n-1?(e=0,u.push(d(t)),t=0):e++,i=i>>1;b--,b==0&&(b=Math.pow(2,l),l++)}for(i=2,s=0;s<l;s++)t=t<<1|i&1,e==n-1?(e=0,u.push(d(t)),t=0):e++,i=i>>1;for(;;)if(t=t<<1,e==n-1){u.push(d(t));break}else e++;return u.join("")},decompress:function(o){return o==null?"":o==""?null:A._decompress(o.length,32768,function(n){return o.charCodeAt(n)})},_decompress:function(o,n,d){var s=[],i,y=4,f=4,g=3,L="",w=[],b,T,l,u,t,e,v,c={val:d(0),position:n,index:1};for(b=0;b<3;b+=1)s[b]=b;for(l=0,t=Math.pow(2,2),e=1;e!=t;)u=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=d(c.index++)),l|=(u>0?1:0)*e,e<<=1;switch(i=l){case 0:for(l=0,t=Math.pow(2,8),e=1;e!=t;)u=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=d(c.index++)),l|=(u>0?1:0)*e,e<<=1;v=a(l);break;case 1:for(l=0,t=Math.pow(2,16),e=1;e!=t;)u=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=d(c.index++)),l|=(u>0?1:0)*e,e<<=1;v=a(l);break;case 2:return""}for(s[3]=v,T=v,w.push(v);;){if(c.index>o)return"";for(l=0,t=Math.pow(2,g),e=1;e!=t;)u=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=d(c.index++)),l|=(u>0?1:0)*e,e<<=1;switch(v=l){case 0:for(l=0,t=Math.pow(2,8),e=1;e!=t;)u=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=d(c.index++)),l|=(u>0?1:0)*e,e<<=1;s[f++]=a(l),v=f-1,y--;break;case 1:for(l=0,t=Math.pow(2,16),e=1;e!=t;)u=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=d(c.index++)),l|=(u>0?1:0)*e,e<<=1;s[f++]=a(l),v=f-1,y--;break;case 2:return w.join("")}if(y==0&&(y=Math.pow(2,g),g++),s[v])L=s[v];else if(v===f)L=T+T.charAt(0);else return null;w.push(L),s[f++]=T+L.charAt(0),y--,T=L,y==0&&(y=Math.pow(2,g),g++)}}};return A}();typeof k!="undefined"&&k!=null&&(k.exports=de)});var ue={};ae(ue,{createPlayground:()=>Y,getPlaygroundUrl:()=>fe});module.exports=ce(ue);var X=le(G());async function Y(a,m={}){typeof a=="object"&&!(a instanceof HTMLElement)&&a.view==="headless"&&(m=a,a=null);let{appUrl:x="https://livecodes.io/",params:S={},config:h={},import:A,headless:o,lite:n,loading:d="lazy",template:s,view:i}=m,y=o||i==="headless",f=null;if(typeof a=="string")f=document.querySelector(a);else if(a instanceof HTMLElement)f=a;else if(!(y&&typeof a=="object"))throw new Error("A valid container element is required.");if(!f)if(y)f=document.createElement("div"),W(f),document.body.appendChild(f);else throw new Error(`Cannot find element: "${a}"`);let g;try{g=new URL(x)}catch(r){throw new Error(`"${x}" is not a valid URL.`)}let L=g.origin;if(typeof S=="object"&&Object.keys(S).forEach(r=>{g.searchParams.set(r,String(S[r]))}),s&&g.searchParams.set("template",s),A&&g.searchParams.set("x",A),y&&g.searchParams.set("headless","true"),n&&(console.warn(`Deprecation notice: "lite" option is deprecated. Use "config: { mode: 'lite' }" instead.`),typeof h=="object"&&h.mode==null?h.mode="lite":g.searchParams.set("lite","true")),i&&(console.warn('Deprecation notice: The "view" option has been moved to "config.view". For headless mode use "headless: true".'),typeof h=="object"&&h.view==null&&i!=="headless"?h.view=i:g.searchParams.set("view",i)),typeof h=="string")try{new URL(h),g.searchParams.set("config",h)}catch(r){throw new Error('"config" is not a valid URL or configuration object.')}else if(typeof h=="object")Object.keys(h).length>0&&g.searchParams.set("config","sdk");else throw new Error('"config" is not a valid URL or configuration object.');g.searchParams.set("embed","true"),g.searchParams.set("loading",y?"eager":d);let w=!1,b="Cannot call API methods after calling `destroy()`.",l=await new Promise(r=>{var H,O,_,C,j,B,q,J,N;if(!f)return;let E=f.dataset.height||f.style.height;if(E&&!y){let D=isNaN(Number(E))?E:E+"px";f.style.height=D}f.dataset.defaultStyles!=="false"&&!y&&((H=f.style).backgroundColor||(H.backgroundColor="#fff"),(O=f.style).border||(O.border="1px solid black"),(_=f.style).borderRadius||(_.borderRadius="8px"),(C=f.style).boxSizing||(C.boxSizing="border-box"),(j=f.style).padding||(j.padding="0"),(B=f.style).width||(B.width="100%"),(q=f.style).height||(q.height=f.style.height||"300px"),f.style.minHeight="200px",f.style.flexGrow="1",(J=f.style).overflow||(J.overflow="hidden"),(N=f.style).resize||(N.resize="vertical"));let P="livecodes",M=f.querySelector(`iframe.${P}`),p=M||document.createElement("iframe");p.classList.add(P),p.setAttribute("allow","accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; web-share"),p.setAttribute("allowtransparency","true"),p.setAttribute("allowpaymentrequest","true"),p.setAttribute("allowfullscreen","true"),p.setAttribute("sandbox","allow-same-origin allow-downloads allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-presentation allow-scripts");let U=d==="eager"?"eager":"lazy";p.setAttribute("loading",U),y?W(p):(p.style.height="100%",p.style.minHeight="200px",p.style.width="100%",p.style.margin="0",p.style.border="0",p.style.borderRadius=f.style.borderRadius),addEventListener("message",function D(I){var Z,Q;I.source!==p.contentWindow||I.origin!==L||((Z=I.data)==null?void 0:Z.type)!=="livecodes-get-config"||(removeEventListener("message",D),(Q=p.contentWindow)==null||Q.postMessage({type:"livecodes-config",payload:h},L))}),p.onload=()=>{r(p)},p.src=g.href,M||f.appendChild(p)}),u=new Promise(r=>{addEventListener("message",function E(P){var M;P.source!==l.contentWindow||P.origin!==L||((M=P.data)==null?void 0:M.type)!=="livecodes-ready"||(removeEventListener("message",E),r(),u.settled=!0)})}),t=()=>w?Promise.reject(b):new Promise(async r=>{var P;u.settled&&r();let E={type:"livecodes-load"};(P=l.contentWindow)==null||P.postMessage(E,L),await u,r()}),e=(r,E)=>new Promise(async(P,M)=>{var U;if(w)return M(b);await t();let p=ee();addEventListener("message",function H(O){var _,C;if(!(O.source!==l.contentWindow||O.origin!==L||((_=O.data)==null?void 0:_.type)!=="livecodes-api-response"||((C=O.data)==null?void 0:C.id)!==p)&&O.data.method===r){removeEventListener("message",H);let j=O.data.payload;j!=null&&j.error?M(j.error):P(j)}}),(U=l.contentWindow)==null||U.postMessage({method:r,id:p,args:E},L)}),v={},c=["load","ready","code","console","tests","destroy"],K=(r,E)=>{var P;if(w)throw new Error(b);return c.includes(r)?(e("watch",[r]),v[r]||(v[r]=[]),(P=v[r])==null||P.push(E),{remove:()=>{var M,p;v[r]=(M=v[r])==null?void 0:M.filter(U=>U!==E),((p=v[r])==null?void 0:p.length)===0&&e("watch",[r,"unsubscribe"])}}):{remove:()=>{}}},V=r=>({"livecodes-app-loaded":"load","livecodes-ready":"ready","livecodes-change":"code","livecodes-console":"console","livecodes-test-results":"tests","livecodes-destroy":"destroy"})[r];addEventListener("message",async r=>{var M,p,U,H;let E=V((p=(M=r.data)==null?void 0:M.type)!=null?p:"");if(r.source!==l.contentWindow||r.origin!==L||!E||!v[E])return;let P=(U=r.data)==null?void 0:U.payload;(H=v[E])==null||H.forEach(O=>{O(P)})});let z=()=>{var r;Object.values(v).forEach(E=>{E.length=0}),(r=l==null?void 0:l.remove)==null||r.call(l),w=!0};d==="lazy"&&"IntersectionObserver"in window&&new IntersectionObserver((E,P)=>{E.forEach(async M=>{M.isIntersecting&&(await t(),P.unobserve(f))})},{rootMargin:"150px"}).observe(f);function W(r){r.style.position="absolute",r.style.top="0",r.style.visibility="hidden",r.style.opacity="0"}let ee=()=>(String(Math.random())+Date.now().toFixed()).replace("0.","");return{load:()=>t(),run:()=>e("run"),format:r=>e("format",[r]),getShareUrl:r=>e("getShareUrl",[r]),getConfig:r=>e("getConfig",[r]),setConfig:r=>e("setConfig",[r]),getCode:()=>e("getCode"),show:(r,E)=>e("show",[r,E]),runTests:()=>e("runTests"),onChange:r=>K("code",r),watch:K,exec:(r,...E)=>e("exec",[r,...E]),destroy:()=>u.settled?e("destroy").then(z):w?Promise.reject(b):(z(),Promise.resolve())}}function fe(a={}){let{appUrl:m,params:x,config:S,import:h,...A}=a,o=typeof S=="string"?{config:S}:typeof S=="object"?{x:"code/"+(0,X.compressToEncodedURIComponent)(JSON.stringify(S))}:{},n=new URLSearchParams(JSON.parse(JSON.stringify({...A,...x,x:h,...o}))).toString();return(m||"https://livecodes.io")+(n?"?"+n:"")}var F;globalThis.document&&document.currentScript&&"prefill"in((F=document.currentScript)==null?void 0:F.dataset)&&window.addEventListener("load",()=>{document.querySelectorAll(".livecodes").forEach(a=>{let m,x=a.dataset.options;if(x)try{m=JSON.parse(x)}catch(o){}let S,h=a.dataset.config||a.dataset.prefill;if(h)try{S=JSON.parse(h)}catch(o){}let A=encodeURIComponent(a.outerHTML);a.innerHTML="",Y(a,{import:"dom/"+A,...m,...S?{config:S}:{}})})});
