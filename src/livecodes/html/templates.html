<div id="templates-container" class="modal-container">
  <div class="modal-title" data-i18n="templates.heading">New Project</div>
  <div id="templates-screens" class="modal-screen-container">
    <ul id="templates-tabs" class="modal-tabs">
      <li class="active">
        <a href="#" data-target="templates-starter" data-i18n="templates.starter.heading">
          Starter Templates
        </a>
      </li>
      <li>
        <a href="#" data-target="templates-user" data-i18n="templates.user.heading">My Templates</a>
      </li>
      <li class="templates-search">
        <label for="templates-search-input" class="visually-hidden" data-i18n="templates.search.label">Search templates</label>
        <input id="templates-search-input" type="search" placeholder="Filter languages..." aria-label="Filter templates by language" />
      </li>
    </ul>

    <div id="templates-starter" class="tab-content active">
      <div class="modal-screen">
        <ul id="starter-templates-list" class="thumbnails">
          <li class="loading" data-i18n="templates.starter.loading">
            Loading starter templates...
          </li>
        </ul>
      </div>
    </div>
    <div id="templates-user" class="tab-content">
      <div id="list-container" class="modal-screen">
        <div class="loading" data-i18n="templates.user.loading">Loading user templates...</div>
      </div>
    </div>
  </div>
</div>

<!-- Inline: emit a "templates:filter" event with the current query so other scripts can perform filtering -->
<script>
  (function () {
    var input = document.getElementById('templates-search-input');
    if (!input) return;

    var emit = function (value) {
      var ev = new CustomEvent('templates:filter', { detail: { query: value } });
      document.getElementById('templates-container').dispatchEvent(ev);
    };

    var timeout = null;
    input.addEventListener('input', function (e) {
      var val = e.target.value || '';
      // debounce to avoid excessive events while typing
      clearTimeout(timeout);
      timeout = setTimeout(function () { emit(val.trim()); }, 150);
    });
  })();
</script>
