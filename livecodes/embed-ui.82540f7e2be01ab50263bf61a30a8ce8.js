var y={title:"Untitled Project",description:"",tags:[],autoupdate:!0,autosave:!1,autotest:!1,delay:1500,formatOnsave:!1,mode:"full",theme:"dark",recoverUnsaved:!0,showSpacing:!1,welcome:!0,readonly:!1,allowLangChange:!0,activeEditor:void 0,languages:void 0,markup:{language:"html",content:""},style:{language:"css",content:""},script:{language:"javascript",content:""},stylesheets:[],scripts:[],cssPreset:"",imports:{},types:{},tests:{language:"typescript",content:""},tools:{enabled:"all",active:"",status:""},zoom:1,processors:[],customSettings:{},editor:void 0,fontFamily:void 0,fontSize:void 0,useTabs:!1,tabSize:2,lineNumbers:!0,wordWrap:!1,closeBrackets:!0,semicolons:!0,singleQuote:!1,trailingComma:!0,emmet:!0,editorMode:void 0,version:"16"};var W='<div id="embed-container" class="modal-container"><div class="modal-title">Embed Project</div><div id="embed-screen-container" class="modal-screen-container"><div class="modal-screen"><label>Preview</label><div id="embed-preview-container">Loading Preview...</div><form id="embed-form"></form><label for="embed-code">Code</label><div id="embed-code" class="custom-editor"></div><button id="embed-copy-btn" class="wide-button">Copy Code</button><div class="description">Please check the <a href="{{DOCS_BASE_URL}}configuration/" target="_blank" rel="noopener">documentations</a> for advanced configurations.</div></div></div></div>';var oe=o=>o.replace(/{{APP_VERSION}}/g,"16").replace(/{{SDK_VERSION}}/g,"0.3.0").replace(/{{COMMIT_SHA}}/g,"b01481a").replace(/{{REPO_URL}}/g,"https://github.com/live-codes/livecodes").replace(/{{DOCS_BASE_URL}}/g,"/livecodes/docs/");var K=oe(W);var $=o=>o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;");var T=(o,s=!0)=>o.replace(/\\/g,s?"\\\\":"\\").replace(/`/g,"\\`").replace(/<\/script>/g,"<\\/script>");var V=o=>JSON.parse(JSON.stringify(o));var J=o=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy")){let s=document.createElement("textarea");s.textContent=o,s.style.position="fixed",document.body.appendChild(s),s.select();try{return document.execCommand("copy")}catch(c){return console.warn("Copy to clipboard failed.",c),!1}finally{document.body.removeChild(s)}}return!1};var w=(o,s,c=!0)=>(c?"":" ".repeat(s))+o.split(`
`).join(`
`+" ".repeat(s));var Q=["jspm","skypack"],G=["unpkg","jsdelivr","fastly.jsdelivr"],X=["fastly.jsdelivr.gh","jsdelivr.gh","statically"],m={getModuleUrl:(o,{isModule:s=!0,defaultCDN:c="jspm"}={})=>{o=o.replace(/#nobundle/g,"");let p=Z(o,s,c);return p||(s?"https://jspm.dev/"+o:"https://cdn.jsdelivr.net/npm/"+o)},getUrl:(o,s)=>o.startsWith("http")?o:Z(o,!1,s||re())||o,cdnLists:{npm:G,module:Q,gh:X},checkCDNs:async(o,s)=>{let c=[s,...m.cdnLists.npm].filter(Boolean);for(let p of c)try{if((await fetch(m.getUrl(o,p),{method:"HEAD"})).ok)return p}catch{}return m.cdnLists.npm[0]}},re=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||m.cdnLists.npm[0]}catch{return m.cdnLists.npm[0]}},Z=(o,s,c)=>{let p=s&&o.startsWith("unpkg:")?"?module":"";o.startsWith("gh:")?o=o.replace("gh",X[0]):o.includes(":")||(o=(c||(s?Q[0]:G[0]))+":"+o);for(let u of ne){let[S,R]=u;if(S.test(o))return o.replace(S,R)+p}return null},ne=[[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(npm:)(.+)/i,"https://jspm.dev/$2"],[/^(node:)(.+)/i,"https://jspm.dev/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(jsdelivr.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(fastly.jsdelivr.gh:)(.+)/i,"https://fastly.jsdelivr.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm.run:)(.+)/i,"https://esm.run/$2"],[/^(esm.sh:)(.+)/i,"https://esm.sh/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var se={esm:"livecodes.js",umd:"livecodes.umd.js",react:"react.js",vue:"vue.js",types:"index.d.ts"},Y={getAppUrl:()=>"https://v16.livecodes.io/",getSDKUrl:(o="esm")=>m.getUrl(`livecodes@0.3.0/${se[o]}`)};var ye=async({baseUrl:o,config:s,editorLanguages:c,modal:p,notifications:u,eventsManager:S,createEditorFn:R,getUrlFn:M})=>{let U=s.title,g=s.activeEditor||"markup",O=document.createElement("div");O.innerHTML=K;let k=O.firstChild;p.show(k,{isAsync:!0});let D=k.querySelector("#embed-preview-container"),E=k.querySelector("#embed-form"),I=k.querySelector("#embed-code"),P=k.querySelector("#embed-copy-btn");if(!D||!E||!I||!P)return;[{title:"Theme",name:"theme",options:[{label:"Dark",value:"dark",checked:!0},{label:"Light",value:"light"}]},{title:"Loading",name:"loading",options:[{label:"Lazy",value:"lazy",checked:!0},{label:"On-click",value:"click"},{label:"Eager",value:"eager"}]},{title:"Lite Mode",name:"lite",options:[{value:"true",checked:!1}],help:"/livecodes/docs/features/lite"},{title:"Read only",name:"readonly",options:[{value:"true",checked:!1}]},{title:"Display Mode",name:"mode",options:[{label:"Full",value:"full",checked:!0},{label:"Editor",value:"editor"},{label:"Code Block",value:"codeblock"},{label:"Result",value:"result"}],help:"/livecodes/docs/features/display-modes"},{title:"Default View",name:"view",options:[{label:"Split",value:"split",checked:!0},{label:"Editor",value:"editor"},{label:"Result",value:"result"}],help:"/livecodes/docs/features/default-view"},{title:"Active Editor",name:"activeEditor",options:[{label:c.markup,value:"markup",checked:g==="markup"},{label:c.style,value:"style",checked:g==="style"},{label:c.script,value:"script",checked:g==="script"}]},{title:"Tools",name:"tools",options:[{label:"Closed",value:"closed",checked:!0},{label:"Open",value:"open"},{label:"Full",value:"full"},{label:"None",value:"none"}],help:"/livecodes/docs/features/tools-pane"},{title:"Active Tool",name:"activeTool",options:[{label:"Console",value:"console",checked:!0},{label:"Compiled",value:"compiled"},{label:"Tests",value:"tests"}].filter(e=>!(e.value==="tests"&&!s.tests?.content)),help:"/livecodes/docs/features/tools-pane"},{title:"Permanent URL",name:"permanentUrl",options:[{value:"true",checked:!0}],help:"/livecodes/docs/features/permanent-url"},{title:"Embed Type",name:"type",options:[{label:"Script (CDN)",value:"cdn",checked:!0},{label:"Script (npm)",value:"npm"},{label:"React",value:"react"},{label:"Vue",value:"vue"},{label:"Svelte",value:"svelte"},{label:"Iframe",value:"iframe"},{label:"HTML",value:"html"}]}].forEach(e=>{let r=document.createElement("label");if(r.innerHTML=e.title,E.appendChild(r),e.help){let n=document.createElement("a");n.href=e.help,n.target="_blank",n.classList.add("help-link"),n.title="Click for info...",r.appendChild(n);let l=document.createElement("img");l.src=o+"assets/icons/info.svg",n.appendChild(l)}let i=document.createElement("div");i.classList.add("input-container"),E.appendChild(i),e.options.forEach(n=>{let l=`embed-${e.name}`,a=`${l}-${n.value}`,L=!n.label&&n.value==="true",v=document.createElement("span");i.appendChild(v);let t=document.createElement("input");if(t.type=L?"checkbox":"radio",t.name=l,t.id=a,t.value=n.value,t.checked=n.checked||!1,v.appendChild(t),L)t.classList.add("switch");else{let b=document.createElement("label");b.classList.add("radio-label"),b.htmlFor=a,b.innerHTML=n.label||"",v.appendChild(b)}})});let x=await R(I),F="https://livecodes.io",H=Y.getSDKUrl("umd"),C=await M(!0),f=new URL(C),j=f.origin+f.pathname,A=document.createElement("iframe");A.id="embed-preview-iframe",D.innerHTML="",D.appendChild(A);let N=()=>"livecodes-"+(Math.random()+1).toString(36).substring(2),_=e=>`
<div id="${e}">
  <span>Open the project <a href="${C}" target="_blank">${U}</a> in <a href="${F}" target="_blank">LiveCodes</a>.</span>
</div>
`.trimStart(),h=e=>{let r={...e.mode!==y.mode?{mode:e.mode}:{},...e.theme!==y.theme?{theme:e.theme}:{},...e.tools!=="closed"||e.activeTool!=="console"?{tools:{enabled:e.tools==="none"?[]:"all",status:e.tools,active:e.activeTool}}:{},...e.readonly?{readonly:e.readonly}:{},...e.mode!=="result"&&e.activeEditor!==g?{activeEditor:e.activeEditor}:{}},i=f.searchParams.get("x");return{...j!=="https://livecodes.io/"?{appUrl:j}:{},...Object.keys(r).length>0?{config:r}:{},...i?{import:i}:{},...e.lite?{lite:e.lite}:{},...e.loading!=="lazy"?{loading:e.loading}:{},...e.view&&e.view!=="split"?{view:e.view}:{}}},q=e=>{let r=new URL(C);return r.searchParams.set(e.lite?"lite":"embed","true"),e.loading&&e.loading!=="lazy"&&r.searchParams.set("loading",String(e.loading)),e.view&&e.view!=="split"&&r.searchParams.set("view",String(e.view)),e.mode!=="result"&&e.activeEditor&&e.activeEditor!==g&&r.searchParams.set("activeEditor",String(e.activeEditor)),e.mode&&e.mode!==y.mode&&r.searchParams.set("mode",String(e.mode)),e.theme&&e.theme!==y.theme&&r.searchParams.set("theme",String(e.theme)),e.tools&&(e.tools!=="closed"||e.activeTool!=="console")&&r.searchParams.set(e.tools==="none"?"tools":String(e.activeTool),String(e.tools)),e.readonly!==void 0&&r.searchParams.set("readonly",String(e.readonly)),decodeURIComponent(r.href)},ee={cdn:e=>{let r=N(),i=_(r),n=h(e),l=JSON.stringify(n,null,2),a=w(l,2);return`
${i}
<script src="${H}"><\/script>
<script>
  const options = ${a};
  livecodes.createPlayground("#${r}", options);
<\/script>
`.trimStart()},npm(e){let r=N(),i=_(r),n=h(e),l=JSON.stringify(n,null,2),a=w(l,2);return`
${i}
<script type="module">
  import { createPlayground } from "livecodes";
  const options = ${a};
  createPlayground("#${r}", options);
<\/script>
`.trimStart()},react(e){let r=h(e),i=JSON.stringify(r,null,2);return`
import LiveCodes from "livecodes/react";
export default function App() {
  const options = ${w(i,2)};
  return <LiveCodes {...options}></LiveCodes>;
}
`.trimStart()},vue(e){let r=h(e),i=JSON.stringify(r,null,2);return`
<script setup>
  import LiveCodes from 'livecodes/vue';
  const options = ${w(i,2)};
<\/script>

<template>
  <LiveCodes v-bind="options" />
</template>
`.trimStart()},svelte(e){let r=h(e),i=JSON.stringify(r,null,2);return`
<script>
  import { onMount } from 'svelte';
  import { createPlayground } from 'livecodes';

  const options = ${w(i,2)};
  let container;
  let playground;
  onMount(() => {
    createPlayground(container, options).then((p) => (playground = p));
    return () => playground?.destroy();
  });
<\/script>

<div bind:this="{container}"></div>
`.trimStart()},iframe:e=>{let r=q(e),i=new URL(r);i.searchParams.delete("embed"),i.searchParams.delete("lite");let n=decodeURIComponent(i.href);return`
<iframe title="${U}" scrolling="no" loading="lazy" style="height:300px; width: 100%; border:1px solid black; border-radius:5px;" src="${r}">
  See the project <a href="${n}" target="_blank">${U}</a> on <a href="${F}" target="_blank">LiveCodes</a>.
</iframe>
`.trimStart()},html:e=>{let{import:r,...i}=h(e),n={...V(s),...i.config};return Object.keys(n).forEach(a=>{(JSON.stringify(n[a])===JSON.stringify(y[a])||a==="activeEditor"&&n.activeEditor==="markup"||["markup","style","script"].includes(a))&&delete n[a]}),Object.keys(n).length>0&&(i.config=n),`
<div class="livecodes" style="height: 300px;" data-options='${T(JSON.stringify(i).replace(/'/g,"&#39;"))}'>
<pre data-lang="${s.markup.language}">${T($(s.markup.content||""))}</pre>
<pre data-lang="${s.style.language}">${T($(s.style.content||""))}</pre>
<pre data-lang="${s.script.language}">${T($(s.script.content||""))}</pre>
</div>
<script defer src="${H}" data-prefill><\/script>
`.trimStart()}},d={view:"split",tools:"closed",activeTool:"console"},B=async()=>{let e=Array.from(new FormData(E)).reduce((t,[b,z])=>({...t,[b.replace("embed-","")]:z==="true"?!0:z}),{});C=await M(!!e.permanentUrl),f=new URL(C),j=f.origin+f.pathname;let r=document.querySelectorAll('input[name="embed-view"]');e.mode!=="full"?(d.view=e.view||d.view,delete e.view,r.forEach(t=>{t.checked=!1,t.disabled=!0})):r.forEach(t=>{t.value===(e.view||d.view)&&(t.checked=!0),t.disabled=!1,t.checked&&(e.view=t.value)});let i=document.querySelectorAll('input[name="embed-tools"]'),n=document.querySelectorAll('input[name="embed-activeTool"]');e.lite?(d.tools=e.tools||d.tools,delete e.tools,i.forEach(t=>{t.checked=!1,t.disabled=!0})):i.forEach(t=>{t.value===(e.tools||d.tools)&&(t.checked=!0),t.disabled=!1,t.checked&&(e.tools=t.value)}),e.lite||e.tools==="none"?(d.activeTool=e.activeTool||d.activeTool,delete e.activeTool,n.forEach(t=>{t.checked=!1,t.disabled=!0})):n.forEach(t=>{t.value===(e.activeTool||d.activeTool)&&(t.checked=!0),t.disabled=!1,t.checked&&(e.activeTool=t.value)}),document.querySelectorAll('input[name="embed-activeEditor"]').forEach(t=>{e.mode==="result"?(t.checked=t.value===g,t.disabled=!0,delete e.activeEditor):t.disabled=!1}),A.src=q(e);let a=e.type,L=ee[a]?.(e),v=a==="react"?"jsx":"html";x.getLanguage()!==v?x.setLanguage(v,L):x.setValue(L)};S.addEventListener(E,"change",B),S.addEventListener(P,"click",async()=>{J(x.getValue())?u.success("Code copied to clipboard"):u.error("Failed to copy to clipboard")}),B()};export{ye as createEmbedUI};
