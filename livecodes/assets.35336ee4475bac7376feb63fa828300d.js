var de=Object.create;var P=Object.defineProperty;var me=Object.getOwnPropertyDescriptor;var ue=Object.getOwnPropertyNames;var ge=Object.getPrototypeOf,fe=Object.prototype.hasOwnProperty;var ye=(e,s)=>()=>(s||e((s={exports:{}}).exports,s),s.exports);var xe=(e,s,d,u)=>{if(s&&typeof s=="object"||typeof s=="function")for(let m of ue(s))!fe.call(e,m)&&m!==d&&P(e,m,{get:()=>s[m],enumerable:!(u=me(s,m))||u.enumerable});return e};var he=(e,s,d)=>(d=e!=null?de(ge(e)):{},xe(s||!e||!e.__esModule?P(d,"default",{value:e,enumerable:!0}):d,e));var V=ye((pt,I)=>{var Te=function(){var e=String.fromCharCode,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",u={};function m(o,n){if(!u[o]){u[o]={};for(var p=0;p<o.length;p++)u[o][o.charAt(p)]=p}return u[o][n]}var f={compressToBase64:function(o){if(o==null)return"";var n=f._compress(o,6,function(p){return s.charAt(p)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(o){return o==null?"":o==""?null:f._decompress(o.length,32,function(n){return m(s,o.charAt(n))})},compressToUTF16:function(o){return o==null?"":f._compress(o,15,function(n){return e(n+32)})+" "},decompressFromUTF16:function(o){return o==null?"":o==""?null:f._decompress(o.length,16384,function(n){return o.charCodeAt(n)-32})},compressToUint8Array:function(o){for(var n=f.compress(o),p=new Uint8Array(n.length*2),a=0,i=n.length;a<i;a++){var x=n.charCodeAt(a);p[a*2]=x>>>8,p[a*2+1]=x%256}return p},decompressFromUint8Array:function(o){if(o==null)return f.decompress(o);for(var n=new Array(o.length/2),p=0,a=n.length;p<a;p++)n[p]=o[p*2]*256+o[p*2+1];var i=[];return n.forEach(function(x){i.push(e(x))}),f.decompress(i.join(""))},compressToEncodedURIComponent:function(o){return o==null?"":f._compress(o,6,function(n){return d.charAt(n)})},decompressFromEncodedURIComponent:function(o){return o==null?"":o==""?null:(o=o.replace(/ /g,"+"),f._decompress(o.length,32,function(n){return m(d,o.charAt(n))}))},compress:function(o){return f._compress(o,16,function(n){return e(n)})},_compress:function(o,n,p){if(o==null)return"";var a,i,x={},v={},b="",T="",h="",L=2,S=3,g=2,c=[],t=0,r=0,y;for(y=0;y<o.length;y+=1)if(b=o.charAt(y),Object.prototype.hasOwnProperty.call(x,b)||(x[b]=S++,v[b]=!0),T=h+b,Object.prototype.hasOwnProperty.call(x,T))h=T;else{if(Object.prototype.hasOwnProperty.call(v,h)){if(h.charCodeAt(0)<256){for(a=0;a<g;a++)t=t<<1,r==n-1?(r=0,c.push(p(t)),t=0):r++;for(i=h.charCodeAt(0),a=0;a<8;a++)t=t<<1|i&1,r==n-1?(r=0,c.push(p(t)),t=0):r++,i=i>>1}else{for(i=1,a=0;a<g;a++)t=t<<1|i,r==n-1?(r=0,c.push(p(t)),t=0):r++,i=0;for(i=h.charCodeAt(0),a=0;a<16;a++)t=t<<1|i&1,r==n-1?(r=0,c.push(p(t)),t=0):r++,i=i>>1}L--,L==0&&(L=Math.pow(2,g),g++),delete v[h]}else for(i=x[h],a=0;a<g;a++)t=t<<1|i&1,r==n-1?(r=0,c.push(p(t)),t=0):r++,i=i>>1;L--,L==0&&(L=Math.pow(2,g),g++),x[T]=S++,h=String(b)}if(h!==""){if(Object.prototype.hasOwnProperty.call(v,h)){if(h.charCodeAt(0)<256){for(a=0;a<g;a++)t=t<<1,r==n-1?(r=0,c.push(p(t)),t=0):r++;for(i=h.charCodeAt(0),a=0;a<8;a++)t=t<<1|i&1,r==n-1?(r=0,c.push(p(t)),t=0):r++,i=i>>1}else{for(i=1,a=0;a<g;a++)t=t<<1|i,r==n-1?(r=0,c.push(p(t)),t=0):r++,i=0;for(i=h.charCodeAt(0),a=0;a<16;a++)t=t<<1|i&1,r==n-1?(r=0,c.push(p(t)),t=0):r++,i=i>>1}L--,L==0&&(L=Math.pow(2,g),g++),delete v[h]}else for(i=x[h],a=0;a<g;a++)t=t<<1|i&1,r==n-1?(r=0,c.push(p(t)),t=0):r++,i=i>>1;L--,L==0&&(L=Math.pow(2,g),g++)}for(i=2,a=0;a<g;a++)t=t<<1|i&1,r==n-1?(r=0,c.push(p(t)),t=0):r++,i=i>>1;for(;;)if(t=t<<1,r==n-1){c.push(p(t));break}else r++;return c.join("")},decompress:function(o){return o==null?"":o==""?null:f._decompress(o.length,32768,function(n){return o.charCodeAt(n)})},_decompress:function(o,n,p){var a=[],i,x=4,v=4,b=3,T="",h=[],L,S,g,c,t,r,y,l={val:p(0),position:n,index:1};for(L=0;L<3;L+=1)a[L]=L;for(g=0,t=Math.pow(2,2),r=1;r!=t;)c=l.val&l.position,l.position>>=1,l.position==0&&(l.position=n,l.val=p(l.index++)),g|=(c>0?1:0)*r,r<<=1;switch(i=g){case 0:for(g=0,t=Math.pow(2,8),r=1;r!=t;)c=l.val&l.position,l.position>>=1,l.position==0&&(l.position=n,l.val=p(l.index++)),g|=(c>0?1:0)*r,r<<=1;y=e(g);break;case 1:for(g=0,t=Math.pow(2,16),r=1;r!=t;)c=l.val&l.position,l.position>>=1,l.position==0&&(l.position=n,l.val=p(l.index++)),g|=(c>0?1:0)*r,r<<=1;y=e(g);break;case 2:return""}for(a[3]=y,S=y,h.push(y);;){if(l.index>o)return"";for(g=0,t=Math.pow(2,b),r=1;r!=t;)c=l.val&l.position,l.position>>=1,l.position==0&&(l.position=n,l.val=p(l.index++)),g|=(c>0?1:0)*r,r<<=1;switch(y=g){case 0:for(g=0,t=Math.pow(2,8),r=1;r!=t;)c=l.val&l.position,l.position>>=1,l.position==0&&(l.position=n,l.val=p(l.index++)),g|=(c>0?1:0)*r,r<<=1;a[v++]=e(g),y=v-1,x--;break;case 1:for(g=0,t=Math.pow(2,16),r=1;r!=t;)c=l.val&l.position,l.position>>=1,l.position==0&&(l.position=n,l.val=p(l.index++)),g|=(c>0?1:0)*r,r<<=1;a[v++]=e(g),y=v-1,x--;break;case 2:return h.join("")}if(x==0&&(x=Math.pow(2,b),b++),a[y])T=a[y];else if(y===v)T=S+S.charAt(0);else return null;h.push(T),a[v++]=S+T.charAt(0),x--,S=T,x==0&&(x=Math.pow(2,b),b++)}}};return f}();typeof I<"u"&&I!=null&&(I.exports=Te)});var F=["esm.sh","skypack","esm.run","jsdelivr.esm","fastly.jsdelivr.esm","gcore.jsdelivr.esm","testingcf.jsdelivr.esm","jsdelivr.b-cdn.esm","jspm"],$=["jsdelivr","fastly.jsdelivr","unpkg","gcore.jsdelivr","testingcf.jsdelivr","jsdelivr.b-cdn","npmcdn"],N=["jsdelivr.gh","fastly.jsdelivr.gh","statically","gcore.jsdelivr.gh","testingcf.jsdelivr.gh","jsdelivr.b-cdn.gh"],j={getModuleUrl:(e,{isModule:s=!0,defaultCDN:d="esm.sh"}={})=>{e=e.replace(/#nobundle/g,"");let u=O(e,s,d);return u||(s?"https://esm.sh/"+e:"https://cdn.jsdelivr.net/npm/"+e)},getUrl:(e,s)=>e.startsWith("http")||e.startsWith("data:")?e:O(e,!1,s||Le())||e,cdnLists:{npm:$,module:F,gh:N},checkCDNs:async(e,s)=>{let d=[s,...j.cdnLists.npm].filter(Boolean);for(let u of d)try{if((await fetch(j.getUrl(e,u),{method:"HEAD"})).ok)return u}catch{}return j.cdnLists.npm[0]}},Le=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||j.cdnLists.npm[0]}catch{return j.cdnLists.npm[0]}},O=(e,s,d)=>{let u=s&&e.startsWith("unpkg:")?"?module":"";e.startsWith("gh:")?e=e.replace("gh",N[0]):e.includes(":")||(e=(d||(s?F[0]:$[0]))+":"+e);for(let m of be){let[f,o]=m;if(f.test(e))return e.replace(f,o)+u}return null},be=[[/^(esm\.sh:)(.+)/i,"https://esm.sh/$2"],[/^(npm:)(.+)/i,"https://esm.sh/$2"],[/^(node:)(.+)/i,"https://esm.sh/$2"],[/^(jsr:)(.+)/i,"https://esm.sh/jsr/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly\.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(gcore\.jsdelivr:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2"],[/^(testingcf\.jsdelivr:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2"],[/^(jsdelivr\.b-cdn:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2"],[/^(jsdelivr\.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(fastly\.jsdelivr\.gh:)(.+)/i,"https://fastly.jsdelivr.net/gh/$2"],[/^(gcore\.jsdelivr\.gh:)(.+)/i,"https://gcore.jsdelivr.net/gh/$2"],[/^(testingcf\.jsdelivr\.gh:)(.+)/i,"https://testingcf.jsdelivr.net/gh/$2"],[/^(jsdelivr\.b-cdn\.gh:)(.+)/i,"https://jsdelivr.b-cdn.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm\.run:)(.+)/i,"https://esm.run/$2"],[/^(jsdelivr\.esm:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2/+esm"],[/^(fastly\.jsdelivr\.esm:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2/+esm"],[/^(gcore\.jsdelivr\.esm:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2/+esm"],[/^(testingcf\.jsdelivr\.esm:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2/+esm"],[/^(jsdelivr\.b-cdn\.esm:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2/+esm"],[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle\.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(npmcdn:)(.+)/i,"https://npmcdn.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var{getUrl:ve,getModuleUrl:Ce}=j;var W=ve("flexsearch@0.7.21/dist/flexsearch.bundle.js");var B=()=>(Date.now()+""+Math.floor(Math.floor(Math.random()*Date.now()))).substring(0,24);var K=()=>{let e=!1,s=navigator.userAgent.toLowerCase();return function(d){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(d)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(d.substr(0,4)))&&(e=!0)}(s||navigator.vendor||window.opera),e};var J=e=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy")){let s=document.createElement("textarea");s.textContent=e,s.style.position="fixed",document.body.appendChild(s),s.select();try{return document.execCommand("copy")}catch(d){return console.warn("Copy to clipboard failed.",d),!1}finally{document.body.removeChild(s)}}return!1};var G=(e,s)=>new Promise((d,u)=>{if(s&&globalThis[s])return d(globalThis[s]);if(typeof globalThis.importScripts=="function")return globalThis.importScripts(e),s&&globalThis[s]?d(globalThis[s]):d(globalThis);let m=document.createElement("script");m.src=e,m.async=!0;let f=()=>{m.removeEventListener("load",o),m.removeEventListener("error",n)},o=()=>{if(f(),!s)return d("loaded: "+e);let p=setInterval(()=>{if(window[s])return clearInterval(p),d(window[s])},5)},n=()=>{f(),u("failed to load: "+e)};m.addEventListener("load",o),m.addEventListener("error",n),document.head.appendChild(m)});var R=he(V());var Z=`<div id="assets-list-container" class="list-container"><div class="modal-title">Assets</div><div class="buttons"><button id="assets-add-asset-button" class="button">Add Asset</button> <button id="assets-delete-all-button" class="button danger">Delete All</button></div><div class="modal-message" id="assets-container" class="items-container"><span id="assets-sort-by-label">Sort By:</span> <a href="#" id="assets-sort-by-last-modified" class="active">Date</a>&nbsp;/&nbsp;<a href="#" id="assets-sort-by-title">File Name</a>&nbsp;(<a href="#" id="assets-sorted-asc" style="display:none">\u25B2</a><a href="#" id="assets-sorted-desc">\u25BC</a>) <select name="type-filter" id="assets-type-filter"><option value="">All types</option></select> <input id="search-assets" type="text" placeholder="Search"> <a href="#" id="assets-reset-filters" class="hint--bottom" data-hint="Reset" style="width:auto"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 489.533 489.533" style="width:1em;height:1em" xml:space="preserve"><g><path d="M268.175,488.161c98.2-11,176.9-89.5,188.1-187.7c14.7-128.4-85.1-237.7-210.2-239.1v-57.6c0-3.2-4-4.9-6.7-2.9
		l-118.6,87.1c-2,1.5-2,4.4,0,5.9l118.6,87.1c2.7,2,6.7,0.2,6.7-2.9v-57.5c87.9,1.4,158.3,76.2,152.3,165.6
		c-5.1,76.9-67.8,139.3-144.7,144.2c-81.5,5.2-150.8-53-163.2-130c-2.3-14.3-14.8-24.7-29.2-24.7c-17.9,0-31.9,15.9-29.1,33.6
		C49.575,418.961,150.875,501.261,268.175,488.161z"/></g></svg></a><div class="modal-message no-data"><div>You have no saved assets.</div></div><div class="modal-message no-data" id="assets-no-match"><div>No assets match these filters.</div></div></div></div>`;var Q='<div id="add-asset-container" class="modal-container"><div class="modal-title">Add Asset</div><div class="buttons"><button id="assets-button" class="button">Assets</button></div><ul id="add-asset-tabs" class="modal-tabs"><li data-target="add-asset-data-url" class="active">Data URL</li><li data-target="add-asset-gh-pages">GitHub Pages</li></ul><div id="add-asset-screens" class="modal-screen-container"><div id="add-asset-data-url" class="tab-content active"><div class="modal-screen"><div class="description">Add asset as a base64-encoded <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs" target="_blank" rel="noopener">data url</a>.</div><form id="add-asset-data-url-form"><label for="asset-data-url-file-input" class="file-input-label">Add file</label> <input type="file" id="asset-data-url-file-input" class="file-input"></form><div id="data-url-output" class="clickable" style="width:100%"></div></div></div><div id="add-asset-gh-pages" class="tab-content"><div class="modal-screen"><div class="description">Deploy asset to GitHub Pages. The file is pushed to <span class="code">gh-pages</span> branch of the repo <span class="code">livecodes-assets</span> on your GitHub account. If the repo does not already exist, a public repo will be created.</div><form id="add-asset-gh-pages-form"><label for="asset-gh-pages-file-input" id="asset-gh-pages-file-input-label" class="file-input-label">Upload file</label> <input type="file" id="asset-gh-pages-file-input" class="file-input"></form><div id="gh-pages-output" class="clickable" style="width:100%"></div></div></div></div></div>';var Y=e=>e.replace(/{{APP_VERSION}}/g,"31").replace(/{{SDK_VERSION}}/g,"0.5.0").replace(/{{COMMIT_SHA}}/g,"9e69722").replace(/{{REPO_URL}}/g,"https://github.com/live-codes/livecodes").replace(/{{DOCS_BASE_URL}}/g,"/livecodes/docs/");var X=Y(Z),ee=Y(Q);var te=e=>e.querySelector("#assets-add-asset-button"),oe=e=>e.querySelector("#assets-delete-all-button"),se=e=>e.querySelector("#assets-button"),ne=e=>e.querySelector("#asset-data-url-file-input"),re=e=>e.querySelector("#data-url-output"),ce=e=>e.querySelector("#asset-gh-pages-file-input"),ae=e=>e.querySelector("#asset-gh-pages-file-input-label");var ie=e=>e.querySelector("#gh-pages-output");var le=(e,s)=>{J(e)?s.success("URL is copied to clipboard."):s.error("Failed to copy URL.")},we=(e,s)=>{let d=document.createElement("div");d.classList.add("asset-item");let u=document.createElement("div");u.classList.add("asset-title","overflow-text"),u.textContent=e.filename,d.appendChild(u);let m=document.createElement("img");m.src=pe(e,s),m.classList.add("img-preview"),m.onerror=function(){let i=s+"assets/images/image.svg";m.src!==i&&(m.src=i)},d.appendChild(m);let f=document.createElement("div");f.classList.add("asset-details"),d.appendChild(f);let o=document.createElement("div");o.classList.add("light"),o.textContent="Type: "+e.type,f.appendChild(o);let n=K()?new Date(e.lastModified).toLocaleDateString():new Date(e.lastModified).toLocaleString(),p=document.createElement("div");p.classList.add("light"),p.textContent="Date: "+String(n),f.appendChild(p);let a=document.createElement("div");return a.classList.add("light","overflow-text"),a.textContent="URL: "+e.url,f.appendChild(a),d},He=(e,s,d,u)=>{let m=document.createElement("li");s.appendChild(m);let f=document.createElement("a");f.href="#",f.dataset.id=e.id,f.classList.add("asset-link","hint--top"),f.dataset.hint="Click to copy URL",f.appendChild(we(e,u)),f.onclick=n=>{n.preventDefault(),le(e.url,d)},m.appendChild(f);let o=document.createElement("button");return o.classList.add("delete-button"),m.appendChild(o),{link:f,deleteButton:o}},ke=async(e,s,d)=>{let u="date",m="desc",f,o=[],n=document.querySelector("#assets-list-container #assets-sort-by-last-modified"),p=document.querySelector("#assets-list-container #assets-sort-by-title"),a=document.querySelector("#assets-list-container #assets-sorted-asc"),i=document.querySelector("#assets-list-container #assets-sorted-desc"),x=document.querySelector("#assets-list-container #assets-type-filter"),v=document.querySelector("#assets-list-container #search-assets"),b=document.querySelector("#assets-list-container #assets-reset-filters");Array.from(new Set((await e()).map(c=>c.type))).sort((c,t)=>c.toLowerCase()<t.toLowerCase()?-1:c.toLowerCase()>t.toLowerCase()?1:0).forEach(c=>{let t=document.createElement("option");t.text=c,t.value=c,x.appendChild(t)});let T=async()=>(await e()).filter(c=>f?c.type===f:!0).filter(c=>v.value.trim()!==""?o.includes(c.id):!0).sort((c,t)=>u==="date"&&m==="asc"?c.lastModified-t.lastModified:u==="date"&&m==="desc"?t.lastModified-c.lastModified:u==="filename"&&m==="asc"&&c.filename<t.filename?-1:u==="filename"&&m==="asc"&&c.filename>t.filename||u==="filename"&&m==="desc"&&c.filename<t.filename?1:u==="filename"&&m==="desc"&&c.filename>t.filename?-1:0),h=async()=>{s(await T())},L=()=>{m="asc",a.style.display="unset",i.style.display="none"},S=()=>{m="desc",a.style.display="none",i.style.display="unset"},g=async(c=x.value)=>{f=c,await h()};d.addEventListener(n,"click",async c=>{c.preventDefault(),u!=="date"||m==="asc"?S():L(),u="date",n.classList.add("active"),p.classList.remove("active"),await h()},!1),d.addEventListener(p,"click",async c=>{c.preventDefault(),u!=="filename"?L():m==="asc"?S():L(),u="filename",n.classList.remove("active"),p.classList.add("active"),await h()},!1),d.addEventListener(a,"click",async c=>{c.preventDefault(),S(),await h()},!1),d.addEventListener(i,"click",async c=>{c.preventDefault(),L(),await h()},!1),d.addEventListener(x,"change",async()=>{await g()},!1),G(W,"FlexSearch").then(async c=>{let t=new c.Document({index:["filename","type"],tokenize:"full",worker:!0});await Promise.all((await e()).map(r=>t.add(r))),d.addEventListener(v,"keyup",async()=>{o=(await t.searchAsync(v.value)).map(y=>y.result).flat(),await h()},!1)}),d.addEventListener(b,"click",async c=>{c.preventDefault(),u="date",m="desc",f="",o=[],n.classList.add("active"),p.classList.remove("active"),S(),x.value="",v.value="",await h()},!1)},Rt=async({assetsStorage:e,eventsManager:s,showScreen:d,notifications:u,modal:m,baseUrl:f})=>{let o=document.createElement("div");o.innerHTML=X;let n=o.firstChild,p=n.querySelector(".no-data"),a=n.querySelector("#assets-no-match.no-data"),i=n.querySelector("#assets-container"),x=document.createElement("ul");x.classList.add("open-list");let v=await e.getAllData(),b=v,T=te(n),h=oe(n);s.addEventListener(T,"click",()=>{d("add-asset")},!1),s.addEventListener(h,"click",async()=>{u.confirm(`Delete ${b.length} assets?`,async()=>{for(let g of b)await e.deleteItem(g.id);b=[],v=await e.getAllData(),await L(b)})},!1),i.appendChild(x);let L=async g=>{b=g,x.innerHTML="",g.forEach(c=>{let{deleteButton:t}=He(c,x,u,f);s.addEventListener(t,"click",()=>{u.confirm(`Delete asset: ${c.filename}?`,async()=>{await e.deleteItem(c.id),b=b.filter(y=>y.id!==c.id),t.parentElement.classList.add("hidden"),setTimeout(()=>{L(b)},500)})},!1)}),g.length===0?(x.classList.add("hidden"),h.classList.add("hidden"),(await e.getList()).length===0?(p.classList.remove("hidden"),a.classList.add("hidden")):(p.classList.add("hidden"),a.classList.remove("hidden"))):(x.classList.remove("hidden"),h.classList.remove("hidden"),p.classList.add("hidden"),a.classList.add("hidden"))};await L(v);let S=()=>e.getAllData();m.show(n,{isAsync:!0}),ke(S,L,s)},_t=({assetsStorage:e,eventsManager:s,showScreen:d,notifications:u,deployAsset:m,getUser:f,baseUrl:o,activeTab:n})=>{let p,a=document.createElement("div");a.innerHTML=ee;let i=a.firstChild,x=i.querySelectorAll("#add-asset-tabs li"),v=y=>{x.forEach(M=>M.classList.remove("active")),y.classList.add("active"),document.querySelectorAll("#add-asset-screens > div").forEach(M=>{M.classList.remove("active")});let l=i.querySelector("#"+y.dataset.target);l?.classList.add("active"),l?.querySelector("input")?.focus()};x.forEach(y=>{s.addEventListener(y,"click",()=>v(y))}),setTimeout(()=>{n&&v(x[n])});let b=se(i),T=ne(i),h=re(i),L=ce(i),S=ae(i),g=ie(i);s.addEventListener(b,"click",()=>{d("assets")},!1);let c=(y,l=!1)=>new Promise((M,E)=>{if(y.files?.length===0)return;let w=y.files[0],C=2*1024*1024;if(w.size>C){E("Error: Exceeded size 2MB");return}let k=new FileReader;s.addEventListener(k,"load",async q=>{let U="";if(l){if(!p){E("Error: Unauthenticated user");return}S.innerText="Uploading...",S.classList.add("disabled");let A=await m(p,{path:w.name,content:q.target?.result.split("base64,")[1]});S.innerText="Upload file",S.classList.remove("disabled"),A?U=A.url:E("Error: Failed to upload file")}U=U||q.target?.result,M({id:B(),filename:w.name,type:Ue(w.type,w.name),url:U,lastModified:Date.now()})}),s.addEventListener(k,"error",()=>{E("Error: Failed to read file")}),k.readAsDataURL(w)}),t=async(y,l,M=!1)=>{await e.updateItem(y.id,y);let E=document.createElement("p"),w=document.createElement("span");w.textContent="Added file: ",w.classList.add("bold"),E.appendChild(w);let C=document.createElement("span");C.textContent+=y.filename,E.appendChild(C),E.classList.add("overflow-text"),l.appendChild(E);let k=document.createElement("p"),q=document.createElement("span");q.textContent="URL: ",q.classList.add("bold"),k.appendChild(q);let U=document.createElement("span");if(U.textContent+=y.url,k.appendChild(U),k.classList.add("overflow-text"),l.appendChild(k),M){let H=document.createElement("p");H.textContent="The asset should be available on this URL soon (~1 min).",H.classList.add("description","center"),l.appendChild(H)}else{let H=document.createElement("img");H.src=pe(y,o),H.onerror=function(){let D=o+"assets/images/image.svg";H.src!==D&&(H.src=D)},H.classList.add("img-preview-larger"),l.appendChild(H)}let A=document.createElement("p");A.textContent="Click to copy URL",A.classList.add("description","center"),l.appendChild(A);let _=document.createElement("hr");_.style.margin="1em",l.appendChild(_),l.title="Click to copy URL",u.success("File added to assets!"),l.onclick=()=>le(y.url,u)},r=async(y,l,M=!1)=>{await c(y,M).then(E=>t(E,l,M)).catch(E=>{u.error(E)})};return s.addEventListener(T,"change",()=>{r(T,h)},!1),s.addEventListener(S,"click",async y=>{p=await f(async()=>{await d("add-asset",1)}),p||(y.preventDefault(),u.error("Authentication error!"))},!1),s.addEventListener(L,"change",()=>{r(L,g,!0)},!1),i},Ue=(e,s)=>{let d={"audio/aac":"audio","video/x-msvideo":"video","image/bmp":"image","application/x-bzip":"archive","application/x-bzip2":"archive","text/css":"stylesheet","text/csv":"csv","application/gzip":"archive","image/gif":"image","text/html":"html","image/vnd.microsoft.icon":"icon","image/jpeg":"image","text/javascript":"script","application/javascript":"script","application/json":"json","application/ld+json":"json","audio/midi":"audio","audio/x-midi":"audio","audio/mpeg":"audio","video/mp4":"video","video/mpeg":"video","audio/ogg":"audio","video/ogg":"video","application/ogg":"audio","audio/opus":"audio","font/otf":"font","image/png":"image","application/vnd.rar":"archive","image/svg+xml":"image","application/x-tar":"archive","image/tiff":"image","video/mp2t":"video","font/ttf":"font","text/plain":"text","audio/wav":"audio","audio/webm":"audio","video/webm":"video","image/webp":"image","font/woff":"font","font/woff2":"font","application/xhtml+xml":"html","application/xml":"xml","application/zip":"archive","video/3gpp":"video","video/3gpp2":"audio","application/x-7z-compressed":"archive"},u={aac:"audio",bmp:"image",bzip:"archive",bzip2:"archive",css:"stylesheet",csv:"csv",gzip:"archive",gif:"image",html:"html",ico:"icon",jpeg:"image",jpg:"image",js:"script",json:"json",midi:"audio",mpeg:"audio",mp4:"video",ogg:"audio",otf:"font",png:"image",rar:"archive",svg:"image",tar:"archive",tiff:"image",mp2t:"video",ttf:"font",txt:"text",wav:"audio",webm:"audio",webp:"image",woff:"font",woff2:"font",xml:"xml",zip:"archive","3gpp":"video","3gpp2":"audio","7z":"archive"},m=s.split(".")[s.split(".").length-1];return d[e]||u[m]||"other"},pe=(e,s)=>{if(e.type==="image"||e.type==="icon")return e.url;let d=s+"assets/images/";return e.type==="other"?d+"file.svg":d+e.type+".svg"};export{_t as createAddAssetContainer,Rt as createAssetsList};
