var et=Object.defineProperty;var Ao=Object.getOwnPropertyDescriptor;var Ho=Object.getOwnPropertyNames;var jo=Object.prototype.hasOwnProperty;var Uo=(o,r)=>{for(var s in r)et(o,s,{get:r[s],enumerable:!0})},Xe=(o,r,s,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let c of Ho(r))!jo.call(o,c)&&c!==s&&et(o,c,{get:()=>r[c],enumerable:!(n=Ao(r,c))||n.enumerable});return o},t=(o,r,s)=>(Xe(o,r,"default"),s&&Xe(s,r,"default"));import{Compartment as N,EditorState as ke}from"@codemirror/state";import{oneDark as Mn}from"@codemirror/theme-one-dark";import{EditorView as D,keymap as Se}from"@codemirror/view";import{undo as kn,redo as Sn}from"@codemirror/commands";import{defaultHighlightStyle as wn,syntaxHighlighting as uo,indentUnit as vn,HighlightStyle as An}from"@codemirror/language";import{tags as Hn}from"@lezer/highlight";var tt=()=>document.querySelector("#editor-mode");var ot=(o,r)=>{let s;return(...n)=>{s&&clearTimeout(s),s=setTimeout(()=>o.apply(null,n),typeof r=="function"?r():r)}};var Co=()=>navigator.userAgent.includes("Mac")||navigator.platform.includes("Mac"),rt=o=>Co()?o.metaKey:o.ctrlKey;var nt=()=>String(Math.random())+"-"+Date.now().toFixed();var ct=["esm.sh","skypack","esm.run","jsdelivr.esm","fastly.jsdelivr.esm","gcore.jsdelivr.esm","testingcf.jsdelivr.esm","jsdelivr.b-cdn.esm","jspm"],at=["jsdelivr","fastly.jsdelivr","unpkg","gcore.jsdelivr","testingcf.jsdelivr","jsdelivr.b-cdn","npmcdn"],it=["jsdelivr.gh","fastly.jsdelivr.gh","statically","gcore.jsdelivr.gh","testingcf.jsdelivr.gh","jsdelivr.b-cdn.gh"],I={getModuleUrl:(o,{isModule:r=!0,defaultCDN:s="esm.sh",external:n}={})=>{o=o.replace(/#nobundle/g,"");let c=i=>!n||!i.includes("https://esm.sh")?i:i.includes("?")?`${i}&external=${n}`:`${i}?external=${n}`,l=st(o,r,s);return l?c(l):r?c("https://esm.sh/"+o):"https://cdn.jsdelivr.net/npm/"+o},getUrl:(o,r)=>o.startsWith("http")||o.startsWith("data:")?o:st(o,!1,r||qo())||o,cdnLists:{npm:at,module:ct,gh:it},checkCDNs:async(o,r)=>{let s=[r,...I.cdnLists.npm].filter(Boolean);for(let n of s)try{if((await fetch(I.getUrl(o,n),{method:"HEAD"})).ok)return n}catch{}return I.cdnLists.npm[0]}},qo=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||I.cdnLists.npm[0]}catch{return I.cdnLists.npm[0]}},st=(o,r,s)=>{let n=r&&o.startsWith("unpkg:")?"?module":"";o.startsWith("gh:")?o=o.replace("gh",it[0]):o.includes(":")||(o=(s||(r?ct[0]:at[0]))+":"+o);for(let c of Bo){let[l,i]=c;if(l.test(o))return o.replace(l,i)+n}return null},Bo=[[/^(esm\.sh:)(.+)/i,"https://esm.sh/$2"],[/^(npm:)(.+)/i,"https://esm.sh/$2"],[/^(node:)(.+)/i,"https://esm.sh/$2"],[/^(jsr:)(.+)/i,"https://esm.sh/jsr/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly\.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(gcore\.jsdelivr:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2"],[/^(testingcf\.jsdelivr:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2"],[/^(jsdelivr\.b-cdn:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2"],[/^(jsdelivr\.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(fastly\.jsdelivr\.gh:)(.+)/i,"https://fastly.jsdelivr.net/gh/$2"],[/^(gcore\.jsdelivr\.gh:)(.+)/i,"https://gcore.jsdelivr.net/gh/$2"],[/^(testingcf\.jsdelivr\.gh:)(.+)/i,"https://testingcf.jsdelivr.net/gh/$2"],[/^(jsdelivr\.b-cdn\.gh:)(.+)/i,"https://jsdelivr.b-cdn.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm\.run:)(.+)/i,"https://esm.run/$2"],[/^(jsdelivr\.esm:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2/+esm"],[/^(fastly\.jsdelivr\.esm:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2/+esm"],[/^(gcore\.jsdelivr\.esm:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2/+esm"],[/^(testingcf\.jsdelivr\.esm:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2/+esm"],[/^(jsdelivr\.b-cdn\.esm:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2/+esm"],[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle\.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(npmcdn:)(.+)/i,"https://npmcdn.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var{getUrl:v,getModuleUrl:Pn}=I,P=v("@live-codes/browser-compilers@0.18.0/dist/");var lt=v("cm6-theme-basic-light@0.2.0/dist/index.js"),mt=v("cm6-theme-basic-dark@0.2.0/dist/index.js"),pt=v("cm6-theme-gruvbox-light@0.2.0/dist/index.js"),ut=v("cm6-theme-gruvbox-dark@0.2.0/dist/index.js"),dt=v("cm6-theme-material-dark@0.2.0/dist/index.js"),gt=v("cm6-theme-nord@0.2.0/dist/index.js"),ft=v("cm6-theme-solarized-light@0.2.0/dist/index.js"),ht=v("cm6-theme-solarized-dark@0.2.0/dist/index.js");var yt=v("comlink@4.4.1/dist/");var B=v("@ddietr/codemirror-themes@1.4.2/dist/theme/");var E=v("thememirror@2.0.1/dist/themes/");var Io=o=>{let r=o.trim(),s,n;return o.includes(":")&&([s,r]=r.split(":"),s!=="monaco"&&s!=="codemirror"&&s!=="codejar"&&(s=void 0)),o.includes("@")&&([r,n]=r.split("@"),n!=="light"&&n!=="dark"&&(n=void 0)),{editor:s,editorTheme:r,theme:n}},xt=({editor:o,editorTheme:r,theme:s,editorThemes:n})=>{if(!r)return null;let l=(typeof r=="string"?r.split(",").map(i=>i.trim()):r).map(Io);for(let i of l)if((i.editor===o||i.editor===void 0)&&(i.theme===s||i.theme===void 0)&&n.includes(i.editorTheme))return i.editorTheme;return null};import{keymap as bt,highlightSpecialChars as Tt,drawSelection as Et,highlightActiveLine as No,dropCursor as Do,rectangularSelection as Ro,crosshairCursor as Po,lineNumbers as z,highlightActiveLineGutter as $o}from"@codemirror/view";import{EditorState as Fo}from"@codemirror/state";import{defaultHighlightStyle as Lt,syntaxHighlighting as Mt,indentOnInput as Oo,bracketMatching as Wo,foldGutter as Vo,foldKeymap as zo}from"@codemirror/language";import{defaultKeymap as kt,history as St,historyKeymap as wt}from"@codemirror/commands";import{searchKeymap as Go,highlightSelectionMatches as Ko}from"@codemirror/search";import{autocompletion as _o,completionKeymap as Jo,closeBrackets as me,closeBracketsKeymap as Qo}from"@codemirror/autocomplete";import{lintKeymap as Yo}from"@codemirror/lint";import{EditorView as Zn}from"@codemirror/view";var vt=[$o(),Tt(),St(),Vo(),Et(),Do(),Fo.allowMultipleSelections.of(!0),Oo(),Mt(Lt,{fallback:!0}),Wo(),_o(),Ro(),Po(),No(),Ko(),bt.of([...Qo,...kt,...Go,...wt,...zo,...Jo,...Yo])],Jn=[Tt(),St(),Et(),Mt(Lt,{fallback:!0}),bt.of([...kt,...wt])];import{LanguageSupport as Zo,StreamLanguage as Xo}from"@codemirror/language";var M=o=>new Zo(Xo.define(o)),y=o=>`./vendor/codemirror/v6.0.1/${o}`,d={core:y("codemirror-core.js"),vue:y("codemirror-lang-vue.js"),json:y("codemirror-lang-json.js"),markdown:y("codemirror-lang-markdown.js"),python:y("codemirror-lang-python.js"),php:y("codemirror-lang-php.js"),cpp:y("codemirror-lang-cpp.js"),sql:y("codemirror-lang-sql.js"),wast:y("codemirror-lang-wast.js"),scss:y("codemirror-lang-scss.js"),coffeescript:y("codemirror-lang-coffeescript.js"),livescript:y("codemirror-lang-livescript.js"),ruby:y("codemirror-lang-ruby.js"),go:y("codemirror-lang-go.js"),perl:y("codemirror-lang-perl.js"),lua:y("codemirror-lang-lua.js"),r:y("codemirror-lang-r.js"),julia:y("codemirror-lang-julia.js"),scheme:y("codemirror-lang-scheme.js"),clojure:y("codemirror-lang-clojure.js"),tcl:y("codemirror-lang-tcl.js"),less:y("codemirror-lang-less.js"),stylus:y("codemirror-lang-stylus.js"),rust:y("codemirror-lang-rust.js"),swift:y("codemirror-lang-swift.js")},pe={html:async()=>(await import(d.core)).html(),css:async()=>(await import(d.core)).css(),javascript:async()=>(await import(d.core)).javascript(),typescript:async()=>(await import(d.core)).javascript({typescript:!0}),jsx:async()=>(await import(d.core)).javascript({jsx:!0}),tsx:async()=>(await import(d.core)).javascript({jsx:!0,typescript:!0}),json:async()=>(await import(d.core)).json(),vue:async()=>(await import(d.vue)).vue(),markdown:async()=>(await import(d.markdown)).markdown(),python:async()=>(await import(d.python)).python(),php:async()=>(await import(d.php)).php(),cpp:async()=>(await import(d.cpp)).cpp(),sql:async()=>(await import(d.sql)).sql(),wat:async()=>(await import(d.wast)).wast(),scss:async()=>(await import(d.scss)).sass(),sass:async()=>(await import(d.scss)).sass({indented:!0}),coffeescript:async()=>M((await import(d.coffeescript)).coffeeScript),livescript:async()=>M((await import(d.livescript)).liveScript),ruby:async()=>M((await import(d.ruby)).ruby),go:async()=>M((await import(d.go)).go),perl:async()=>M((await import(d.perl)).perl),lua:async()=>M((await import(d.lua)).lua),r:async()=>M((await import(d.r)).r),julia:async()=>M((await import(d.julia)).julia),scheme:async()=>M((await import(d.scheme)).scheme),clojure:async()=>M((await import(d.clojure)).clojure),tcl:async()=>M((await import(d.tcl)).tcl),less:async()=>M((await import(d.less)).less),stylus:async()=>M((await import(d.stylus)).stylus),rust:async()=>M((await import(d.rust)).rust),swift:async()=>M((await import(d.swift)).swift)};import{Decoration as de,EditorView as er,ViewPlugin as tr,WidgetType as or}from"@codemirror/view";import{getIndentUnit as Ht}from"@codemirror/language";import{RangeSet as rr}from"@codemirror/state";var nr=de.mark({class:"cm-indentation-marker",tagName:"span"}),sr=de.mark({class:"cm-indentation-marker active",tagName:"span"}),ue=class extends or{constructor(r,s,n){super(),this.numIndent=r,this.indentSize=s,this.activeIndent=n}eq(r){return this.numIndent===r.numIndent&&this.indentSize===r.indentSize&&this.activeIndent===r.activeIndent}toDOM(r){let s=Ht(r.state),n=document.createElement("span");n.style.top="0",n.style.left="4px",n.style.position="absolute",n.style.pointerEvents="none";for(let c=0;c<this.numIndent;c++){let l=document.createElement("span");l.className="cm-indentation-marker",l.classList.toggle("active",c===this.activeIndent),l.innerHTML=" ".repeat(s),n.appendChild(l)}return n}};function jt(o,r,s){let n=0,c=0,l=null;for(let i=0;i<o.length;i++){if(o[i]!==" "&&o[i]!=="	")return c%r===0&&i!==0&&n++,n;(l==="	"||c%r===0)&&(n++,s&&s(i)),o[i]===" "?c++:c=0,l=o[i]}return n}function cr(o,r){let s=Math.min(o,r),n=Math.max(o,r);return s===0&&n>0?1:s===n&&s>0?s-1:s}function ar(o,r,s){let n=o.lines,c=r;for(;c<=n;){let{text:l}=o.line(c);if(l.trim().length===0){c++;continue}let i=jt(l,s);return[c,i]}return[n+1,0]}function At(o){let r=Ht(o.state),s=new Map,n=[];for(let{from:l,to:i}of o.visibleRanges){let m=l,h=0,p=0,x=0;for(;m<=i;){let b=o.state.doc.lineAt(m),{text:A}=b;if(A.trim().length===0){if(x<b.number){let[L,H]=ar(o.state.doc,b.number+1,r);x=L,p=H}let S=cr(h,p);s.set(b.number,S),n.push({from:m,to:m,lineNumber:b.number,create:L=>de.widget({widget:new ue(S,r,L)})})}else{let S=[];h=jt(A,r,L=>S.push(L)),s.set(b.number,S.length),n.push(...S.map((L,H)=>({from:b.from+L,to:b.from+L+1,lineNumber:b.number,create:j=>j===H?sr:nr})))}m=b.to+1}}let c=ir(o.state,s);return rr.of(Array.from(n).map(({lineNumber:l,from:i,to:m,create:h})=>{let p=l>=c.start&&l<=c.end?c.activeIndent-1:void 0;return{from:i,to:m,value:h(p)}}),!0)}function ir(o,r){let s=o.doc.lineAt(o.selection.main.head),n=r.get(s.number),c=s.number,l=r.get(c+1);l&&n!=null&&l>n&&(n=l,c++);let i=r.get(c-1);if(i&&n!=null&&i>n&&(n=i,c--),!n)return{start:-1,end:-1,activeIndent:NaN};let m,h;for(m=c;m>=0;m--){let p=r.get(m-1);if(!p||p<n)break}for(h=c;;h++){let p=r.get(h+1);if(!p||p<n)break}return{start:m,end:h,activeIndent:n}}function lr(){return tr.define(o=>({decorations:At(o),update(r){(r.docChanged||r.viewportChanged||r.selectionSet)&&(this.decorations=At(r.view))}}),{decorations:o=>o.decorations})}var mr=er.baseTheme({".cm-line":{position:"relative"},".cm-indentation-marker":{display:"inline-block"},"&light .cm-indentation-marker":{background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") left repeat-y'},"&light .cm-indentation-marker.active":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACAQMAAACjTyRkAAAABlBMVEX///+goKD0a5EfAAAADElEQVR4nGNgYGgAAACEAIHJde6SAAAAAElFTkSuQmCC) left repeat-y"},"&dark .cm-indentation-marker":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHB3d/8PAAOIAdULw8qMAAAAAElFTkSuQmCC) left repeat-y"},"&dark .cm-indentation-marker.active":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACAQMAAACjTyRkAAAABlBMVEUAAACFhYWZv3sFAAAAAnRSTlMA/1uRIrUAAAAMSURBVHicY2BgaAAAAIQAgcl17pIAAAAASUVORK5CYII=) left repeat-y"}});function ge(){return[lr(),mr]}import{insertNewlineAndIndent as Ut,cursorCharLeft as Ct,selectCharLeft as qt,cursorGroupLeft as pr,selectGroupLeft as ur,cursorCharRight as Bt,selectCharRight as It,cursorGroupRight as dr,selectGroupRight as gr,cursorLineUp as Nt,selectLineUp as Dt,cursorLineDown as Rt,selectLineDown as Pt,cursorLineBoundaryBackward as $t,selectLineBoundaryBackward as Ft,cursorDocStart as Ot,selectDocStart as Wt,cursorPageUp as fe,selectPageUp as Vt,cursorPageDown as he,selectPageDown as zt,cursorLineBoundaryForward as Gt,selectLineBoundaryForward as Kt,cursorDocEnd as _t,selectDocEnd as Jt,selectAll as fr,deleteCharBackward as ye,deleteCharForward as Qt,deleteGroupBackward as Yt,deleteGroupForward as hr,deleteToLineStart as yr,deleteToLineEnd as Zt,cursorLineStart as xr,selectLineStart as br,cursorLineEnd as Tr,selectLineEnd as Er,splitLine as Lr,transposeChars as Mr,deleteLine as kr,moveLineDown as Sr,moveLineUp as wr,copyLineDown as vr,copyLineUp as Ar,selectLine as Hr,cursorMatchingBracket as jr,indentMore as Xt,indentLess as eo,lineComment as Ur,lineUncomment as Cr,toggleComment as qr,toggleBlockComment as Br,undo as Ir,redo as to,undoSelection as Nr}from"@codemirror/commands";import{openSearchPanel as Dr,closeSearchPanel as Rr,selectMatches as Pr,replaceAll as $r,gotoLine as Fr,selectNextOccurrence as Or,selectSelectionMatches as Wr}from"@codemirror/search";import{foldCode as Vr,unfoldCode as zr,foldAll as Gr,unfoldAll as Kr}from"@codemirror/language";import{startCompletion as _r,closeCompletion as Jr,moveCompletionSelection as G,acceptCompletion as oo,deleteBracketPair as Qr}from"@codemirror/autocomplete";import{openLintPanel as Yr,nextDiagnostic as Zr}from"@codemirror/lint";import{EditorSelection as ro}from"@codemirror/state";var no=o=>r=>{let s=o==="down",n=r.state.selection;for(let c of n.ranges)n=n.addRange(r.moveVertically(c,s));return r.dispatch({selection:n}),!0},Xr=no("up"),en=no("down"),tn=o=>{let r=null;for(let s of o.state.selection.ranges)if(!s.empty)for(let n=s.from;n<=s.to;){let c=o.state.doc.lineAt(n),l=Math.min(c.to,s.to);r?r=r.addRange(ro.range(l,l)):r=ro.single(l),n=c.to+1}return r?(o.dispatch({selection:r}),!0):!1},xe=[{key:"Ctrl-Space",run:_r},{key:"Escape",run:Jr},{key:"ArrowDown",run:G(!0)},{key:"ArrowUp",run:G(!1)},{key:"PageDown",run:G(!0,"page")},{key:"PageUp",run:G(!1,"page")},{key:"Enter",run:oo},{key:"Tab",run:oo},{key:"Mod-f",run:Dr,scope:"editor search-panel"},{key:"Escape",run:Rr,scope:"editor search-panel"},{key:"Alt-Enter",run:Pr,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:$r,scope:"editor search-panel"},{key:"Ctrl-g",run:Fr},{key:"Mod-d",run:Or,preventDefault:!0},{key:"Shift-Mod-l",run:Wr},{key:"Enter",run:Ut,shift:Ut},{key:"ArrowLeft",run:Ct,shift:qt,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:pr,shift:ur},{key:"ArrowRight",run:Bt,shift:It,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:dr,shift:gr},{key:"ArrowUp",run:Nt,shift:Dt,preventDefault:!0},{key:"ArrowDown",run:Rt,shift:Pt,preventDefault:!0},{key:"Home",run:$t,shift:Ft},{mac:"Cmd-ArrowLeft",run:$t,shift:Ft},{key:"Mod-Home",run:Ot,shift:Wt},{mac:"Cmd-ArrowUp",run:Ot,shift:Wt},{key:"PageUp",run:fe,shift:Vt},{mac:"Ctrl-ArrowUp",run:fe,shift:Vt},{key:"PageDown",run:he,shift:zt},{mac:"Ctrl-ArrowDown",run:he,shift:zt},{key:"End",run:Gt,shift:Kt},{mac:"Cmd-ArrowRight",run:Gt,shift:Kt},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Xr,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:en,preventDefault:!0},{key:"Shift-Alt-i",run:tn},{key:"Mod-End",run:_t,shift:Jt},{mac:"Cmd-ArrowDown",run:_t,shift:Jt},{key:"Mod-a",run:fr},{key:"Backspace",run:Qr},{key:"Backspace",run:ye,shift:ye},{key:"Delete",run:Qt},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Yt},{key:"Mod-Delete",mac:"Alt-Delete",run:hr},{mac:"Mod-Backspace",run:yr},{mac:"Mod-Delete",run:Zt},{mac:"Ctrl-b",run:Ct,shift:qt,preventDefault:!0},{mac:"Ctrl-f",run:Bt,shift:It},{mac:"Ctrl-p",run:Nt,shift:Dt},{mac:"Ctrl-n",run:Rt,shift:Pt},{mac:"Ctrl-a",run:xr,shift:br},{mac:"Ctrl-e",run:Tr,shift:Er},{mac:"Ctrl-d",run:Qt},{mac:"Ctrl-h",run:ye},{mac:"Ctrl-k",run:Zt},{mac:"Ctrl-Alt-h",run:Yt},{mac:"Ctrl-o",run:Lr},{mac:"Ctrl-t",run:Mr},{mac:"Ctrl-v",run:he},{mac:"Alt-v",run:fe},{key:"Shift-Mod-k",run:kr},{key:"Alt-ArrowDown",run:Sr},{key:"Alt-ArrowUp",run:wr},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:vr},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Ar},{key:"Mod-l",run:Hr,preventDefault:!0},{key:"Shift-Mod-\\",run:jr},{key:"Tab",run:Xt,shift:eo,preventDefault:!0},{key:"Mod-[",run:eo},{key:"Mod-]",run:Xt},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Vr},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:zr},{key:"Mod-k Mod-0",run:Gr},{key:"Mod-k Mod-j",run:Kr},{key:"Mod-k Mod-c",run:Ur},{key:"Mod-k Mod-u",run:Cr},{key:"Mod-/",run:qr},{key:"Shift-Alt-a",run:Br},{key:"Mod-z",run:Ir,preventDefault:!0},{key:"Mod-y",run:to,preventDefault:!0},{key:"Mod-Shift-z",run:to,preventDefault:!0},{key:"Mod-u",run:Nr,preventDefault:!0},{key:"Mod-Shift-m",run:Yr},{key:"F8",run:Zr}];import{EditorView as on,ViewPlugin as rn,Decoration as $,WidgetType as nn}from"@codemirror/view";import{syntaxTree as sn}from"@codemirror/language";var Ee=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkgrey","#a9a9a9"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkslategrey","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["goldenrod","#daa520"],["gold","#ffd700"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["grey","#808080"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavenderblush","#fff0f5"],["lavender","#e6e6fa"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgray","#d3d3d3"],["lightgreen","#90ee90"],["lightgrey","#d3d3d3"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370db"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#db7093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["slategrey","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]),cn=function(o,r){var s={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.indexOf(n)<0&&(s[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,n=Object.getOwnPropertySymbols(o);c<n.length;c++)r.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(o,n[c])&&(s[n[c]]=o[n[c]]);return s},io=new WeakMap,U=function(o){return o.rgb="RGB",o.hex="HEX",o.named="NAMED",o.hsl="HSL",o}(U||(U={})),an=/rgb\(\s*(\d{1,3}%?)\s*,?\s*(\d{1,3}%?)\s*,?\s*(\d{1,3}%?)\s*(,\s*0?\.\d+)?\)/,ln=/hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(,\s*0?\.\d+)?\)/;function so(o){let r=[];for(let s of o.visibleRanges)sn(o.state).iterate({from:s.from,to:s.to,enter:({type:n,from:c,to:l})=>{if(n.name==="CallExpression"){let i=o.state.doc.sliceString(c,l);if(i.startsWith("rgb")){let m=an.exec(i);if(!m)return;let[h,p,x,b,A]=m,S=pn(p,x,b),L=$.widget({widget:new R({colorType:U.rgb,color:S,from:c,to:l,alpha:A||""}),side:1});r.push(L.range(c));return}if(i.startsWith("hsl")){let m=ln.exec(i);if(!m)return;let[h,p,x,b,A]=m,S=un(p,x,b),L=$.widget({widget:new R({colorType:U.hsl,color:S,from:c,to:l,alpha:A||""}),side:1});r.push(L.range(c));return}}if(n.name==="ColorLiteral"){let[i,m]=mn(o.state.doc.sliceString(c,l)),h=$.widget({widget:new R({colorType:U.hex,color:i,from:c,to:l,alpha:m}),side:1});r.push(h.range(c))}if(n.name==="ValueName"){let i=o.state.doc.sliceString(c,l);if(Ee.has(i)){let m=Ee.get(i),h=$.widget({widget:new R({colorType:U.named,color:m,from:c,to:l,alpha:""}),side:1});r.push(h.range(c))}}}});return $.set(r)}function mn(o){return o.length===4?[`#${o[1].repeat(2)}${o[2].repeat(2)}${o[3].repeat(2)}`,""]:o.length===5?[`#${o[1].repeat(2)}${o[2].repeat(2)}${o[3].repeat(2)}`,o[4].repeat(2)]:o.length===9?[`#${o.slice(1,-2)}`,o.slice(-2)]:[o,""]}function be(o){let r;if(o.endsWith("%")){let s=Number(o.slice(0,-1));r=Math.round(s/100*255)}else r=Number(o);return K(r)}function K(o){let r=o.toString(16);return r.length==1?"0"+r:r}function co(o){let r=o.slice(1,3),s=o.slice(3,5),n=o.slice(5,7);return[parseInt(r,16),parseInt(s,16),parseInt(n,16)]}function pn(o,r,s){return`#${be(o)}${be(r)}${be(s)}`}function un(o,r,s){let n=Number(r)/100,c=Number(s)/100,[l,i,m]=dn(Number(o),n,c);return`#${K(l)}${K(i)}${K(m)}`}function dn(o,r,s){if(r===0){let b=Math.round(s*255);return[b,b,b]}let n;s<.5?n=s*(1+r):n=s+r-s*r;let c=2*s-n;o=o/360;let l=ao(o+.333),i=o,m=ao(o-.333),h=Te(n,c,l),p=Te(n,c,i),x=Te(n,c,m);return[Math.round(h*255),Math.round(p*255),Math.round(x*255)]}function ao(o){return o<0?o+1:o>1?o-1:o}function Te(o,r,s){return 6*s<1?r+(o-r)*6*s:2*s<1?o:3*s<2?r+(o-r)*(.666-s)*6:r}function gn(o,r,s){let n=o/255,c=r/255,l=s/255,i=Math.min(n,c,l),m=Math.max(n,c,l),h=(m+i)/2;if(m===i)return[0,0,h];let p;h<=.5?p=(m-i)/(m+i):p=(m-i)/(2-m-i);let x;for(m===n?x=(c-l)/(m-i):c===m?x=2+(l-n)/(m-i):x=4+(n-c)/(m-i),x=Math.round(x*60);x<0;)x+=360;return[x,p,h]}var _="cm-css-color-picker-wrapper",R=class extends nn{constructor(r){var{color:s}=r,n=cn(r,["color"]);super(),this.state=n,this.color=s}eq(r){return r.state.colorType===this.state.colorType&&r.color===this.color&&r.state.from===this.state.from&&r.state.to===this.state.to&&r.state.alpha===this.state.alpha}toDOM(){let r=document.createElement("input");io.set(r,this.state),r.type="color",r.value=this.color;let s=document.createElement("span");return s.appendChild(r),s.className=_,s}ignoreEvent(){return!1}},fn=on.baseTheme({[`.${_}`]:{display:"inline-block",outline:"1px solid #eee",marginRight:"0.6ch",height:"1em",width:"1em",transform:"translateY(1px)"},[`.${_} input[type="color"]`]:{cursor:"pointer",height:"100%",width:"100%",padding:0,border:"none","&::-webkit-color-swatch-wrapper":{padding:0},"&::-webkit-color-swatch":{border:"none"},"&::-moz-color-swatch":{border:"none"}}}),hn=rn.fromClass(class{constructor(r){this.decorations=so(r)}update(r){(r.docChanged||r.viewportChanged)&&(this.decorations=so(r.view))}},{decorations:o=>o.decorations,eventHandlers:{change:(o,r)=>{let s=o.target;if(s.nodeName!=="INPUT"||!s.parentElement||!s.parentElement.classList.contains(_))return!1;let n=io.get(s),c=s.value+n.alpha;if(n.colorType===U.rgb)c=`rgb(${co(s.value).join(", ")}${n.alpha})`;else if(n.colorType===U.named)for(let[l,i]of Ee.entries())i===s.value&&(c=l);else if(n.colorType===U.hsl){let[l,i,m]=co(s.value),[h,p,x]=gn(l,i,m);c=`hsl(${h}, ${Math.round(p*100)}%, ${Math.round(x*100)}%${n.alpha})`}return r.dispatch({changes:{from:n.from,to:n.to,insert:c}}),!0}}}),Le=[hn,fn];import{lineNumbers as Es,highlightActiveLineGutter as Ls,highlightSpecialChars as Ms,drawSelection as ks,dropCursor as Ss,rectangularSelection as ws,crosshairCursor as vs,highlightActiveLine as As,keymap as Hs}from"@codemirror/view";import{EditorView as lo}from"@codemirror/view";import{EditorState as Us}from"@codemirror/state";import{foldGutter as qs,indentOnInput as Bs,syntaxHighlighting as Is,defaultHighlightStyle as Ns,bracketMatching as Ds,foldKeymap as Rs}from"@codemirror/language";import{history as $s,defaultKeymap as Fs,historyKeymap as Os}from"@codemirror/commands";import{highlightSelectionMatches as Vs,searchKeymap as zs}from"@codemirror/search";import{closeBrackets as Ks,autocompletion as _s,closeBracketsKeymap as Js,completionKeymap as Qs}from"@codemirror/autocomplete";import{lintKeymap as Zs}from"@codemirror/lint";import{HighlightStyle as yn,syntaxHighlighting as xn}from"@codemirror/language";var Me=[{name:"amy",title:"Amy",url:E+"amy.js",exportName:"amy"},{name:"aura",title:"Aura",url:B+"aura.js",exportName:"aura"},{name:"ayu-light",title:"Ayu Light",url:E+"ayu-light.js",exportName:"ayuLight"},{name:"barf",title:"Barf",url:E+"barf.js",exportName:"barf"},{name:"basic-light",title:"Basic Light",url:lt,exportName:"basicLight"},{name:"basic-dark",title:"Basic Dark",url:mt,exportName:"basicDark"},{name:"bespin",title:"Bespin",url:E+"bespin.js",exportName:"bespin"},{name:"birds-of-paradise",title:"Birds of Paradise",url:E+"birds-of-paradise.js",exportName:"birdsOfParadise"},{name:"boys-and-girls",title:"Boys and Girls",url:E+"boys-and-girls.js",exportName:"boysAndGirls"},{name:"catppuccin-latte",title:"Catppuccin Latte",url:P+"catppuccin/codemirror/codemirror-theme-catppuccin.js",exportName:"catppuccinLatte"},{name:"catppuccin-frappe",title:"Catppuccin Frappe",url:P+"catppuccin/codemirror/codemirror-theme-catppuccin.js",exportName:"catppuccinFrappe"},{name:"catppuccin-macchiato",title:"Catppuccin Macchiato",url:P+"catppuccin/codemirror/codemirror-theme-catppuccin.js",exportName:"catppuccinMacchiato"},{name:"catppuccin-mocha",title:"Catppuccin Mocha",url:P+"catppuccin/codemirror/codemirror-theme-catppuccin.js",exportName:"catppuccinMocha"},{name:"clouds",title:"Clouds",url:E+"clouds.js",exportName:"clouds"},{name:"cobalt",title:"Cobalt",url:E+"cobalt.js",exportName:"cobalt"},{name:"cm-light",title:"Codemirror Light"},{name:"cool-glow",title:"Cool Glow",url:E+"cool-glow.js",exportName:"coolGlow"},{name:"dracula",title:"Dracula",url:E+"dracula.js",exportName:"dracula"},{name:"espresso",title:"Espresso",url:E+"espresso.js",exportName:"espresso"},{name:"github-dark",title:"GitHub Dark",url:B+"github-dark.js",exportName:"githubDark"},{name:"github-light",title:"GitHub Light",url:B+"github-light.js",exportName:"githubLight"},{name:"gruvbox-dark",title:"Gruvbox Dark",url:ut,exportName:"gruvboxDark"},{name:"gruvbox-light",title:"Gruvbox Light",url:pt,exportName:"gruvboxLight"},{name:"material-dark",title:"Material Dark",url:dt,exportName:"materialDark"},{name:"material-light",title:"Material Light",url:B+"material-light.js",exportName:"materialLight"},{name:"monochrome",title:"Monochrome"},{name:"monochrome-dark",title:"Monochrome Dark"},{name:"noctis-lilac",title:"Noctis Lilac",url:E+"noctis-lilac.js",exportName:"noctisLilac"},{name:"nord",title:"Nord",url:gt,exportName:"nord"},{name:"one-dark",title:"One Dark"},{name:"rose-pine-dawn",title:"Ros\xE9 Pine Dawn",url:E+"rose-pine-dawn.js",exportName:"rosePineDawn"},{name:"smoothy",title:"Smoothy",url:E+"smoothy.js",exportName:"smoothy"},{name:"solarized-dark",title:"Solarized Dark",url:ht,exportName:"solarizedDark"},{name:"solarized-light",title:"Solarized Light",url:ft,exportName:"solarizedLight"},{name:"tokyo-night",title:"Tokyo Night",url:B+"tokyo-night.js",exportName:"tokyoNight"},{name:"tokyo-night-day",title:"Tokyo Night Day",url:B+"tokyo-night-day.js",exportName:"tokyoNightDay"},{name:"tokyo-night-storm",title:"Tokyo Night Storm",url:B+"tokyo-night-storm.js",exportName:"tokyoNightStorm"},{name:"tomorrow",title:"Tomorrow",url:E+"tomorrow.js",exportName:"tomorrow"}],mo=({variant:o,settings:r,styles:s})=>{let n=lo.theme({"&":{backgroundColor:r.background,color:r.foreground},".cm-content":{caretColor:r.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:r.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-selectionMatch, .cm-content ::selection":{backgroundColor:r.selection},".cm-activeLine":{backgroundColor:r.lineHighlight},".cm-gutters":{backgroundColor:r.gutterBackground,color:r.gutterForeground},".cm-activeLineGutter":{backgroundColor:r.lineHighlight}},{dark:o==="dark"}),c=yn.define(s);return[n,xn(c)]},po={monochrome:mo({variant:"light",settings:{background:"#fffffe",foreground:"#24292e",caret:"#24292e",selection:"#c8c8fa",gutterBackground:"#fffffe",gutterForeground:"#24292e",lineHighlight:"#f1faff"},styles:[]}),"monochrome-dark":mo({variant:"dark",settings:{background:"#24292e",foreground:"#e2e2e3",caret:"#e2e2e3",selection:"#444d56",gutterBackground:"#24292e",gutterForeground:"#e2e2e3",lineHighlight:"#444d56"},styles:[]})};var e={};Uo(e,{html:()=>bn,htmlCompletionSource:()=>Tn,htmlCompletionSourceWith:()=>En,htmlLanguage:()=>Ln});t(e,sc);t(e,cc);t(e,ac);t(e,ic);t(e,lc);t(e,mc);t(e,pc);t(e,dc);t(e,gc);t(e,fc);t(e,hc);t(e,yc);t(e,xc);t(e,bc);import*as sc from"@codemirror/autocomplete";import*as cc from"@codemirror/commands";import*as ac from"@codemirror/language";import*as ic from"@codemirror/lint";import*as lc from"@codemirror/search";import*as mc from"@codemirror/state";import*as pc from"@codemirror/view";import{html as bn,htmlCompletionSource as Tn,htmlCompletionSourceWith as En,htmlLanguage as Ln}from"@codemirror/lang-html";import*as dc from"@codemirror/lang-css";import*as gc from"@codemirror/lang-javascript";import*as fc from"@codemirror/lang-json";import*as hc from"@codemirror/theme-one-dark";import*as yc from"@lezer/common";import*as xc from"@lezer/highlight";import*as bc from"@lezer/lr";var J=[],we,Q=!1,jn=ot(()=>Q=!Q,50),Ic=async o=>{let{baseUrl:r,container:s,readonly:n,isEmbed:c,editorId:l,getFormatterConfig:i,getFontFamily:m,getLanguageExtension:h}=o,p={...o};if(!s)throw new Error("editor container not found");let x=async a=>pe[a]?.()||pe.html?.(),b=a=>["vue","vue3","vue2"].includes(a)?"vue":o.mapLanguage?.(a)||a,A={"one-dark":Mn,"cm-light":[uo(wn),D.theme({"&":{backgroundColor:"#ffffff"}})],...po},S={dark:"one-dark",light:"cm-light"},L=()=>A[ve]||A[S[o.theme]]||[],H=o.language,j=b(H),Y=await x(j),ve=await _e(o.theme,o.editorTheme),F=[],Z=[],go=a=>{a.docChanged&&Z.forEach(u=>u(a))},C,X,ee,te,oe,re,Ae=a=>j==="typescript"?a:j==="javascript"?a.slice(0,-1):[],He,je=new Promise(a=>He=a),Ue=async(a=!1)=>{let u=C&&a?"changeCodeMirrorLanguage":"initCodeMirrorTS";if(a&&(C=void 0),!["typescript","javascript"].includes(j)||C)return;let g=`${r}vendor/codemirror/v6.0.1/codemirror-ts.js`,[T,k,w]=await Promise.all([import(g),import(yt+"esm/comlink.min.js"),window.compiler.typescriptFeatures({feature:u,payload:H})]),{tsFacetWorker:q,tsSyncWorker:O,tsLinterWorker:le,tsAutocompleteWorker:W,tsHoverWorker:ko}=T;if(!we){let Ye=document.querySelector("#compiler-frame");if(!Ye?.contentWindow)return;let Ze=k.wrap(k.windowEndpoint(Ye.contentWindow));await Ze.initialize(),we=Ze}let So=nt(),V=h(H),wo=j==="typescript"&&!V?.endsWith("ts")&&!V?.endsWith("tsx")?V+".tsx":V,vo=`/${l}.${So}.${wo}`;C=C||[q.of({worker:we,path:vo}),O(),(0,e.autocompletion)({override:[W()]}),ko(),le()],f.dispatch({effects:[Be.reconfigure(Ae(C))]})},fo=a=>{je.then(()=>{window.compiler.typescriptFeatures({feature:"addTypes",payload:a})})},Ce=async a=>{let u={vim:"./vendor/codemirror/v6.0.1/codemirror-vim.js",emacs:"./vendor/codemirror/v6.0.1/codemirror-emacs.js",emmet:"./vendor/codemirror/v6.0.1/codemirror-emmet.js",codeium:"./vendor/codemirror/v6.0.1/codemirror-codeium.js",lineNumbersRelative:"./vendor/codemirror/v6.0.1/codemirror-line-numbers-relative.js"},[g,T,k,w,q]=await Promise.all([a.editorMode==="vim"?import(u.vim):Promise.resolve({}),a.editorMode==="emacs"?import(u.emacs):Promise.resolve({}),a.emmet?import(u.emmet):Promise.resolve({}),a.enableAI?import(u.codeium):Promise.resolve({}),a.lineNumbers==="relative"?import(u.lineNumbersRelative):Promise.resolve({})]);X=g.vim,ee=T.emacs,te=k.emmet,oe=w.codeium,re=q.lineNumbersRelative};await Ce(o);let qe=new N,Be=new N,Ie=new N,Ne=new N,ne=D.editable.of(!1),De=new N,ho=new N,Re=new N,yo=An.define([{tag:Hn.comment,fontStyle:"italic"}]),Pe=a=>{let u=(a.fontSize??p.fontSize)||(c?12:14),g=m(a.fontFamily??p.fontFamily),T=a.tabSize??p.tabSize,k=a.useTabs??p.useTabs,w=a.wordWrap??p.wordWrap,q=a.emmet??p.emmet,O=a.lineNumbers??p.lineNumbers,le=a.enableAI??p.enableAI,W=a.editorMode??p.editorMode;return[ke.tabSize.of(T),vn.of(k?"	":" ".repeat(T)),...w?[D.lineWrapping]:[],...W==="vim"&&X?[X()]:W==="emacs"&&ee?[ee()]:[],...q&&te?[te]:[],...O==="relative"&&re?[re()]:O&&z?[z()]:[],...le&&oe?[oe(J,b)]:[],D.theme({"&":{height:"100%",fontSize:u+"px"},".cm-scroller":{overflow:"auto",fontFamily:g}})]},$e=()=>{let a=[qe.of(Y),Be.of(["typescript","javascript"].includes(j)&&C?Ae(C):[]),D.updateListener.of(go),Ne.of(L()),uo(yo),De.of(Pe({})),Ie.of(Se.of(F)),Re.of(p.closeBrackets?me():[]),vt,n?ne:[],Se.of(xe),ge(),Le],u=[ne,...a],g=[ne,...a],T=[...a];return l==="console"?T:l==="compiled"?g:o.mode==="codeblock"?u:a},Fe=async a=>{let u=tt(),g=T=>{u&&(u.textContent=T)};a||g(""),a==="vim"&&g("Vim"),a==="emacs"&&g("Emacs")},f=new D({state:ke.create({extensions:$e(),doc:o.value}),parent:s});Fe(o.editorMode);let xo=()=>l,se=()=>f.state.doc.toString(),ce=(a="",u=!0)=>{u?f.setState(ke.create({doc:a,extensions:$e()})):f.dispatch({changes:{from:0,to:f.state.doc.length,insert:a}})},Oe=()=>f.focus(),We=()=>H,bo=(a,u)=>{H=a,j=b(H),x(j).then(g=>{Y=g,f.dispatch({effects:[qe.reconfigure(Y)]})}),je.then(()=>{Ue(!0)}),u!=null&&ce(u)},Ve={editorId:l,getLanguage:We,getValue:se};J.push(Ve),Ue().then(()=>{He()});let To=a=>{Z.push(a)},ze={CtrlEnter:"Ctrl-Enter",ShiftEnter:"Shift-Enter",Enter:"Enter",UpArrow:"ArrowUp",DownArrow:"ArrowDown",ShiftAltF:"Shift-Alt-f"},ae=(a,u,g)=>{F.push({key:u,run(){return g(),!0}}),f.dispatch({effects:Ie.reconfigure(Se.of(F))})},Ge=a=>{a.code==="KeyM"&&rt(a)&&(a.preventDefault(),jn(),setTimeout(()=>{f.setTabFocusMode?.(Q)},70))};f.setTabFocusMode(Q),addEventListener("keydown",Ge);let ie,Eo=a=>{a&&(ie=a,ae("format",ze.ShiftAltF,async()=>{await Ke(),Oe()}))},Ke=async()=>{if(!ie)return;let a=f.state.selection.main.to,u=se(),g=await ie(u,a,i());ce(g.formatted,!1);let T=g.cursorOffset>=0?g.cursorOffset:0;f.dispatch({selection:{anchor:T}})};async function _e(a,u){let g=xt({editor:"codemirror",editorTheme:u,theme:a,editorThemes:Me.map(w=>w.name)}),T=g||S[a],k=Me.find(w=>w.name===T);if(!A[T]&&k?.url){let w=(await import(k.url))[k.exportName||"default"];A[T]=w}return T}let Je=(a,u)=>{_e(a,u).then(g=>{ve=g,f.dispatch({effects:Ne.reconfigure(L())})})},Lo=a=>{p={...a},Ce(p).then(()=>{f.dispatch({effects:[De.reconfigure(Pe(p)),ho.reconfigure(p.lineNumbers?z():[]),Re.reconfigure(p.closeBrackets?me():[])]}),Je(p.theme,p.editorTheme),Fe(p.editorMode)})},Mo=()=>{kn({state:f.state,dispatch:f.dispatch})},Qe=()=>{Sn({state:f.state,dispatch:f.dispatch})};return ae("redo","Mod-Shift-z",Qe),{getValue:se,setValue:ce,getLanguage:We,setLanguage:bo,getEditorId:xo,focus:Oe,getPosition:()=>{let a=f.state.selection.asSingle().ranges[0].from,u=f.state.doc.lineAt(a),g=u.number,T=a-u.from+1;return{lineNumber:g,column:T}},setPosition:({lineNumber:a,column:u=1})=>{let g=u-1,T=f.state.doc.lines>a?a:f.state.doc.lines,k=f.state.doc.line(T),w=k.length>g?g:k.length,q=k.from+w;f.dispatch({selection:{anchor:q},effects:[D.scrollIntoView(q,{x:"center",y:"center"})]})},addTypes:fo,onContentChanged:To,keyCodes:ze,addKeyBinding:ae,changeSettings:Lo,registerFormatter:Eo,format:Ke,isReadonly:n,setTheme:Je,undo:Mo,redo:Qe,destroy:()=>{Z.length=0,F.length=0,f.destroy(),s.innerHTML="",J.splice(J.indexOf(Ve),1),removeEventListener("keydown",Ge)},codemirror:f}};export{Ic as createEditor};
