var U='<div id="share-screen" class="modal-container"><div class="modal-title">Share</div><div class="modal-content"><div id="share-top-text" class="description light"><span id="share-permanent-url"><input id="share-permanent-url-checkbox" type="checkbox"><label for="share-permanent-url-checkbox">Permanent URL</label></span> <span id="share-click-to-copy"></span></div><input type="text" id="share-url-input" readonly><div id="share-expiry" class="share-expiry description light"><div class="share-short-url-expiry"><span>&nbsp;</span><a href="#">Get encoded URL</a></div><div class="share-encoded-url-expiry"><span class="{{warnClass}}">{{urlLength}} characters</span><a href="#">Get short URL</a></div></div><div id="share-expiry-self-hosted" class="share-expiry description light"><div class="share-short-url-expiry"><span class="danger">Expires in 1 year</span><a href="#">Get encoded URL</a></div><div class="share-encoded-url-expiry"><span class="{{warnClass}}">{{urlLength}} characters</span><a href="#">Get short URL</a></div></div><div id="share-links-container"><ul id="share-links"></ul><div id="qrcode-container" class="qrcode-container">Generating...</div></div></div></div>';var K=e=>e.replace(/{{APP_VERSION}}/g,"28").replace(/{{SDK_VERSION}}/g,"0.5.0").replace(/{{COMMIT_SHA}}/g,"4a64e17").replace(/{{REPO_URL}}/g,"https://github.com/live-codes/livecodes").replace(/{{DOCS_BASE_URL}}/g,"/livecodes/docs/");var j=K(U);var C=(e=location.origin)=>!!(e&&(e.endsWith("livecodes.io")||e.endsWith("livecodes.pages.dev")||e.endsWith("localpen.pages.dev")||e.startsWith("http://127.0.0.1")||e.startsWith("http://localhost")));var B=(e,o="_")=>e.replace(/[\W]+/g,o);var Q=e=>!e?.startsWith("http")&&!e?.startsWith("data:"),I=(e,o=document.baseURI)=>Q(e)?new URL(e,o).href:e;var A=e=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy")){let o=document.createElement("textarea");o.textContent=e,o.style.position="fixed",document.body.appendChild(o),o.select();try{return document.execCommand("copy")}catch(n){return console.warn("Copy to clipboard failed.",n),!1}finally{document.body.removeChild(o)}}return!1};var R=(e,o)=>new Promise((n,l)=>{if(o&&globalThis[o])return n(globalThis[o]);if(typeof globalThis.importScripts=="function")return globalThis.importScripts(e),o&&globalThis[o]?n(globalThis[o]):n(globalThis);let c=document.createElement("script");c.src=e,c.async=!0;let p=()=>{c.removeEventListener("load",i),c.removeEventListener("error",m)},i=()=>{if(p(),!o)return n("loaded: "+e);let u=setInterval(()=>{if(window[o])return clearInterval(u),n(window[o])},5)},m=()=>{p(),l("failed to load: "+e)};c.addEventListener("load",i),c.addEventListener("error",m),document.head.appendChild(c)});var D=["esm.sh","skypack","jspm"],P=["jsdelivr","fastly.jsdelivr","unpkg"],N=["jsdelivr.gh","fastly.jsdelivr.gh","statically"],h={getModuleUrl:(e,{isModule:o=!0,defaultCDN:n="esm.sh"}={})=>{e=e.replace(/#nobundle/g,"");let l=$(e,o,n);return l||(o?"https://esm.sh/"+e:"https://cdn.jsdelivr.net/npm/"+e)},getUrl:(e,o)=>e.startsWith("http")||e.startsWith("data:")?e:$(e,!1,o||Z())||e,cdnLists:{npm:P,module:D,gh:N},checkCDNs:async(e,o)=>{let n=[o,...h.cdnLists.npm].filter(Boolean);for(let l of n)try{if((await fetch(h.getUrl(e,l),{method:"HEAD"})).ok)return l}catch{}return h.cdnLists.npm[0]}},Z=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||h.cdnLists.npm[0]}catch{return h.cdnLists.npm[0]}},$=(e,o,n)=>{let l=o&&e.startsWith("unpkg:")?"?module":"";e.startsWith("gh:")?e=e.replace("gh",N[0]):e.includes(":")||(e=(n||(o?D[0]:P[0]))+":"+e);for(let c of X){let[p,i]=c;if(p.test(e))return e.replace(p,i)+l}return null},X=[[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(npm:)(.+)/i,"https://esm.sh/$2"],[/^(node:)(.+)/i,"https://esm.sh/$2"],[/^(jsr:)(.+)/i,"https://esm.sh/jsr/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(jsdelivr.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(fastly.jsdelivr.gh:)(.+)/i,"https://fastly.jsdelivr.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm.run:)(.+)/i,"https://esm.run/$2"],[/^(esm.sh:)(.+)/i,"https://esm.sh/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var{getUrl:W,getModuleUrl:le}=h;var Y="0.6.64",ae=W(`malinajs@${Y}/malina.js`);var O=W("easyqrcodejs@4.5.0/dist/easy.qrcode.min.js");var F=async({container:e,url:o,title:n,logo:l})=>{let c=await R(O,"QRCode");e.style.visibility="hidden";let p=new c(e,{text:o,logo:l,width:200,height:200,drawer:"canvas",onRenderingEnd:(i,m)=>{e.innerHTML="";let u=document.createElement("img");u.src=m,u.style.cursor="pointer",u.title="Click to download",u.onclick=()=>p.download(B(n||"LiveCodes","-")),e.appendChild(u),e.style.visibility="visible"}})};var v=()=>document.querySelector("#qrcode-container");var s=encodeURIComponent,Te=async(e,o,n)=>{let l,c=t=>{(!t||!A(t))&&T("Copy to clipboard failed!"),T("URL copied to clipboard"),l=setTimeout(()=>{T("Click to copy")},5e3)},p=async()=>{let t=v();if(y.style.visibility="hidden",t.style.display="flex",_){L?.classList.add("short-url"),d&&a&&(d.value=a.url);return}a||await q(),a&&await F({container:t,url:a.url,title:a.title,logo:o+"assets/images/livecodes-logo.svg"})},i=(t,r,M)=>{M&&(M.innerHTML="",r.forEach(x=>{let H=document.createElement("li"),f=document.createElement("a");f.href=x.createShareUrl?.(t)||"#",f.target="blank",f.rel="noopener noreferrer",f.innerHTML=`
        <span class="share-image-container">
          <img
            src="${I(o)+"assets/icons/"+x.icon}"
            alt="${x.name}"
            ${x.name==="\u{1D54F} / Twitter"?'class="twitter"':""}
          />
        </span>
        ${x.name}
      `,x.onClick&&n.addEventListener(f,"click",async J=>{J.preventDefault(),x.onClick?.(t)}),H.appendChild(f),M.appendChild(H),x.name==="Share via \u2026"&&!navigator.share&&H.remove()}),d&&(d.value=t.url),T("Click to copy"))},m=[{name:"Facebook",icon:"facebook.svg",createShareUrl:({url:t})=>`https://www.facebook.com/sharer.php?u=${s(t)}`},{name:"\u{1D54F} / Twitter",icon:"x.svg",createShareUrl:({url:t,title:r})=>`https://twitter.com/intent/tweet?url=${s(t)}&text=${s(r)}`},{name:"Hacker News",icon:"hacker-news.svg",createShareUrl:({url:t,title:r})=>`https://news.ycombinator.com/submitlink?u=${s(t)}&t=${s(r)}`},{name:"Reddit",icon:"reddit.svg",createShareUrl:({url:t,title:r})=>`https://www.reddit.com/submit?url=${s(t)}&title=${s(r)}`},{name:"LinkedIn",icon:"linkedin.svg",createShareUrl:({url:t,title:r})=>`https://www.linkedin.com/shareArticle?url=${s(t)}&title=${s(r)}&mini=true&source=LiveCodes`},{name:"Dev.to",icon:"dev.svg",createShareUrl:({url:t,title:r})=>`https://dev.to/new?prefill=${s(`---
title: `+r+`
published: true
tags: livecodes
---



`+t)}`},{name:"Tumblr",icon:"tumblr.svg",createShareUrl:({url:t,title:r})=>`
      https://www.tumblr.com/share/link?url=${s(t)}&name=${s(r)}`},{name:"Pinterest",icon:"pinterest.svg",createShareUrl:({url:t,title:r})=>`https://pinterest.com/pin/create/bookmarklet/?url=${s(t)}&description=${s(r)}`},{name:"WhatsApp",icon:"whatsapp.svg",createShareUrl:({url:t,title:r})=>`https://api.whatsapp.com/send?text=${s(r)} ${s(t)}`},{name:"Telegram",icon:"telegram.svg",createShareUrl:({url:t,title:r})=>`https://t.me/share/url?url=${s(t)}&text=${s(r)}`},{name:"Pocket",icon:"pocket.svg",createShareUrl:({url:t,title:r})=>`https://getpocket.com/save?url=${s(t)}&title=${s(r)}`},{name:"Email",icon:"email.svg",createShareUrl:({url:t,title:r})=>`mailto:?subject=${s(r)}&body=${s(t)}`},{name:"Copy URL",icon:"copy.svg",onClick:({url:t})=>c(t)},{name:"QR code",icon:"qr-code.svg",onClick:p},{name:"Share via \u2026",icon:"share.svg",onClick:({url:t,title:r})=>navigator.share({url:t,title:r})}],u=!C(),w=document.createElement("div"),S=await e(!1,!1),a,_,k=S.url.length;w.innerHTML=j.replace(/{{urlLength}}/g,String(k)).replace(/{{warnClass}}/g,k>2048?"danger":"warn");let g=w.firstChild;u?g.querySelector("#share-expiry").outerHTML="":g.querySelector("#share-expiry-self-hosted").outerHTML="";let y=g.querySelector("#share-links"),E=g.querySelector("#share-permanent-url-checkbox"),b=g.querySelector("#share-click-to-copy"),d=g.querySelector("#share-url-input"),L=g.querySelector(".share-expiry"),z=L?.querySelector(".share-encoded-url-expiry a"),G=L?.querySelector(".share-short-url-expiry a"),T=t=>{b&&(clearTimeout(l),b.innerHTML=t)};i(S,m,y);let q=async t=>{t?.preventDefault(),T("Generating URL \u2026");try{a=a||await e(!0,E.checked),i(a,m,y),L?.classList.add("short-url")}catch{T("Failed to generate short URL!")}};return n.addEventListener(z,"click",q),n.addEventListener(G,"click",t=>{t.preventDefault(),i(S,m,y),L?.classList.remove("short-url");let r=v();r.style.display="none",y.style.visibility="visible"}),n.addEventListener(E,"change",async()=>{S=await e(!1,E.checked),a&&(a=await e(!0,E.checked));let t=L?.classList.contains("short-url")?a:S;i(t,m,y)}),n.addEventListener(d,"click",function(){c(d?.value),d?.select()}),n.addEventListener(b,"click",function(){c(d?.value),d?.select()}),g};export{Te as createShareContainer};
