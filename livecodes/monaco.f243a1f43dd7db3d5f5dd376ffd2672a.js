var he=()=>{let e=navigator.userAgent.toLowerCase();return e.includes("firefox")||e.includes("fxios")};var fe=e=>(globalThis.structuredClone||(o=>JSON.parse(JSON.stringify(o,(n,r)=>r===void 0?null:r))))(e);var xe=()=>String(Math.random())+"-"+Date.now().toFixed();var ee=(e,o)=>new Promise((n,r)=>{if(o&&globalThis[o])return n(globalThis[o]);if(typeof globalThis.importScripts=="function")return globalThis.importScripts(e),o&&globalThis[o]?n(globalThis[o]):n(globalThis);let i=document.createElement("script");i.src=e,i.async=!0;let s=()=>{i.removeEventListener("load",a),i.removeEventListener("error",x)},a=()=>{if(s(),!o)return n("loaded: "+e);let g=setInterval(()=>{if(window[o])return clearInterval(g),n(window[o])},5)},x=()=>{s(),r("failed to load: "+e)};i.addEventListener("load",a),i.addEventListener("error",x),document.head.appendChild(i)});var ie=e=>e.replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,"$1");var be=["esm.sh","skypack","esm.run","jsdelivr.esm","fastly.jsdelivr.esm","gcore.jsdelivr.esm","testingcf.jsdelivr.esm","jsdelivr.b-cdn.esm","jspm"],Te=["jsdelivr","fastly.jsdelivr","unpkg","gcore.jsdelivr","testingcf.jsdelivr","jsdelivr.b-cdn","npmcdn"],Ee=["jsdelivr.gh","fastly.jsdelivr.gh","statically","gcore.jsdelivr.gh","testingcf.jsdelivr.gh","jsdelivr.b-cdn.gh"],U={getModuleUrl:(e,{isModule:o=!0,defaultCDN:n="esm.sh",external:r}={})=>{e=e.replace(/#nobundle/g,"");let i=a=>!r||!a.includes("https://esm.sh")?a:a.includes("?")?`${a}&external=${r}`:`${a}?external=${r}`,s=ye(e,o,n);return s?i(s):o?i("https://esm.sh/"+e):"https://cdn.jsdelivr.net/npm/"+e},getUrl:(e,o)=>e.startsWith("http")||e.startsWith("data:")?e:ye(e,!1,o||xt())||e,cdnLists:{npm:Te,module:be,gh:Ee},checkCDNs:async(e,o)=>{let n=[o,...U.cdnLists.npm].filter(Boolean);for(let r of n)try{if((await fetch(U.getUrl(e,r),{method:"HEAD"})).ok)return r}catch{}return U.cdnLists.npm[0]}},xt=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||U.cdnLists.npm[0]}catch{return U.cdnLists.npm[0]}},ye=(e,o,n)=>{let r=o&&e.startsWith("unpkg:")?"?module":"";e.startsWith("gh:")?e=e.replace("gh",Ee[0]):e.includes(":")||(e=(n||(o?be[0]:Te[0]))+":"+e);for(let i of yt){let[s,a]=i;if(s.test(e))return e.replace(s,a)+r}return null},yt=[[/^(esm\.sh:)(.+)/i,"https://esm.sh/$2"],[/^(npm:)(.+)/i,"https://esm.sh/$2"],[/^(node:)(.+)/i,"https://esm.sh/$2"],[/^(jsr:)(.+)/i,"https://esm.sh/jsr/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly\.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(gcore\.jsdelivr:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2"],[/^(testingcf\.jsdelivr:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2"],[/^(jsdelivr\.b-cdn:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2"],[/^(jsdelivr\.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(fastly\.jsdelivr\.gh:)(.+)/i,"https://fastly.jsdelivr.net/gh/$2"],[/^(gcore\.jsdelivr\.gh:)(.+)/i,"https://gcore.jsdelivr.net/gh/$2"],[/^(testingcf\.jsdelivr\.gh:)(.+)/i,"https://testingcf.jsdelivr.net/gh/$2"],[/^(jsdelivr\.b-cdn\.gh:)(.+)/i,"https://jsdelivr.b-cdn.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm\.run:)(.+)/i,"https://esm.run/$2"],[/^(jsdelivr\.esm:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2/+esm"],[/^(fastly\.jsdelivr\.esm:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2/+esm"],[/^(gcore\.jsdelivr\.esm:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2/+esm"],[/^(testingcf\.jsdelivr\.esm:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2/+esm"],[/^(jsdelivr\.b-cdn\.esm:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2/+esm"],[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle\.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(npmcdn:)(.+)/i,"https://npmcdn.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var{getUrl:A,getModuleUrl:At}=U,P=A("@live-codes/browser-compilers@0.21.1/dist/");var Me=A("@live-codes/monaco-codeium-provider@0.2.2/dist/index.js");var Le=A("emmet-monaco-es@5.5.0/dist/emmet-monaco.js");var Se=A("@live-codes/monaco-editor@0.3.0/"),we=A("monaco-emacs@0.3.0/dist/monaco-emacs.js"),l=A("monaco-themes@0.4.4/themes/"),ve=A("monaco-vim@0.4.1/dist/monaco-vim.js");var bt=/(import\s+?(?:(?:(?:[\w*\s{},\$]*)\s+from\s+?)|))((?:".*?")|(?:'.*?'))([\s]*?(?:;|$|))/g,Tt=/(import\s*?\(\s*?((?:".*?")|(?:'.*?'))\s*?\))/g,je=(e,o=!1)=>[...ie(e).matchAll(new RegExp(bt)),...ie(e).matchAll(new RegExp(Tt))].map(n=>n[2].replace(/"/g,"").replace(/'/g,"")).map(n=>!o||!Et(n)||!n.includes(":")?n:n.split(":")[1]);var Et=e=>!e.startsWith("https://")&&!e.startsWith("http://")&&!e.startsWith(".")&&!e.startsWith("/")&&!e.startsWith("data:")&&!e.startsWith("blob:");var ke=()=>document.querySelector("#editor-mode");var He=e=>{if(!e.startsWith("https://"))return e;let o=["https://esm.sh/","https://cdn.skypack.dev/","https://cdn.jsdelivr.net/npm/","https://fastly.jsdelivr.net/npm/","https://gcore.jsdelivr.net/npm/","https://testingcf.jsdelivr.net/npm/","https://jsdelivr.b-cdn.net/npm/","https://esm.run/","https://esbuild.vercel.app/","https://bundle.run/","https://unpkg.com/","https://npmcdn.com/","https://deno.bundlejs.com/?file&q=","https://jspm.dev/"];for(let n of o)if(e.startsWith(n))return e.replace(n,"");return e},Ce=e=>e.includes(":")&&!e.startsWith("data:")&&!e.startsWith("http")?e.split(":")[1]:e;var qe=e=>`https://ofcncog2cu-dsn.algolia.net/1/indexes/npm-search/${encodeURIComponent(e)}?x-algolia-agent=Browser`,Ue={"X-Algolia-Application-Id":"OFCNCOG2CU","X-Algolia-API-Key":"f54e21fa3a2a0160595bb058179bfb1e"},Ie=["name","description","homepage","repository.url","version"],ae="https://data.jsdelivr.com/v1",ce={...he()?{}:{"User-Agent":"https://livecodes.io"}},F=e=>{let o=e.startsWith("@"),n=o?e.slice(1):e,[r,i]=n.split("@");return[(o?"@":"")+r,i]},Mt=async(e,o=10)=>{let n={page:0,hitsPerPage:o,attributesToHighlight:[],attributesToRetrieve:Ie,analyticsTags:["jsdelivr"]},[r,i]=F(e),s;if(i){let g=await te(e);typeof g=="string"&&(s=F(g)[1])}let a=await fetch(qe("query"),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",...Ue},body:JSON.stringify({query:r,...n})}).then(g=>{if(!g.ok)throw new Error("failed to fetch");return g}).then(g=>g.json()).catch(g=>({error:!0,message:g.message||String(g)}));if("error"in a)return a;let x=a.hits.map(g=>(g.name===r&&s&&(g.version=s),g.repository?.url&&(g.repo=g.repository?.url),g));return x.sort((g,I)=>g.name===r?-1:I.name===r?1:0),x},te=async e=>{let o=`${ae}/package/resolve/npm/${e}`,n=await fetch(o,{headers:ce}).then(s=>{if(!s.ok)throw new Error("failed to fetch");return s}).then(s=>s.json()).catch(s=>({error:!0,message:s.message||String(s)}));if("error"in n)return n;let r=F(e)[0],i=n.version;return i?`${r}@${i}`:r},Lt=async e=>{let[o,n]=F(Ce(He(e))),r;if(n){let a=await te(e);typeof a=="string"&&(r=F(a)[1])}let i=qe(o)+"&attributesToRetrieve="+Ie.join(","),s=await fetch(i,{method:"GET",headers:Ue}).then(a=>{if(!a.ok)throw new Error("failed to fetch");return a}).then(a=>a.json()).catch(a=>({error:!0,message:a.message||String(a)}));return"error"in s||(r&&(s.version=r),s.repository?.url&&(s.repo=s.repository?.url)),s},St=async e=>{let o=await te(e),n=`${ae}/package/npm/${o}/flat`,r=await fetch(n,{headers:ce}).then(s=>{if(!s.ok)throw new Error("failed to fetch");return s}).then(s=>s.json()).catch(s=>({error:!0,message:s.message||String(s)}));if("error"in r)return r;let i=`https://cdn.jsdelivr.net/npm/${o}`;return{...r.default?{default:i+r.default}:{},files:r.files.map(s=>i+s.name)}},wt=async e=>{let o=await te(e),n=`${ae}/package/npm/${o}/entrypoints`,r=await fetch(n,{headers:ce}).then(s=>{if(!s.ok)throw new Error("failed to fetch");return s}).then(s=>s.json()).catch(s=>({error:!0,message:s.message||String(s)}));if("error"in r)return r;let i=`https://cdn.jsdelivr.net/npm/${o}`;return{...r.js?.file?{js:i+r.js?.file}:{},...r.css?.file?{css:i+r.css?.file}:{}}},Be={search:Mt,getPkgInfo:Lt,getPkgFiles:St,getPkgDefaultFiles:wt};var vt=e=>{let o=e.trim(),n,r;return e.includes(":")&&([n,o]=o.split(":"),n!=="monaco"&&n!=="codemirror"&&n!=="codejar"&&(n=void 0)),e.includes("@")&&([o,r]=o.split("@"),r!=="light"&&r!=="dark"&&(r=void 0)),{editor:n,editorTheme:o,theme:r}},Ae=({editor:e,editorTheme:o,theme:n,editorThemes:r})=>{if(!o)return null;let s=(typeof o=="string"?o.split(",").map(a=>a.trim()):o).map(vt);for(let a of s)if((a.editor===e||a.editor===void 0)&&(a.theme===n||a.theme===void 0)&&r.includes(a.editorTheme))return a.editorTheme;return null};var le=["jsx","tsx","react","react-tsx","sucrase","babel","flow","solid","solid.tsx","react-native","react-native-tsx"],Pe=e=>{let n=["javascript","jsx","react","flow","solid","react-native"].includes(e),r=le.includes(e),i=["solid","solid.tsx","stencil"].includes(e),s={allowJs:!0,checkJs:!n,strictNullChecks:!n,allowNonTsExtensions:!0,experimentalDecorators:!0,emitDecoratorMetadata:!0,allowSyntheticDefaultImports:!0,allowUmdGlobalAccess:!0,esModuleInterop:!0,target:7,module:99,moduleResolution:2},a={jsx:4},x={jsx:1,jsxFactory:"h",...["solid","solid.tsx"].includes(e)?{jsxImportSource:"solid-js",jsxFactory:"JSX"}:{},jsxFragmentFactory:"Fragment"};return{...s,...r?a:{},...i?x:{}}};var pe=[{name:"active4d",title:"Active4D",url:l+"Active4D.json"},{name:"all-hallows-eve",title:"All Hallows Eve",url:l+"All Hallows Eve.json"},{name:"amy",title:"Amy",url:l+"Amy.json"},{name:"birds-of-paradise",title:"Birds of Paradise",url:l+"Birds of Paradise.json"},{name:"blackboard",title:"Blackboard",url:l+"Blackboard.json"},{name:"brilliance-black",title:"Brilliance Black",url:l+"Brilliance Black.json"},{name:"brilliance-dull",title:"Brilliance Dull",url:l+"Brilliance Dull.json"},{name:"catppuccin-latte",title:"Catppuccin Latte",url:P+"catppuccin/monaco/latte.json"},{name:"catppuccin-frappe",title:"Catppuccin Frappe",url:P+"catppuccin/monaco/frappe.json"},{name:"catppuccin-macchiato",title:"Catppuccin Macchiato",url:P+"catppuccin/monaco/macchiato.json"},{name:"catppuccin-mocha",title:"Catppuccin Mocha",url:P+"catppuccin/monaco/mocha.json"},{name:"chrome-devtools",title:"Chrome DevTools",url:l+"Chrome DevTools.json"},{name:"clouds-midnight",title:"Clouds Midnight",url:l+"Clouds Midnight.json"},{name:"clouds",title:"Clouds",url:l+"Clouds.json"},{name:"cobalt",title:"Cobalt",url:l+"Cobalt.json"},{name:"cobalt2",title:"Cobalt2",url:l+"Cobalt2.json"},{name:"dawn",title:"Dawn",url:l+"Dawn.json"},{name:"dracula",title:"Dracula",url:l+"Dracula.json"},{name:"dreamweaver",title:"Dreamweaver",url:l+"Dreamweaver.json"},{name:"eiffel",title:"Eiffel",url:l+"Eiffel.json"},{name:"espresso-libre",title:"Espresso Libre",url:l+"Espresso Libre.json"},{name:"github",title:"GitHub",url:l+"GitHub.json"},{name:"github-dark",title:"GitHub Dark",url:l+"GitHub Dark.json"},{name:"github-light",title:"GitHub Light",url:l+"GitHub Light.json"},{name:"hc-black",title:"High Contrast (Black)"},{name:"hc-light",title:"High Contrast (Light)"},{name:"idle",title:"Idle",url:l+"IDLE.json"},{name:"idlefingers",title:"Idle Fingers",url:l+"idleFingers.json"},{name:"iplastic",title:"iPlastic",url:l+"iPlastic.json"},{name:"katzenmilch",title:"Katzenmilch",url:l+"Katzenmilch.json"},{name:"krtheme",title:"krTheme",url:l+"krTheme.json"},{name:"kuroir",title:"Kuroir Theme",url:l+"Kuroir Theme.json"},{name:"lazy",title:"Lazy",url:l+"LAZY.json"},{name:"magicwb-amiga",title:"MagicWB (Amiga)",url:l+"MagicWB (Amiga).json"},{name:"merbivore-soft",title:"Merbivore Soft",url:l+"Merbivore Soft.json"},{name:"merbivore",title:"Merbivore",url:l+"Merbivore.json"},{name:"monochrome",title:"Monochrome"},{name:"monochrome-dark",title:"Monochrome Dark"},{name:"monoindustrial",title:"monoindustrial",url:l+"monoindustrial.json"},{name:"monokai",title:"Monokai",url:l+"Monokai.json"},{name:"monokai-bright",title:"Monokai Bright",url:l+"Monokai Bright.json"},{name:"night-owl",title:"Night Owl",url:l+"Night Owl.json"},{name:"nord",title:"Nord",url:l+"Nord.json"},{name:"oceanic-next",title:"Oceanic Next",url:l+"Oceanic Next.json"},{name:"pastels-on-dark",title:"Pastels on Dark",url:l+"Pastels on Dark.json"},{name:"slush-and-poppies",title:"Slush and Poppies",url:l+"Slush and Poppies.json"},{name:"solarized-dark",title:"Solarized Dark",url:l+"Solarized-dark.json"},{name:"solarized-light",title:"Solarized Light",url:l+"Solarized-light.json"},{name:"spacecadet",title:"SpaceCadet",url:l+"SpaceCadet.json"},{name:"sunburst",title:"Sunburst",url:l+"Sunburst.json"},{name:"textmate-mac-classic",title:"Textmate (Mac Classic)",url:l+"Textmate (Mac Classic).json"},{name:"tomorrow",title:"Tomorrow",url:l+"Tomorrow.json"},{name:"tomorrow-night",title:"Tomorrow Night",url:l+"Tomorrow-Night.json"},{name:"tomorrow-night-blue",title:"Tomorrow Night Blue",url:l+"Tomorrow-Night-Blue.json"},{name:"tomorrow-night-bright",title:"Tomorrow Night Bright",url:l+"Tomorrow-Night-Bright.json"},{name:"tomorrow-night-eighties",title:"Tomorrow Night Eighties",url:l+"Tomorrow-Night-Eighties.json"},{name:"twilight",title:"Twilight",url:l+"Twilight.json"},{name:"upstream-sunburst",title:"Upstream Sunburst",url:l+"Upstream Sunburst.json"},{name:"vibrant-ink",title:"Vibrant Ink",url:l+"Vibrant Ink.json"},{name:"vs",title:"VS"},{name:"vs-dark",title:"VS Dark"},{name:"xcode-default",title:"Xcode Default",url:l+"Xcode_default.json"},{name:"zenburnesque",title:"Zenburnesque",url:l+"Zenburnesque.json"}],De=[{name:"custom-vs-light",theme:{base:"vs",inherit:!0,rules:[{token:"comment",fontStyle:"italic"}],colors:{}}},{name:"custom-vs-dark",theme:{base:"vs-dark",inherit:!0,rules:[{token:"comment",fontStyle:"italic"}],colors:{}}},{name:"monochrome",theme:{base:"vs",inherit:!1,rules:[],colors:{"editor.foreground":"#24292e","editorBracketHighlight.foreground1":"#24292e","editorBracketHighlight.foreground2":"#24292e","editorBracketHighlight.foreground3":"#24292e","editorBracketHighlight.foreground4":"#24292e","editorBracketHighlight.unexpectedBracket.foreground":"#24292e"}}},{name:"monochrome-dark",theme:{base:"vs-dark",inherit:!1,rules:[],colors:{"editor.foreground":"#e2e2e3","editor.background":"#24292e","editorBracketHighlight.foreground1":"#e2e2e3","editorBracketHighlight.foreground2":"#e2e2e3","editorBracketHighlight.foreground3":"#e2e2e3","editorBracketHighlight.foreground4":"#e2e2e3","editorBracketHighlight.unexpectedBracket.foreground":"#e2e2e3"}}}];var jt=/^\/\/\s?@(\w+)$/,kt=/^\/\/\s?@(\w+):\s?(.+)$/,Ne=e=>{let o=new Map;if(e)for(let n of e)o.set(n.name.toLowerCase(),n);return n=>{let r=n.split(`
`),i={};return r.forEach(s=>{let a,x=s.trim();(a=jt.exec(x))?o.has(a[1].toLowerCase())&&(i[a[1]]=!0,Re(a[1],"true",i,o)):(a=kt.exec(x))&&o.has(a[1].toLowerCase())&&Re(a[1],a[2],i,o)}),i}};function Re(e,o,n,r){let i=r.get(e.toLowerCase());if(i)switch(i.type){case"number":case"string":case"boolean":n[i.name]=Oe(o,i.type);break;case"list":let s=i.element.type,a=o.split(",");typeof s=="string"?n[i.name]=a.map(g=>Oe(g,s)):n[i.name]=a.map(g=>$e(i.name,g,s)).filter(Boolean);break;default:let x=i.type;n[i.name]=$e(i.name,o,x)}}function Oe(e,o){switch(o){case"number":return+e;case"string":return e;case"boolean":return e.toLowerCase()==="true"||e.length===0}}function $e(e,o,n){return n.get(o.toLowerCase())}var We=e=>(o,n,r)=>{let i=[],s=o.getValueInRange({startLineNumber:n.lineNumber,startColumn:0,endLineNumber:n.lineNumber,endColumn:n.column});if(!s.startsWith("//"))return{suggestions:[]};let a=s.replace("	","").split(" ");if(a.length!==2)return{suggestions:[]};let x=a[1];if(x.startsWith("-"))return{suggestions:[{label:"---cut---",kind:14,detail:"Twoslash split output",insertText:"---cut---".replace(x,"")}]};if(!x.startsWith("@"))return{suggestions:[]};let g=["noErrors","errors","showEmit","showEmittedFile","noStaticSemanticInfo","emit","noErrorValidation","filename"],I=(e||[]).map(j=>j.name);return g.concat(I).forEach(j=>{j.startsWith(x.slice(1))&&i.push({label:j,kind:14,detail:"Twoslash comment",insertText:j})}),{suggestions:i}};var oe,Fe=async({isJSLang:e,editor:o,monaco:n,compilerOptions:r})=>{let i=e?"javascript":"typescript",s=e?n.languages.typescript.getJavaScriptWorker:n.languages.typescript.getTypeScriptWorker,a=e?n.languages.typescript.javascriptDefaults:n.languages.typescript.typescriptDefaults,x=o.getModel();oe=oe||await window.compiler.typescriptFeatures({feature:"getOptionDeclarations"}),window.isTwoslashCompletionsRegistered||(["javascript","typescript"].forEach(b=>{n.languages.registerCompletionItemProvider(b,{triggerCharacters:["@","/","-"],provideCompletionItems:We(oe)})}),window.isTwoslashCompletionsRegistered=!0);let g=T=>{let b=Object.keys(T);b.length&&(b.forEach(S=>{r[S]===T[S]&&delete T[S]}),Object.keys(T).length&&(r={...r,...T},a.setCompilerOptions(r)))},I=Ne(oe),j=()=>{let T=o.getModel()?.getValue();if(!T)return;let b=I(T);g(b)};j();let ne=async()=>x?(await s())(x.uri):void 0,y=()=>({provideInlayHints:async(b,S,z)=>{let J=b.getValue(),B=/^\s*\/\/\s*\^\?$/gm,C,K=[],G=await ne();if(!G||b.isDisposed())return{hints:[],dispose:()=>{}};for(;(C=B.exec(J))!==null;){if(z.isCancellationRequested||b.isDisposed())return{hints:[],dispose:()=>{}};let Z=C.index+C[0].length-1,D=b.getPositionAt(Z),E=new n.Position(D.lineNumber-1,D.column),X=b.getOffsetAt(E),v=await G.getQuickInfoAtPosition("file://"+b.uri.path,X);if(!v||!v.displayParts)continue;let R=v.displayParts.map(re=>re.text).join("").replace(/\\n/g,"").replace(/  /g,"");R.length>120&&(R=R.slice(0,119)+"...");let $={kind:0,position:new n.Position(D.lineNumber,D.column+1),label:R,paddingLeft:!0};K.push($)}return{hints:K,dispose:()=>{}}}});window.inlayHintRegistered=window.inlayHintRegistered||new Set,window.inlayHintRegistered.has(i)||(n.languages.registerInlayHintsProvider(i,y()),window.inlayHintRegistered.add(i),o.getModel()?.onDidChangeContent(j))};var _e=!1,H={},m,Ve=new Set,_,O=[],V,To=async e=>{let{container:o,baseUrl:n,readonly:r,theme:i,editorTheme:s,isEmbed:a,getLanguageExtension:x,mapLanguage:g,getFormatterConfig:I,getFontFamily:j}=e;if(!o)throw new Error("editor container not found");let ne=()=>import(Se+"monaco.js"),y,T=t=>({fontFamily:j(t.fontFamily),fontSize:t.fontSize||(a?12:14),insertSpaces:!t.useTabs,detectIndentation:!1,tabSize:t.tabSize,lineNumbers:t.lineNumbers==="relative"?"relative":t.lineNumbers?"on":"off",wordWrap:t.wordWrap?"on":"off",autoClosingBrackets:t.closeBrackets?"always":"never",autoClosingQuotes:t.closeBrackets?"always":"never",autoClosingDelete:t.closeBrackets?"always":"never"}),b=T(e),S=t=>t==="livescript"?"coffeescript":["rescript","reason","ocaml"].includes(t)?"csharp":g(t);try{window.monaco=window.monaco||(await ne()).monaco,m=window.monaco}catch{throw new Error("Failed to load monaco editor")}De.forEach(t=>m.editor.defineTheme(t.name,t.theme));let z=async(t,c)=>{let p=Ae({editor:"monaco",editorTheme:c,theme:t,editorThemes:pe.map(u=>u.name)}),f=p==="vs"?"custom-vs-light":p==="vs-dark"?"custom-vs-dark":p||"custom-vs-"+t;if(Ve.has(f))return f;let h=pe.find(u=>u.name===f);return h?.url&&await fetch(h.url).then(u=>u.json()).then(u=>{m.editor.defineTheme(f,u),Ve.add(f)}),f},J=(t,c)=>{z(t,c).then(p=>{m.editor.setTheme(p)})},B=navigator&&/android/i.test(navigator.userAgent),C={theme:await z(i,s),fontLigatures:!0,formatOnType:!1,lineNumbersMinChars:3,minimap:{enabled:!1},scrollbar:{useShadows:!1},mouseWheelZoom:!0,automaticLayout:!0,readOnly:r,fixedOverflowWidgets:!0,lightbulb:{enabled:"on"},quickSuggestions:{other:!B,comments:!B,strings:!B},acceptSuggestionOnCommitCharacter:!B,acceptSuggestionOnEnter:B?"off":"on",inlayHints:{enabled:"on"}},K={...C,scrollBeyondLastLine:!1,contextmenu:!1},G={...C,scrollBeyondLastLine:!1},Z={...C,glyphMargin:!0,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,scrollbar:{vertical:"auto"},scrollBeyondLastLine:!1,contextmenu:!1},D={...Z},E=e.editorId,X=E==="console"?Z:E==="compiled"?G:E==="embed"?D:e.mode==="codeblock"?K:C,v=fe({...b,...X}),R=()=>{let c=["javascript","jsx","react","flow","solid","react-native"].includes(M);if(!["script","tests","editorSettings"].includes(E)||!["javascript","typescript"].includes(S(M)))return;let p=Pe(M);m.languages.typescript.typescriptDefaults.setCompilerOptions(p),m.languages.typescript.javascriptDefaults.setCompilerOptions(p);let f={noSemanticValidation:M==="flow",diagnosticCodesToIgnore:[2354]};m.languages.typescript.typescriptDefaults.setDiagnosticsOptions(f),m.languages.typescript.javascriptDefaults.setDiagnosticsOptions(f),Fe({isJSLang:c,editor:d,monaco:m,compilerOptions:p})},$=[],re=()=>{$.forEach(t=>d.getModel()?.onDidChangeContent(t))},me="",ue=(t,c,p)=>{let f=xe(),h=x(p),u=S(p)==="typescript"&&!h?.endsWith("ts")&&!h?.endsWith("tsx")?h+".tsx":h;me=`file:///${E}.${f}.${u}`;let w=t.getModel(),L=m.editor.createModel(c||"",S(p),m.Uri.parse(me));t.setModel(L),setTimeout(()=>w?.dispose(),1e3),re(),R()},M=e.language,d=m.editor.create(o,{...v,language:S(M)});ue(d,e.value,M),["markup","style","script","tests"].includes(E)&&O.push(d),v.theme==="vs-light"&&(o.style.backgroundColor="#fff"),(v.theme?.startsWith("http")||v.theme?.startsWith("./"))&&fetch(v.theme).then(t=>t.json()).then(t=>{m.editor.defineTheme("theme",t),m.editor.setTheme("theme"),o.style.backgroundColor=t.colors["editor.background"]});let ze={astro:n+"monaco-lang-astro.f30e7d04fcebf9df1d1428cecdca96a0.js",clio:n+"monaco-lang-clio.ee3a53f8e10786f6ab567382a5cdde30.js",imba:n+"monaco-lang-imba.ea949da9285ec36b5d1be2adfa54307a.js",wat:n+"monaco-lang-wat.5cbc6437814cc38898ad90fdc5566503.js"},Je=async t=>{let c=ze[t];if(c&&!m.languages.getLanguages().find(p=>p.id===t)){let p=(await import(c)).default;m.languages.register({id:t}),p.config&&m.languages.setLanguageConfiguration(t,p.config),p.tokens&&m.languages.setMonarchTokensProvider(t,p.tokens)}},Ke=()=>E,Ge=()=>d.getValue(),Ze=(t="")=>{d.getModel()?.setValue(t)},N=[],Q=t=>!t.filename.startsWith("/node_modules/"),Xe=(t,c)=>{let p=t.content,f="file://"+t.filename,h=N.find(u=>u.filename===t.filename);if(h){if(Q(t)&&(h.libJs.dispose(),h.libJs=m.languages.typescript.javascriptDefaults.addExtraLib(p,f)),!c)return;h.libJs?.dispose(),h.libTs?.dispose()}N.push({editorId:E,filename:t.filename,libJs:m.languages.typescript.javascriptDefaults.addExtraLib(p,f),libTs:Q(t)?{dispose:()=>{}}:m.languages.typescript.typescriptDefaults.addExtraLib(p,f)})},Y;(()=>{if(E!=="tests")return;let t="javascript",c=O.find(h=>{let u=h.getModel()?.getLanguageId();return t=u||"javascript",["javascript","typescript"].includes(u)});if(!c)return;let p=t==="typescript"?"tsx":"jsx",f=()=>{Y=m.editor.createModel(c.getValue(),t,m.Uri.parse("script."+p))};Y?(Y.dispose(),setTimeout(()=>{f()},300)):f()})();let de=(t=!0)=>{Y?.dispose(),E!=="tests"&&(N.filter(c=>c.editorId===E).filter(c=>t?!0:Q(c)).forEach(c=>{c.libJs.dispose(),c.libTs.dispose()}),N=N.filter(c=>c.editorId!==E).filter(c=>t?!1:!Q(c)))},Qe=()=>M,Ye=(t,c)=>{M=t,de(!1),ue(d,c??d.getValue(),M),Je(t)},et=()=>d.focus(),tt=()=>d.layout(),ot=t=>{$.push(t),d.getModel()?.onDidChangeContent(t)},nt={CtrlEnter:m.KeyMod.CtrlCmd|m.KeyCode.Enter,ShiftEnter:m.KeyMod.Shift|m.KeyCode.Enter,Enter:m.KeyCode.Enter,UpArrow:m.KeyCode.UpArrow,DownArrow:m.KeyCode.DownArrow,ShiftAltF:m.KeyMod.Shift|m.KeyMod.Alt|m.KeyCode.KeyF},rt=(t,c,p)=>{d.addAction({id:t,label:t,keybindings:[c],precondition:"!suggestWidgetVisible && !markersNavigationVisible && !findWidgetVisible",run:p})},ge=async t=>{let c=ke(),p=document.querySelector(`#editor-status [data-status="${e.editorId}"]`),f=u=>{c&&(c.textContent=u)},h=u=>{p&&(p.textContent=u)};if(!t){y?.dispose(),y=void 0,h(""),f("");return}if(t==="vim"){if(y?.mode==="vim")return;y?.mode==="emacs"&&(y.dispose(),h(""));let u=await ee(ve,"MonacoVim"),w=p?.innerHTML!==""?void 0:p;y=u.initVimMode(d,w),y.mode="vim",f("Vim")}if(t==="emacs"){if(y?.mode==="emacs")return;y?.mode==="vim"&&(y.dispose(),h(""));let u=await ee(we,"MonacoEmacs");y=new u.EmacsExtension(d),h(""),y.onDidMarkChange(function(w){h(w?"Mark Set!":"Mark Unset")}),y.onDidChangeKey(function(w){h(w)}),y.start(),y.mode="emacs",f("Emacs")}};ge(e.editorMode);let st=t=>{let c=d.getModel();!t||!c||m.languages.registerDocumentFormattingEditProvider(S(M),{provideDocumentFormattingEdits:async()=>{let p=d;if(d.getModel()||(p=O.find(u=>u.getModel()?.getLanguageId()===S(M))||d),c=p.getModel(),!c)return[];let f=p.getValue()||"",h=await t(f,0,I());return[{range:c.getFullModelRange(),text:h.formatted}]}})},it=async()=>d.getAction("editor.action.formatDocument")?.run(),at=t=>{!t&&!window.emmetMonaco||ee(Le,"emmetMonaco").then(c=>{t?(!H.html||H.disabled)&&(H.html=c.emmetHTML(m,["html","php","astro","markdown","mdx"]),H.css=c.emmetCSS(m,["css","scss","less"]),H.jsx=c.emmetJSX(m,["javascript","typescript","jsx","tsx"]),H.disabled=!1):(H.html?.(),H.css?.(),H.jsx?.(),H.disabled=!0)})},ct=t=>{if(!t){V?.dispose(),V=void 0;return}V||(V=!0,import(P+"tailwindcss/monaco-tailwindcss.js").then(({configureMonacoTailwindcss:c,tailwindcssData:p})=>{m.languages.css.cssDefaults.setOptions({data:{dataProviders:{tailwindcssData:p}}}),V=c(m)}))},lt=t=>{v={...T(t),...X},at(t.emmet),ge(t.editorMode),d.updateOptions(v),J(t.theme,t.editorTheme),gt(t.enableAI)},pt=()=>{d.getModel()?.undo?.()},mt=()=>{d.getModel()?.redo?.()},ut=()=>{let t=d.getPosition();return{lineNumber:t?.lineNumber??1,column:t?.column??1}},dt=t=>{let c={lineNumber:t.lineNumber,column:t.column??1};d.setPosition(c),setTimeout(()=>d.revealPositionInCenter(c,0),50)},gt=t=>{if(!t){_?.dispose(),_=void 0;return}_||(_={dispose:()=>"loading..."},import(Me).then(c=>{_=c.registerCodeiumProvider(m,{getEditors:()=>O})}))},ht=()=>{O=O.filter(t=>t!==d),y?.dispose(),$.length=0,de(!0),d.getModel()?.dispose(),d.dispose(),o.innerHTML=""};window.addEventListener("unhandledrejection",function(t){t.reason&&t.reason.name==="Canceled"&&t.preventDefault()});let ft=t=>{let c=["html","markdown","javascript","typescript"],p=d.getModel();if(!p||!c.includes(S(M))||S(M)==="typescript"&&!le.includes(M)||v.autoClosingBrackets==="never")return;let f=h=>["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","circle","ellipse","line","path","polygon","polyline","rect","stop","use"].includes(h);if(t.browserEvent.key===">"){let h=d.getSelections()||[],u=[],w=[];for(let L of h){w.push(new m.Selection(L.selectionStartLineNumber,L.selectionStartColumn+1,L.endLineNumber,L.endColumn+1));let k=p.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:L.endLineNumber,endColumn:L.endColumn}).match(/<([\w-]+)(?![^>]*\/>)[^>]*$/);if(!k)continue;let[se,W]=k;f(W)||se.trim().endsWith("/")||u.push({range:{startLineNumber:L.endLineNumber,startColumn:L.endColumn+1,endLineNumber:L.endLineNumber,endColumn:L.endColumn+1},text:`</${W}>`})}setTimeout(()=>{d.executeEdits(p.getValue(),u,w)},0)}};return d.onKeyDown(ft),_e||(()=>{let t=new Map,c={provideHover(p,f){let h=p.getLineContent(f.lineNumber),u=je(h,!0)[0];if(!u||u.startsWith("https://")||u.startsWith("http://")||u.startsWith(".")||u.startsWith("data:")||u.startsWith("blob:"))return;let w=u.split("/"),L=w[0].startsWith("@")?2:1;return u=w.slice(0,L).join("/"),(async()=>{let q;if(t.has(u))q=t.get(u);else{if(q=await Be.getPkgInfo(u),"error"in q)return;t.set(u,q)}if(!q||"error"in q)return;let{name:k,description:se="",repo:W=""}=q;return{contents:[{value:`## [${k}](https://www.npmjs.com/package/${k})
${se}


${W?`[GitHub](${W}) |`:""} [Skypack](https://skypack.dev/view/${k}) | [jsDelivr](https://www.jsdelivr.com/package/npm/${k}) | [Unpkg](https://unpkg.com/browse/${k}/) | [Snyk](https://snyk.io/advisor/npm-package/${k}) | [Bundlephobia](https://bundlephobia.com/package/${k})

Docs: [Importing modules](${new URL("/livecodes/docs/",location.href).href}features/module-resolution)`}]}})()}};m.languages.registerHoverProvider("javascript",c),m.languages.registerHoverProvider("typescript",c),m.languages.registerHoverProvider("html",c)})(),_e=!0,{getValue:Ge,setValue:Ze,getLanguage:Qe,setLanguage:Ye,getEditorId:Ke,focus:et,getPosition:ut,setPosition:dt,layout:tt,addTypes:Xe,changeSettings:lt,configureTailwindcss:ct,onContentChanged:ot,keyCodes:nt,addKeyBinding:rt,registerFormatter:st,format:it,isReadonly:r,setTheme:J,undo:pt,redo:mt,destroy:ht,monaco:d}};export{To as createEditor};
