var F=Object.create;var E=Object.defineProperty;var z=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var H=Object.getPrototypeOf,J=Object.prototype.hasOwnProperty;var V=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports);var Z=(e,i,f,d)=>{if(i&&typeof i=="object"||typeof i=="function")for(let g of K(i))!J.call(e,g)&&g!==f&&E(e,g,{get:()=>i[g],enumerable:!(d=z(i,g))||d.enumerable});return e};var G=(e,i,f)=>(f=e!=null?F(H(e)):{},Z(i||!e||!e.__esModule?E(f,"default",{value:e,enumerable:!0}):f,e));var W=V(($e,C)=>{var Y=function(){var e=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",d={};function g(t,n){if(!d[t]){d[t]={};for(var a=0;a<t.length;a++)d[t][t.charAt(a)]=a}return d[t][n]}var m={compressToBase64:function(t){if(t==null)return"";var n=m._compress(t,6,function(a){return i.charAt(a)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return t==null?"":t==""?null:m._decompress(t.length,32,function(n){return g(i,t.charAt(n))})},compressToUTF16:function(t){return t==null?"":m._compress(t,15,function(n){return e(n+32)})+" "},decompressFromUTF16:function(t){return t==null?"":t==""?null:m._decompress(t.length,16384,function(n){return t.charCodeAt(n)-32})},compressToUint8Array:function(t){for(var n=m.compress(t),a=new Uint8Array(n.length*2),o=0,l=n.length;o<l;o++){var y=n.charCodeAt(o);a[o*2]=y>>>8,a[o*2+1]=y%256}return a},decompressFromUint8Array:function(t){if(t==null)return m.decompress(t);for(var n=new Array(t.length/2),a=0,o=n.length;a<o;a++)n[a]=t[a*2]*256+t[a*2+1];var l=[];return n.forEach(function(y){l.push(e(y))}),m.decompress(l.join(""))},compressToEncodedURIComponent:function(t){return t==null?"":m._compress(t,6,function(n){return f.charAt(n)})},decompressFromEncodedURIComponent:function(t){return t==null?"":t==""?null:(t=t.replace(/ /g,"+"),m._decompress(t.length,32,function(n){return g(f,t.charAt(n))}))},compress:function(t){return m._compress(t,16,function(n){return e(n)})},_compress:function(t,n,a){if(t==null)return"";var o,l,y={},v={},w="",j="",h="",x=2,S=3,p=2,u=[],s=0,r=0,b;for(b=0;b<t.length;b+=1)if(w=t.charAt(b),Object.prototype.hasOwnProperty.call(y,w)||(y[w]=S++,v[w]=!0),j=h+w,Object.prototype.hasOwnProperty.call(y,j))h=j;else{if(Object.prototype.hasOwnProperty.call(v,h)){if(h.charCodeAt(0)<256){for(o=0;o<p;o++)s=s<<1,r==n-1?(r=0,u.push(a(s)),s=0):r++;for(l=h.charCodeAt(0),o=0;o<8;o++)s=s<<1|l&1,r==n-1?(r=0,u.push(a(s)),s=0):r++,l=l>>1}else{for(l=1,o=0;o<p;o++)s=s<<1|l,r==n-1?(r=0,u.push(a(s)),s=0):r++,l=0;for(l=h.charCodeAt(0),o=0;o<16;o++)s=s<<1|l&1,r==n-1?(r=0,u.push(a(s)),s=0):r++,l=l>>1}x--,x==0&&(x=Math.pow(2,p),p++),delete v[h]}else for(l=y[h],o=0;o<p;o++)s=s<<1|l&1,r==n-1?(r=0,u.push(a(s)),s=0):r++,l=l>>1;x--,x==0&&(x=Math.pow(2,p),p++),y[j]=S++,h=String(w)}if(h!==""){if(Object.prototype.hasOwnProperty.call(v,h)){if(h.charCodeAt(0)<256){for(o=0;o<p;o++)s=s<<1,r==n-1?(r=0,u.push(a(s)),s=0):r++;for(l=h.charCodeAt(0),o=0;o<8;o++)s=s<<1|l&1,r==n-1?(r=0,u.push(a(s)),s=0):r++,l=l>>1}else{for(l=1,o=0;o<p;o++)s=s<<1|l,r==n-1?(r=0,u.push(a(s)),s=0):r++,l=0;for(l=h.charCodeAt(0),o=0;o<16;o++)s=s<<1|l&1,r==n-1?(r=0,u.push(a(s)),s=0):r++,l=l>>1}x--,x==0&&(x=Math.pow(2,p),p++),delete v[h]}else for(l=y[h],o=0;o<p;o++)s=s<<1|l&1,r==n-1?(r=0,u.push(a(s)),s=0):r++,l=l>>1;x--,x==0&&(x=Math.pow(2,p),p++)}for(l=2,o=0;o<p;o++)s=s<<1|l&1,r==n-1?(r=0,u.push(a(s)),s=0):r++,l=l>>1;for(;;)if(s=s<<1,r==n-1){u.push(a(s));break}else r++;return u.join("")},decompress:function(t){return t==null?"":t==""?null:m._decompress(t.length,32768,function(n){return t.charCodeAt(n)})},_decompress:function(t,n,a){var o=[],l,y=4,v=4,w=3,j="",h=[],x,S,p,u,s,r,b,c={val:a(0),position:n,index:1};for(x=0;x<3;x+=1)o[x]=x;for(p=0,s=Math.pow(2,2),r=1;r!=s;)u=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=a(c.index++)),p|=(u>0?1:0)*r,r<<=1;switch(l=p){case 0:for(p=0,s=Math.pow(2,8),r=1;r!=s;)u=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=a(c.index++)),p|=(u>0?1:0)*r,r<<=1;b=e(p);break;case 1:for(p=0,s=Math.pow(2,16),r=1;r!=s;)u=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=a(c.index++)),p|=(u>0?1:0)*r,r<<=1;b=e(p);break;case 2:return""}for(o[3]=b,S=b,h.push(b);;){if(c.index>t)return"";for(p=0,s=Math.pow(2,w),r=1;r!=s;)u=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=a(c.index++)),p|=(u>0?1:0)*r,r<<=1;switch(b=p){case 0:for(p=0,s=Math.pow(2,8),r=1;r!=s;)u=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=a(c.index++)),p|=(u>0?1:0)*r,r<<=1;o[v++]=e(p),b=v-1,y--;break;case 1:for(p=0,s=Math.pow(2,16),r=1;r!=s;)u=c.val&c.position,c.position>>=1,c.position==0&&(c.position=n,c.val=a(c.index++)),p|=(u>0?1:0)*r,r<<=1;o[v++]=e(p),b=v-1,y--;break;case 2:return h.join("")}if(y==0&&(y=Math.pow(2,w),w++),o[b])j=o[b];else if(b===v)j=S+S.charAt(0);else return null;h.push(j),o[v++]=S+j.charAt(0),y--,S=j,y==0&&(y=Math.pow(2,w),w++)}}};return m}();typeof C<"u"&&C!=null&&(C.exports=Y)});var D=["esm.sh","skypack","esm.run","jsdelivr.esm","fastly.jsdelivr.esm","gcore.jsdelivr.esm","testingcf.jsdelivr.esm","jsdelivr.b-cdn.esm","jspm"],$=["jsdelivr","fastly.jsdelivr","unpkg","gcore.jsdelivr","testingcf.jsdelivr","jsdelivr.b-cdn","npmcdn"],R=["jsdelivr.gh","fastly.jsdelivr.gh","statically","gcore.jsdelivr.gh","testingcf.jsdelivr.gh","jsdelivr.b-cdn.gh"],k={getModuleUrl:(e,{isModule:i=!0,defaultCDN:f="esm.sh"}={})=>{e=e.replace(/#nobundle/g,"");let d=B(e,i,f);return d||(i?"https://esm.sh/"+e:"https://cdn.jsdelivr.net/npm/"+e)},getUrl:(e,i)=>e.startsWith("http")||e.startsWith("data:")?e:B(e,!1,i||A())||e,cdnLists:{npm:$,module:D,gh:R},checkCDNs:async(e,i)=>{let f=[i,...k.cdnLists.npm].filter(Boolean);for(let d of f)try{if((await fetch(k.getUrl(e,d),{method:"HEAD"})).ok)return d}catch{}return k.cdnLists.npm[0]}},A=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||k.cdnLists.npm[0]}catch{return k.cdnLists.npm[0]}},B=(e,i,f)=>{let d=i&&e.startsWith("unpkg:")?"?module":"";e.startsWith("gh:")?e=e.replace("gh",R[0]):e.includes(":")||(e=(f||(i?D[0]:$[0]))+":"+e);for(let g of Q){let[m,t]=g;if(m.test(e))return e.replace(m,t)+d}return null},Q=[[/^(esm\.sh:)(.+)/i,"https://esm.sh/$2"],[/^(npm:)(.+)/i,"https://esm.sh/$2"],[/^(node:)(.+)/i,"https://esm.sh/$2"],[/^(jsr:)(.+)/i,"https://esm.sh/jsr/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly\.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(gcore\.jsdelivr:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2"],[/^(testingcf\.jsdelivr:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2"],[/^(jsdelivr\.b-cdn:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2"],[/^(jsdelivr\.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(fastly\.jsdelivr\.gh:)(.+)/i,"https://fastly.jsdelivr.net/gh/$2"],[/^(gcore\.jsdelivr\.gh:)(.+)/i,"https://gcore.jsdelivr.net/gh/$2"],[/^(testingcf\.jsdelivr\.gh:)(.+)/i,"https://testingcf.jsdelivr.net/gh/$2"],[/^(jsdelivr\.b-cdn\.gh:)(.+)/i,"https://jsdelivr.b-cdn.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm\.run:)(.+)/i,"https://esm.run/$2"],[/^(jsdelivr\.esm:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2/+esm"],[/^(fastly\.jsdelivr\.esm:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2/+esm"],[/^(gcore\.jsdelivr\.esm:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2/+esm"],[/^(testingcf\.jsdelivr\.esm:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2/+esm"],[/^(jsdelivr\.b-cdn\.esm:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2/+esm"],[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle\.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(npmcdn:)(.+)/i,"https://npmcdn.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var{getUrl:se,getModuleUrl:re}=k;var L=()=>{let e=[];return{subscribe:m=>(e.push(m),{unsubscribe:()=>{e.splice(e.indexOf(m),1)}}),notify:m=>{e.forEach(t=>{t(m)})},hasSubscribers:()=>e.length>0,unsubscribeAll:()=>{e.length=0}}};var q=e=>(globalThis.structuredClone||(i=>JSON.parse(JSON.stringify(i,(f,d)=>d===void 0?null:d))))(e);var X=()=>String(Math.random())+"-"+Date.now().toFixed();var _=async(e,i)=>new Promise(f=>{let d=X(),g=m=>{let t=m.data;t.method===i.method&&t.messageId===d&&(e.removeEventListener("message",g),f(t.data))};e.addEventListener("message",g),e.postMessage({...i,messageId:d})});var P={getValue:()=>null,setValue:()=>{},clear:()=>{},subscribe:()=>({unsubscribe:()=>{}}),unsubscribeAll:()=>{}};var T=(e,i)=>{if(i)return P;let f=L(),d=o=>f.subscribe(o),g=()=>{f.unsubscribeAll()},m=()=>{f.notify(n())},t=o=>{window.localStorage.setItem(e,JSON.stringify(o)),m()},n=()=>{let o=window.localStorage.getItem(e);if(!o)return null;try{return JSON.parse(o)}catch{return null}};return{getValue:n,setValue:t,clear:()=>{t(null),m()},subscribe:d,unsubscribeAll:g}};var I=()=>q({projects:null,templates:null,assets:null,snippets:null,recover:null,userConfig:null,userData:null,appData:null,sync:null});var N=async(e,i)=>{i||(e.recover=T("__livecodes_project_recover__",i),e.userConfig=T("__livecodes_user_config__",i),e.appData=T("__livecodes_app_data__",i))};var M=G(W());var U,Ye=e=>{U=U||new Worker(e+"sync.worker.d3480bcd18f092844a8d2b6abb99620e.js?appCDN="+A());let i;U.addEventListener("message",async f=>{let d=f.data,g=d.method,m=d.args||{};if(g!=="getValue"&&g!=="setValue")return;i||(i=I(),await N(i,!1));let t,{storeKey:n,value:a}=m,o=i[n];!o||!n||(g==="getValue"&&"getValue"in o&&(t=o.getValue()),g==="setValue"&&"setValue"in o&&a!=null&&o.setValue(a),U.postMessage({...d,data:t}))})},et=async(...e)=>_(U,{method:"sync",args:e}),tt=async(...e)=>_(U,{method:"exportToLocalSync",args:e}),ot=async(...e)=>_(U,{method:"exportStoreAsBase64Update",args:e}),st=async(...e)=>_(U,{method:"restoreFromUpdate",args:e}),rt=async(...e)=>_(U,{method:"restoreFromLocalSync",args:e});export{ot as exportStoreAsBase64Update,tt as exportToLocalSync,Ye as init,rt as restoreFromLocalSync,st as restoreFromUpdate,et as sync};
