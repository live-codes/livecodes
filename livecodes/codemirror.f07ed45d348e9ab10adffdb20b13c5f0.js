import{Compartment as H,EditorState as ne}from"@codemirror/state";import{oneDark as rn}from"@codemirror/theme-one-dark";import{EditorView as b,keymap as C}from"@codemirror/view";import{indentWithTab as sn,undo as cn,redo as ln}from"@codemirror/commands";import{defaultHighlightStyle as an,syntaxHighlighting as dt,indentUnit as un,HighlightStyle as mn}from"@codemirror/language";import{tags as dn}from"@lezer/highlight";var Te=()=>document.querySelector("#editor-mode");import{keymap as Se,highlightSpecialChars as xe,drawSelection as ke,highlightActiveLine as xt,dropCursor as kt,rectangularSelection as At,crosshairCursor as Ht,lineNumbers as W,highlightActiveLineGutter as bt}from"@codemirror/view";import{EditorState as wt}from"@codemirror/state";import{defaultHighlightStyle as Ae,syntaxHighlighting as He,indentOnInput as qt,bracketMatching as vt,foldGutter as It,foldKeymap as Bt}from"@codemirror/language";import{defaultKeymap as be,history as we,historyKeymap as qe}from"@codemirror/commands";import{searchKeymap as Ct,highlightSelectionMatches as jt}from"@codemirror/search";import{autocompletion as Rt,completionKeymap as Dt,closeBrackets as G,closeBracketsKeymap as Ut}from"@codemirror/autocomplete";import{lintKeymap as Pt}from"@codemirror/lint";import{EditorView as bn}from"@codemirror/view";var ve=(()=>[bt(),xe(),we(),It(),ke(),kt(),wt.allowMultipleSelections.of(!0),qt(),He(Ae,{fallback:!0}),vt(),Rt(),At(),Ht(),xt(),jt(),Se.of([...Ut,...be,...Ct,...qe,...Bt,...Dt,...Pt])])(),kn=(()=>[xe(),we(),ke(),He(Ae,{fallback:!0}),Se.of([...be,...qe])])();import{LanguageSupport as Nt,StreamLanguage as Ft}from"@codemirror/language";var T=e=>new Nt(Ft.define(e)),f=e=>`./vendor/codemirror/v6.0.1/${e}`,i={core:f("codemirror-core.js"),vue:f("codemirror-lang-vue.js"),json:f("codemirror-lang-json.js"),markdown:f("codemirror-lang-markdown.js"),python:f("codemirror-lang-python.js"),php:f("codemirror-lang-php.js"),cpp:f("codemirror-lang-cpp.js"),sql:f("codemirror-lang-sql.js"),wast:f("codemirror-lang-wast.js"),scss:f("codemirror-lang-scss.js"),coffeescript:f("codemirror-lang-coffeescript.js"),livescript:f("codemirror-lang-livescript.js"),ruby:f("codemirror-lang-ruby.js"),go:f("codemirror-lang-go.js"),perl:f("codemirror-lang-perl.js"),lua:f("codemirror-lang-lua.js"),r:f("codemirror-lang-r.js"),julia:f("codemirror-lang-julia.js"),scheme:f("codemirror-lang-scheme.js"),clojure:f("codemirror-lang-clojure.js"),tcl:f("codemirror-lang-tcl.js"),less:f("codemirror-lang-less.js"),stylus:f("codemirror-lang-stylus.js")},$={html:async()=>(await import(i.core)).html(),css:async()=>(await import(i.core)).css(),javascript:async()=>(await import(i.core)).javascript(),typescript:async()=>(await import(i.core)).javascript({typescript:!0}),jsx:async()=>(await import(i.core)).javascript({jsx:!0}),tsx:async()=>(await import(i.core)).javascript({jsx:!0,typescript:!0}),vue:async()=>(await import(i.vue)).vue(),json:async()=>(await import(i.json)).json(),markdown:async()=>(await import(i.markdown)).markdown(),python:async()=>(await import(i.python)).python(),php:async()=>(await import(i.php)).php(),cpp:async()=>(await import(i.cpp)).cpp(),sql:async()=>(await import(i.sql)).sql(),wat:async()=>(await import(i.wast)).wast(),scss:async()=>(await import(i.scss)).sass(),sass:async()=>(await import(i.scss)).sass({indented:!0}),coffeescript:async()=>T((await import(i.coffeescript)).coffeeScript),livescript:async()=>T((await import(i.livescript)).liveScript),ruby:async()=>T((await import(i.ruby)).ruby),go:async()=>T((await import(i.go)).go),perl:async()=>T((await import(i.perl)).perl),lua:async()=>T((await import(i.lua)).lua),r:async()=>T((await import(i.r)).r),julia:async()=>T((await import(i.julia)).julia),scheme:async()=>T((await import(i.scheme)).scheme),clojure:async()=>T((await import(i.clojure)).clojure),tcl:async()=>T((await import(i.tcl)).tcl),less:async()=>T((await import(i.less)).less),stylus:async()=>T((await import(i.stylus)).stylus)};import{Decoration as K,EditorView as Vt,ViewPlugin as Ot,WidgetType as Wt}from"@codemirror/view";import{getIndentUnit as Be}from"@codemirror/language";import{RangeSet as Gt}from"@codemirror/state";var $t=K.mark({class:"cm-indentation-marker",tagName:"span"}),zt=K.mark({class:"cm-indentation-marker active",tagName:"span"}),z=class extends Wt{constructor(t,n,o){super(),this.numIndent=t,this.indentSize=n,this.activeIndent=o}eq(t){return this.numIndent===t.numIndent&&this.indentSize===t.indentSize&&this.activeIndent===t.activeIndent}toDOM(t){let n=Be(t.state),o=document.createElement("span");o.style.top="0",o.style.left="4px",o.style.position="absolute",o.style.pointerEvents="none";for(let r=0;r<this.numIndent;r++){let a=document.createElement("span");a.className="cm-indentation-marker",a.classList.toggle("active",r===this.activeIndent),a.innerHTML=" ".repeat(n),o.appendChild(a)}return o}};function Ce(e,t,n){let o=0,r=0,a=null;for(let l=0;l<e.length;l++){if(e[l]!==" "&&e[l]!=="	")return r%t===0&&l!==0&&o++,o;(a==="	"||r%t===0)&&(o++,n&&n(l)),e[l]===" "?r++:r=0,a=e[l]}return o}function Kt(e,t){let n=Math.min(e,t),o=Math.max(e,t);return n===0&&o>0?1:n===o&&n>0?n-1:n}function Jt(e,t,n){let o=e.lines,r=t;for(;r<=o;){let{text:a}=e.line(r);if(a.trim().length===0){r++;continue}let l=Ce(a,n);return[r,l]}return[o+1,0]}function Ie(e){let t=Be(e.state),n=new Map,o=[];for(let{from:a,to:l}of e.visibleRanges){let s=a,m=0,d=0,p=0;for(;s<=l;){let y=e.state.doc.lineAt(s),{text:S}=y;if(S.trim().length===0){if(p<y.number){let[L,k]=Jt(e.state.doc,y.number+1,t);p=L,d=k}let h=Kt(m,d);n.set(y.number,h),o.push({from:s,to:s,lineNumber:y.number,create:L=>K.widget({widget:new z(h,t,L)})})}else{let h=[];m=Ce(S,t,L=>h.push(L)),n.set(y.number,h.length),o.push(...h.map((L,k)=>({from:y.from+L,to:y.from+L+1,lineNumber:y.number,create:j=>j===k?zt:$t})))}s=y.to+1}}let r=Qt(e.state,n);return Gt.of(Array.from(o).map(({lineNumber:a,from:l,to:s,create:m})=>{let d=a>=r.start&&a<=r.end?r.activeIndent-1:void 0;return{from:l,to:s,value:m(d)}}),!0)}function Qt(e,t){let n=e.doc.lineAt(e.selection.main.head),o=t.get(n.number),r=n.number,a=t.get(r+1);a&&o!=null&&a>o&&(o=a,r++);let l=t.get(r-1);if(l&&o!=null&&l>o&&(o=l,r--),!o)return{start:-1,end:-1,activeIndent:NaN};let s,m;for(s=r;s>=0;s--){let d=t.get(s-1);if(!d||d<o)break}for(m=r;;m++){let d=t.get(m+1);if(!d||d<o)break}return{start:s,end:m,activeIndent:o}}function Yt(){return Ot.define(e=>({decorations:Ie(e),update(t){(t.docChanged||t.viewportChanged||t.selectionSet)&&(this.decorations=Ie(t.view))}}),{decorations:e=>e.decorations})}var _t=Vt.baseTheme({".cm-line":{position:"relative"},".cm-indentation-marker":{display:"inline-block"},"&light .cm-indentation-marker":{background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") left repeat-y'},"&light .cm-indentation-marker.active":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACAQMAAACjTyRkAAAABlBMVEX///+goKD0a5EfAAAADElEQVR4nGNgYGgAAACEAIHJde6SAAAAAElFTkSuQmCC) left repeat-y"},"&dark .cm-indentation-marker":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHB3d/8PAAOIAdULw8qMAAAAAElFTkSuQmCC) left repeat-y"},"&dark .cm-indentation-marker.active":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACAQMAAACjTyRkAAAABlBMVEUAAACFhYWZv3sFAAAAAnRSTlMA/1uRIrUAAAAMSURBVHicY2BgaAAAAIQAgcl17pIAAAAASUVORK5CYII=) left repeat-y"}});function J(){return[Yt(),_t]}import{insertNewlineAndIndent as je,cursorCharLeft as Re,selectCharLeft as De,cursorGroupLeft as Zt,selectGroupLeft as Xt,cursorCharRight as Ue,selectCharRight as Pe,cursorGroupRight as eo,selectGroupRight as to,cursorLineUp as Ne,selectLineUp as Fe,cursorLineDown as Ve,selectLineDown as Oe,cursorLineBoundaryBackward as We,selectLineBoundaryBackward as Ge,cursorDocStart as $e,selectDocStart as ze,cursorPageUp as Q,selectPageUp as Ke,cursorPageDown as Y,selectPageDown as Je,cursorLineBoundaryForward as Qe,selectLineBoundaryForward as Ye,cursorDocEnd as _e,selectDocEnd as Ze,selectAll as oo,deleteCharBackward as _,deleteCharForward as Xe,deleteGroupBackward as et,deleteGroupForward as no,deleteToLineStart as ro,deleteToLineEnd as tt,cursorLineStart as so,selectLineStart as co,cursorLineEnd as lo,selectLineEnd as ao,splitLine as io,transposeChars as uo,deleteLine as mo,moveLineDown as po,moveLineUp as go,copyLineDown as fo,copyLineUp as yo,selectLine as Eo,cursorMatchingBracket as Lo,indentMore as ot,indentLess as nt,lineComment as ho,lineUncomment as Mo,toggleComment as To,toggleBlockComment as So,undo as xo,redo as rt,undoSelection as ko}from"@codemirror/commands";import{openSearchPanel as Ao,closeSearchPanel as Ho,selectMatches as bo,replaceAll as wo,gotoLine as qo,selectNextOccurrence as vo,selectSelectionMatches as Io}from"@codemirror/search";import{foldCode as Bo,unfoldCode as Co,foldAll as jo,unfoldAll as Ro}from"@codemirror/language";import{startCompletion as Do,closeCompletion as Uo,moveCompletionSelection as v,acceptCompletion as st,deleteBracketPair as Po}from"@codemirror/autocomplete";import{openLintPanel as No,nextDiagnostic as Fo}from"@codemirror/lint";import{EditorSelection as ct}from"@codemirror/state";var lt=e=>t=>{let n=e==="down",o=t.state.selection;for(let r of o.ranges)o=o.addRange(t.moveVertically(r,n));return t.dispatch({selection:o}),!0},Vo=lt("up"),Oo=lt("down"),Wo=e=>{let t=null;for(let n of e.state.selection.ranges)if(!n.empty)for(let o=n.from;o<=n.to;){let r=e.state.doc.lineAt(o),a=Math.min(r.to,n.to);t?t=t.addRange(ct.range(a,a)):t=ct.single(a),o=r.to+1}return t?(e.dispatch({selection:t}),!0):!1},Z=[{key:"Ctrl-Space",run:Do},{key:"Escape",run:Uo},{key:"ArrowDown",run:v(!0)},{key:"ArrowUp",run:v(!1)},{key:"PageDown",run:v(!0,"page")},{key:"PageUp",run:v(!1,"page")},{key:"Enter",run:st},{key:"Tab",run:st},{key:"Mod-f",run:Ao,scope:"editor search-panel"},{key:"Escape",run:Ho,scope:"editor search-panel"},{key:"Alt-Enter",run:bo,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:wo,scope:"editor search-panel"},{key:"Ctrl-g",run:qo},{key:"Mod-d",run:vo,preventDefault:!0},{key:"Shift-Mod-l",run:Io},{key:"Enter",run:je,shift:je},{key:"ArrowLeft",run:Re,shift:De,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Zt,shift:Xt},{key:"ArrowRight",run:Ue,shift:Pe,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:eo,shift:to},{key:"ArrowUp",run:Ne,shift:Fe,preventDefault:!0},{key:"ArrowDown",run:Ve,shift:Oe,preventDefault:!0},{key:"Home",run:We,shift:Ge},{mac:"Cmd-ArrowLeft",run:We,shift:Ge},{key:"Mod-Home",run:$e,shift:ze},{mac:"Cmd-ArrowUp",run:$e,shift:ze},{key:"PageUp",run:Q,shift:Ke},{mac:"Ctrl-ArrowUp",run:Q,shift:Ke},{key:"PageDown",run:Y,shift:Je},{mac:"Ctrl-ArrowDown",run:Y,shift:Je},{key:"End",run:Qe,shift:Ye},{mac:"Cmd-ArrowRight",run:Qe,shift:Ye},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Vo,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:Oo,preventDefault:!0},{key:"Shift-Alt-i",run:Wo},{key:"Mod-End",run:_e,shift:Ze},{mac:"Cmd-ArrowDown",run:_e,shift:Ze},{key:"Mod-a",run:oo},{key:"Backspace",run:Po},{key:"Backspace",run:_,shift:_},{key:"Delete",run:Xe},{key:"Mod-Backspace",mac:"Alt-Backspace",run:et},{key:"Mod-Delete",mac:"Alt-Delete",run:no},{mac:"Mod-Backspace",run:ro},{mac:"Mod-Delete",run:tt},{mac:"Ctrl-b",run:Re,shift:De,preventDefault:!0},{mac:"Ctrl-f",run:Ue,shift:Pe},{mac:"Ctrl-p",run:Ne,shift:Fe},{mac:"Ctrl-n",run:Ve,shift:Oe},{mac:"Ctrl-a",run:so,shift:co},{mac:"Ctrl-e",run:lo,shift:ao},{mac:"Ctrl-d",run:Xe},{mac:"Ctrl-h",run:_},{mac:"Ctrl-k",run:tt},{mac:"Ctrl-Alt-h",run:et},{mac:"Ctrl-o",run:io},{mac:"Ctrl-t",run:uo},{mac:"Ctrl-v",run:Y},{mac:"Alt-v",run:Q},{key:"Shift-Mod-k",run:mo},{key:"Alt-ArrowDown",run:po},{key:"Alt-ArrowUp",run:go},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:fo},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:yo},{key:"Mod-l",run:Eo,preventDefault:!0},{key:"Shift-Mod-\\",run:Lo},{key:"Tab",run:ot,shift:nt,preventDefault:!0},{key:"Mod-[",run:nt},{key:"Mod-]",run:ot},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Bo},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Co},{key:"Mod-k Mod-0",run:jo},{key:"Mod-k Mod-j",run:Ro},{key:"Mod-k Mod-c",run:ho},{key:"Mod-k Mod-u",run:Mo},{key:"Mod-/",run:To},{key:"Shift-Alt-a",run:So},{key:"Mod-z",run:xo,preventDefault:!0},{key:"Mod-y",run:rt,preventDefault:!0},{key:"Mod-Shift-z",run:rt,preventDefault:!0},{key:"Mod-u",run:ko,preventDefault:!0},{key:"Mod-Shift-m",run:No},{key:"F8",run:Fo}];import{EditorView as Go,ViewPlugin as $o,Decoration as w,WidgetType as zo}from"@codemirror/view";import{syntaxTree as Ko}from"@codemirror/language";var te=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkgrey","#a9a9a9"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkslategrey","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["goldenrod","#daa520"],["gold","#ffd700"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["grey","#808080"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavenderblush","#fff0f5"],["lavender","#e6e6fa"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgray","#d3d3d3"],["lightgreen","#90ee90"],["lightgrey","#d3d3d3"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370db"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#db7093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["slategrey","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]),Jo=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},mt=new WeakMap,x=function(e){return e.rgb="RGB",e.hex="HEX",e.named="NAMED",e.hsl="HSL",e}(x||(x={})),Qo=/rgb\(\s*(\d{1,3}%?)\s*,?\s*(\d{1,3}%?)\s*,?\s*(\d{1,3}%?)\s*(,\s*0?\.\d+)?\)/,Yo=/hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(,\s*0?\.\d+)?\)/;function at(e){let t=[];for(let n of e.visibleRanges)Ko(e.state).iterate({from:n.from,to:n.to,enter:({type:o,from:r,to:a})=>{if(o.name==="CallExpression"){let l=e.state.doc.sliceString(r,a);if(l.startsWith("rgb")){let s=Qo.exec(l);if(!s)return;let[m,d,p,y,S]=s,h=Zo(d,p,y),L=w.widget({widget:new A({colorType:x.rgb,color:h,from:r,to:a,alpha:S||""}),side:1});t.push(L.range(r));return}if(l.startsWith("hsl")){let s=Yo.exec(l);if(!s)return;let[m,d,p,y,S]=s,h=Xo(d,p,y),L=w.widget({widget:new A({colorType:x.hsl,color:h,from:r,to:a,alpha:S||""}),side:1});t.push(L.range(r));return}}if(o.name==="ColorLiteral"){let[l,s]=_o(e.state.doc.sliceString(r,a)),m=w.widget({widget:new A({colorType:x.hex,color:l,from:r,to:a,alpha:s}),side:1});t.push(m.range(r))}if(o.name==="ValueName"){let l=e.state.doc.sliceString(r,a);if(te.has(l)){let s=te.get(l),m=w.widget({widget:new A({colorType:x.named,color:s,from:r,to:a,alpha:""}),side:1});t.push(m.range(r))}}}});return w.set(t)}function _o(e){return e.length===4?[`#${e[1].repeat(2)}${e[2].repeat(2)}${e[3].repeat(2)}`,""]:e.length===5?[`#${e[1].repeat(2)}${e[2].repeat(2)}${e[3].repeat(2)}`,e[4].repeat(2)]:e.length===9?[`#${e.slice(1,-2)}`,e.slice(-2)]:[e,""]}function X(e){let t;if(e.endsWith("%")){let n=Number(e.slice(0,-1));t=Math.round(n/100*255)}else t=Number(e);return I(t)}function I(e){let t=e.toString(16);return t.length==1?"0"+t:t}function it(e){let t=e.slice(1,3),n=e.slice(3,5),o=e.slice(5,7);return[parseInt(t,16),parseInt(n,16),parseInt(o,16)]}function Zo(e,t,n){return`#${X(e)}${X(t)}${X(n)}`}function Xo(e,t,n){let o=Number(t)/100,r=Number(n)/100,[a,l,s]=en(Number(e),o,r);return`#${I(a)}${I(l)}${I(s)}`}function en(e,t,n){if(t===0){let y=Math.round(n*255);return[y,y,y]}let o;n<.5?o=n*(1+t):o=n+t-n*t;let r=2*n-o;e=e/360;let a=ut(e+.333),l=e,s=ut(e-.333),m=ee(o,r,a),d=ee(o,r,l),p=ee(o,r,s);return[Math.round(m*255),Math.round(d*255),Math.round(p*255)]}function ut(e){return e<0?e+1:e>1?e-1:e}function ee(e,t,n){return 6*n<1?t+(e-t)*6*n:2*n<1?e:3*n<2?t+(e-t)*(.666-n)*6:t}function tn(e,t,n){let o=e/255,r=t/255,a=n/255,l=Math.min(o,r,a),s=Math.max(o,r,a),m=(s+l)/2;if(s===l)return[0,0,m];let d;m<=.5?d=(s-l)/(s+l):d=(s-l)/(2-s-l);let p;for(s===o?p=(r-a)/(s-l):r===s?p=2+(a-o)/(s-l):p=4+(o-r)/(s-l),p=Math.round(p*60);p<0;)p+=360;return[p,d,m]}var B="cm-css-color-picker-wrapper",A=class extends zo{constructor(t){var{color:n}=t,o=Jo(t,["color"]);super(),this.state=o,this.color=n}eq(t){return t.state.colorType===this.state.colorType&&t.color===this.color&&t.state.from===this.state.from&&t.state.to===this.state.to&&t.state.alpha===this.state.alpha}toDOM(){let t=document.createElement("input");mt.set(t,this.state),t.type="color",t.value=this.color;let n=document.createElement("span");return n.appendChild(t),n.className=B,n}ignoreEvent(){return!1}},on=Go.baseTheme({[`.${B}`]:{display:"inline-block",outline:"1px solid #eee",marginRight:"0.6ch",height:"1em",width:"1em",transform:"translateY(1px)"},[`.${B} input[type="color"]`]:{cursor:"pointer",height:"100%",width:"100%",padding:0,border:"none","&::-webkit-color-swatch-wrapper":{padding:0},"&::-webkit-color-swatch":{border:"none"},"&::-moz-color-swatch":{border:"none"}}}),nn=$o.fromClass(class{constructor(t){this.decorations=at(t)}update(t){(t.docChanged||t.viewportChanged)&&(this.decorations=at(t.view))}},{decorations:e=>e.decorations,eventHandlers:{change:(e,t)=>{let n=e.target;if(n.nodeName!=="INPUT"||!n.parentElement||!n.parentElement.classList.contains(B))return!1;let o=mt.get(n),r=n.value+o.alpha;if(o.colorType===x.rgb)r=`rgb(${it(n.value).join(", ")}${o.alpha})`;else if(o.colorType===x.named)for(let[a,l]of te.entries())l===n.value&&(r=a);else if(o.colorType===x.hsl){let[a,l,s]=it(n.value),[m,d,p]=tn(a,l,s);r=`hsl(${m}, ${Math.round(d*100)}%, ${Math.round(p*100)}%${o.alpha})`}return t.dispatch({changes:{from:o.from,to:o.to,insert:r}}),!0}}}),oe=[nn,on];var sr=async e=>{let{container:t,readonly:n,isEmbed:o,editorId:r,getFormatterConfig:a,getFontFamily:l}=e,s={...e};if(!t)throw new Error("editor container not found");let m=async c=>$[c]?.()||$.html?.(),d=c=>["vue","vue3","vue2"].includes(c)?"vue":e.mapLanguage?.(c)||c,p=e.language,y=d(p),S=await m(y),h=e.theme,L=[],k=[],j=c=>{c.docChanged&&k.forEach(u=>u(c))},R,D,U,re=async c=>{let u={vim:"./vendor/codemirror/v6.0.1/codemirror-vim.js",emacs:"./vendor/codemirror/v6.0.1/codemirror-emacs.js",emmet:"./vendor/codemirror/v6.0.1/codemirror-emmet.js"};R=c.editorMode==="vim"?(await import(u.vim)).vim:void 0,D=c.editorMode==="emacs"?(await import(u.emacs)).emacs:void 0,U=c.emmet?(await import(u.emmet)).emmet:void 0};await re(e);let se=new H,ce=new H,le=new H,P=b.editable.of(!1),ae=new H,ie=new H,ue=new H,pt=mn.define([{tag:dn.comment,fontStyle:"italic"}]),me=c=>{let u=(c.fontSize??s.fontSize)||(o?12:14),E=l(c.fontFamily??s.fontFamily),M=c.tabSize??s.tabSize,O=c.useTabs??s.useTabs,q=c.wordWrap??s.wordWrap,St=c.emmet??s.emmet,Me=c.editorMode??s.editorMode;return[ne.tabSize.of(M),un.of(O?"	":" ".repeat(M)),...q?[b.lineWrapping]:[],...Me==="vim"&&R?[R()]:Me==="emacs"&&D?[D()]:[],...St&&U?[U]:[],b.theme({"&":{height:"100%",fontSize:u+"px"},".cm-scroller":{overflow:"auto",fontFamily:E}})]},de={dark:rn,light:[dt(an)]},pe=()=>{let c=[se.of(S),b.updateListener.of(j),le.of(de[h]),dt(pt),ae.of(me({})),ce.of(C.of(L)),ie.of(s.lineNumbers?W():[]),ue.of(s.closeBrackets?G():[]),ve,n?P:[],C.of([sn]),C.of(Z),J(),oe],u=[P,...c],E=[P,...c],M=[...c];return r==="console"?M:r==="compiled"?E:e.mode==="codeblock"?u:c},ge=async c=>{let u=Te(),E=M=>{u&&(u.textContent=M)};c||E(""),c==="vim"&&E("Vim"),c==="emacs"&&E("Emacs")},g=new b({state:ne.create({extensions:pe(),doc:e.value}),parent:t});ge(e.editorMode);let gt=()=>r,fe=()=>g.state.doc.toString(),N=(c="",u=!0)=>{u?g.setState(ne.create({doc:c,extensions:pe()})):g.dispatch({changes:{from:0,to:g.state.doc.length,insert:c}})},ye=()=>g.focus(),ft=()=>p,yt=(c,u)=>{p=c,y=d(p),m(y).then(E=>{S=E,g.dispatch({effects:se.reconfigure(S)})}),u!=null&&N(u)},Et=c=>{k.push(c)},Ee={CtrlEnter:"Ctrl-Enter",ShiftEnter:"Shift-Enter",Enter:"Enter",UpArrow:"ArrowUp",DownArrow:"ArrowDown",ShiftAltF:"Shift-Alt-f"},F=(c,u,E)=>{L.push({key:u,run(){return E(),!0}}),g.dispatch({effects:ce.reconfigure(C.of(L))})},V,Lt=c=>{c&&(V=c,F("format",Ee.ShiftAltF,async()=>{await Le(),ye()}))},Le=async()=>{if(!V)return;let c=g.state.selection.main.to,u=fe(),E=await V(u,c,a());N(E.formatted,!1);let M=E.cursorOffset>=0?E.cursorOffset:0;g.dispatch({selection:{anchor:M}})},ht=c=>{h=c,g.dispatch({effects:le.reconfigure(de[h])})},Mt=c=>{s={...c},re(s).then(()=>{g.dispatch({effects:[ae.reconfigure(me(s)),ie.reconfigure(s.lineNumbers?W():[]),ue.reconfigure(s.closeBrackets?G():[])]}),ge(s.editorMode)})},Tt=()=>{cn({state:g.state,dispatch:g.dispatch})},he=()=>{ln({state:g.state,dispatch:g.dispatch})};return F("redo","Mod-Shift-z",he),{getValue:fe,setValue:N,getLanguage:ft,setLanguage:yt,getEditorId:gt,focus:ye,getPosition:()=>{let c=g.state.selection.asSingle().ranges[0].from,u=g.state.doc.lineAt(c),E=u.number,M=c-u.from+1;return{lineNumber:E,column:M}},setPosition:({lineNumber:c,column:u=0})=>{let E=g.state.doc.lines>c?c:g.state.doc.lines,M=g.state.doc.line(E),O=M.length>u?u:M.length,q=M.from+O;g.dispatch({selection:{anchor:q},effects:[b.scrollIntoView(q,{x:"center",y:"center"})]})},onContentChanged:Et,keyCodes:Ee,addKeyBinding:F,changeSettings:Mt,registerFormatter:Lt,format:Le,isReadonly:n,setTheme:ht,undo:Tt,redo:he,destroy:()=>{k.length=0,L.length=0,g.destroy(),t.innerHTML=""},codemirror:g}};export{sr as createEditor};
//# sourceMappingURL=codemirror.js.map
