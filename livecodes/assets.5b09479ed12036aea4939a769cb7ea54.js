var ue=Object.create;var F=Object.defineProperty;var ge=Object.getOwnPropertyDescriptor;var fe=Object.getOwnPropertyNames;var ye=Object.getPrototypeOf,xe=Object.prototype.hasOwnProperty;var he=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var Se=(e,n,d,u)=>{if(n&&typeof n=="object"||typeof n=="function")for(let m of fe(n))!xe.call(e,m)&&m!==d&&F(e,m,{get:()=>n[m],enumerable:!(u=ge(n,m))||u.enumerable});return e};var Le=(e,n,d)=>(d=e!=null?ue(ye(e)):{},Se(n||!e||!e.__esModule?F(d,"default",{value:e,enumerable:!0}):d,e));var Z=he((gt,I)=>{var Ee=function(){var e=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",u={};function m(o,s){if(!u[o]){u[o]={};for(var l=0;l<o.length;l++)u[o][o.charAt(l)]=l}return u[o][s]}var f={compressToBase64:function(o){if(o==null)return"";var s=f._compress(o,6,function(l){return n.charAt(l)});switch(s.length%4){default:case 0:return s;case 1:return s+"===";case 2:return s+"==";case 3:return s+"="}},decompressFromBase64:function(o){return o==null?"":o==""?null:f._decompress(o.length,32,function(s){return m(n,o.charAt(s))})},compressToUTF16:function(o){return o==null?"":f._compress(o,15,function(s){return e(s+32)})+" "},decompressFromUTF16:function(o){return o==null?"":o==""?null:f._decompress(o.length,16384,function(s){return o.charCodeAt(s)-32})},compressToUint8Array:function(o){for(var s=f.compress(o),l=new Uint8Array(s.length*2),c=0,i=s.length;c<i;c++){var x=s.charCodeAt(c);l[c*2]=x>>>8,l[c*2+1]=x%256}return l},decompressFromUint8Array:function(o){if(o==null)return f.decompress(o);for(var s=new Array(o.length/2),l=0,c=s.length;l<c;l++)s[l]=o[l*2]*256+o[l*2+1];var i=[];return s.forEach(function(x){i.push(e(x))}),f.decompress(i.join(""))},compressToEncodedURIComponent:function(o){return o==null?"":f._compress(o,6,function(s){return d.charAt(s)})},decompressFromEncodedURIComponent:function(o){return o==null?"":o==""?null:(o=o.replace(/ /g,"+"),f._decompress(o.length,32,function(s){return m(d,o.charAt(s))}))},compress:function(o){return f._compress(o,16,function(s){return e(s)})},_compress:function(o,s,l){if(o==null)return"";var c,i,x={},b={},L="",T="",h="",S=2,v=3,g=2,a=[],t=0,r=0,y;for(y=0;y<o.length;y+=1)if(L=o.charAt(y),Object.prototype.hasOwnProperty.call(x,L)||(x[L]=v++,b[L]=!0),T=h+L,Object.prototype.hasOwnProperty.call(x,T))h=T;else{if(Object.prototype.hasOwnProperty.call(b,h)){if(h.charCodeAt(0)<256){for(c=0;c<g;c++)t=t<<1,r==s-1?(r=0,a.push(l(t)),t=0):r++;for(i=h.charCodeAt(0),c=0;c<8;c++)t=t<<1|i&1,r==s-1?(r=0,a.push(l(t)),t=0):r++,i=i>>1}else{for(i=1,c=0;c<g;c++)t=t<<1|i,r==s-1?(r=0,a.push(l(t)),t=0):r++,i=0;for(i=h.charCodeAt(0),c=0;c<16;c++)t=t<<1|i&1,r==s-1?(r=0,a.push(l(t)),t=0):r++,i=i>>1}S--,S==0&&(S=Math.pow(2,g),g++),delete b[h]}else for(i=x[h],c=0;c<g;c++)t=t<<1|i&1,r==s-1?(r=0,a.push(l(t)),t=0):r++,i=i>>1;S--,S==0&&(S=Math.pow(2,g),g++),x[T]=v++,h=String(L)}if(h!==""){if(Object.prototype.hasOwnProperty.call(b,h)){if(h.charCodeAt(0)<256){for(c=0;c<g;c++)t=t<<1,r==s-1?(r=0,a.push(l(t)),t=0):r++;for(i=h.charCodeAt(0),c=0;c<8;c++)t=t<<1|i&1,r==s-1?(r=0,a.push(l(t)),t=0):r++,i=i>>1}else{for(i=1,c=0;c<g;c++)t=t<<1|i,r==s-1?(r=0,a.push(l(t)),t=0):r++,i=0;for(i=h.charCodeAt(0),c=0;c<16;c++)t=t<<1|i&1,r==s-1?(r=0,a.push(l(t)),t=0):r++,i=i>>1}S--,S==0&&(S=Math.pow(2,g),g++),delete b[h]}else for(i=x[h],c=0;c<g;c++)t=t<<1|i&1,r==s-1?(r=0,a.push(l(t)),t=0):r++,i=i>>1;S--,S==0&&(S=Math.pow(2,g),g++)}for(i=2,c=0;c<g;c++)t=t<<1|i&1,r==s-1?(r=0,a.push(l(t)),t=0):r++,i=i>>1;for(;;)if(t=t<<1,r==s-1){a.push(l(t));break}else r++;return a.join("")},decompress:function(o){return o==null?"":o==""?null:f._decompress(o.length,32768,function(s){return o.charCodeAt(s)})},_decompress:function(o,s,l){var c=[],i,x=4,b=4,L=3,T="",h=[],S,v,g,a,t,r,y,p={val:l(0),position:s,index:1};for(S=0;S<3;S+=1)c[S]=S;for(g=0,t=Math.pow(2,2),r=1;r!=t;)a=p.val&p.position,p.position>>=1,p.position==0&&(p.position=s,p.val=l(p.index++)),g|=(a>0?1:0)*r,r<<=1;switch(i=g){case 0:for(g=0,t=Math.pow(2,8),r=1;r!=t;)a=p.val&p.position,p.position>>=1,p.position==0&&(p.position=s,p.val=l(p.index++)),g|=(a>0?1:0)*r,r<<=1;y=e(g);break;case 1:for(g=0,t=Math.pow(2,16),r=1;r!=t;)a=p.val&p.position,p.position>>=1,p.position==0&&(p.position=s,p.val=l(p.index++)),g|=(a>0?1:0)*r,r<<=1;y=e(g);break;case 2:return""}for(c[3]=y,v=y,h.push(y);;){if(p.index>o)return"";for(g=0,t=Math.pow(2,L),r=1;r!=t;)a=p.val&p.position,p.position>>=1,p.position==0&&(p.position=s,p.val=l(p.index++)),g|=(a>0?1:0)*r,r<<=1;switch(y=g){case 0:for(g=0,t=Math.pow(2,8),r=1;r!=t;)a=p.val&p.position,p.position>>=1,p.position==0&&(p.position=s,p.val=l(p.index++)),g|=(a>0?1:0)*r,r<<=1;c[b++]=e(g),y=b-1,x--;break;case 1:for(g=0,t=Math.pow(2,16),r=1;r!=t;)a=p.val&p.position,p.position>>=1,p.position==0&&(p.position=s,p.val=l(p.index++)),g|=(a>0?1:0)*r,r<<=1;c[b++]=e(g),y=b-1,x--;break;case 2:return h.join("")}if(x==0&&(x=Math.pow(2,L),L++),c[y])T=c[y];else if(y===b)T=v+v.charAt(0);else return null;h.push(T),c[b++]=v+T.charAt(0),x--,v=T,x==0&&(x=Math.pow(2,L),L++)}}};return f}();typeof I<"u"&&I!=null&&(I.exports=Ee)});var N=["esm.sh","skypack","esm.run","jsdelivr.esm","fastly.jsdelivr.esm","gcore.jsdelivr.esm","testingcf.jsdelivr.esm","jsdelivr.b-cdn.esm","jspm"],$=["jsdelivr","fastly.jsdelivr","unpkg","gcore.jsdelivr","testingcf.jsdelivr","jsdelivr.b-cdn","npmcdn"],z=["jsdelivr.gh","fastly.jsdelivr.gh","statically","gcore.jsdelivr.gh","testingcf.jsdelivr.gh","jsdelivr.b-cdn.gh"],j={getModuleUrl:(e,{isModule:n=!0,defaultCDN:d="esm.sh"}={})=>{e=e.replace(/#nobundle/g,"");let u=O(e,n,d);return u||(n?"https://esm.sh/"+e:"https://cdn.jsdelivr.net/npm/"+e)},getUrl:(e,n)=>e.startsWith("http")||e.startsWith("data:")?e:O(e,!1,n||be())||e,cdnLists:{npm:$,module:N,gh:z},checkCDNs:async(e,n)=>{let d=[n,...j.cdnLists.npm].filter(Boolean);for(let u of d)try{if((await fetch(j.getUrl(e,u),{method:"HEAD"})).ok)return u}catch{}return j.cdnLists.npm[0]}},be=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||j.cdnLists.npm[0]}catch{return j.cdnLists.npm[0]}},O=(e,n,d)=>{let u=n&&e.startsWith("unpkg:")?"?module":"";e.startsWith("gh:")?e=e.replace("gh",z[0]):e.includes(":")||(e=(d||(n?N[0]:$[0]))+":"+e);for(let m of ve){let[f,o]=m;if(f.test(e))return e.replace(f,o)+u}return null},ve=[[/^(esm\.sh:)(.+)/i,"https://esm.sh/$2"],[/^(npm:)(.+)/i,"https://esm.sh/$2"],[/^(node:)(.+)/i,"https://esm.sh/$2"],[/^(jsr:)(.+)/i,"https://esm.sh/jsr/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly\.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(gcore\.jsdelivr:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2"],[/^(testingcf\.jsdelivr:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2"],[/^(jsdelivr\.b-cdn:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2"],[/^(jsdelivr\.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(fastly\.jsdelivr\.gh:)(.+)/i,"https://fastly.jsdelivr.net/gh/$2"],[/^(gcore\.jsdelivr\.gh:)(.+)/i,"https://gcore.jsdelivr.net/gh/$2"],[/^(testingcf\.jsdelivr\.gh:)(.+)/i,"https://testingcf.jsdelivr.net/gh/$2"],[/^(jsdelivr\.b-cdn\.gh:)(.+)/i,"https://jsdelivr.b-cdn.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm\.run:)(.+)/i,"https://esm.run/$2"],[/^(jsdelivr\.esm:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2/+esm"],[/^(fastly\.jsdelivr\.esm:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2/+esm"],[/^(gcore\.jsdelivr\.esm:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2/+esm"],[/^(testingcf\.jsdelivr\.esm:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2/+esm"],[/^(jsdelivr\.b-cdn\.esm:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2/+esm"],[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle\.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(npmcdn:)(.+)/i,"https://npmcdn.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var{getUrl:Te,getModuleUrl:Re}=j;var W=Te("flexsearch@0.7.21/dist/flexsearch.bundle.js");var K=()=>{let e=!1,n=navigator.userAgent.toLowerCase();return function(d){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(d)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(d.substr(0,4)))&&(e=!0)}(n||navigator.vendor||window.opera),e};var J=e=>{if(document.queryCommandSupported&&document.queryCommandSupported("copy")){let n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch(d){return console.warn("Copy to clipboard failed.",d),!1}finally{document.body.removeChild(n)}}return!1};var B=(e,n)=>new Promise((d,u)=>{if(n&&globalThis[n])return d(globalThis[n]);if(typeof globalThis.importScripts=="function")return globalThis.importScripts(e),n&&globalThis[n]?d(globalThis[n]):d(globalThis);let m=document.createElement("script");m.src=e,m.async=!0;let f=()=>{m.removeEventListener("load",o),m.removeEventListener("error",s)},o=()=>{if(f(),!n)return d("loaded: "+e);let l=setInterval(()=>{if(window[n])return clearInterval(l),d(window[n])},5)},s=()=>{f(),u("failed to load: "+e)};m.addEventListener("load",o),m.addEventListener("error",s),document.head.appendChild(m)});var G={APP_VERSION:"38",SDK_VERSION:"0.7.2",COMMIT_SHA:"e6b8c83",REPO_URL:"https://github.com/live-codes/livecodes",DOCS_BASE_URL:"/livecodes/docs/"};var R=()=>(Date.now()+""+Math.floor(Math.floor(Math.random()*Date.now()))).substring(0,24);var _=Le(Z());var Q='<div id="assets-list-container" class="modal-container list-container"><div class="modal-title" data-i18n="assets.heading">Assets</div><div class="modal-screen-container"><div class="modal-message" id="assets-container" class="items-container"><div class="buttons"><button id="assets-add-asset-button" class="button" data-i18n="assets.add.heading">Add Asset</button> <button id="assets-delete-all-button" class="button danger" data-i18n="assets.deleteAll">Delete All</button></div><div class="modal-search"><div><span id="sort-by-label"><i class="icon-arrow-sort"></i><span data-i18n="assets.sort.heading">Sort By:</span></span> <a href="#" id="assets-sort-by-last-modified" class="active"><i class="icon-calendar-sort"></i> <span class="sort-time" data-i18n="assets.sort.date">Date</span></a><a href="#" id="assets-sort-by-title"> <i class="icon-arrow-text-sort"></i> <span class="sort-title" data-i18n="assets.sort.fileName">File Name</span></a><a href="#" id="assets-sorted-asc" style="display:none"><i class="icon-arrow-sort-up"></i></a><a href="#" id="assets-sorted-desc"><i class="icon-arrow-sort-down"></i></a> <select name="type-filter" id="assets-type-filter"><option value="" data-i18n="assets.types.all">All types</option></select></div><div><input id="search-assets" type="text" placeholder="Search" data-i18n="assets.search" data-i18n-prop="placeholder"> <a href="#" id="assets-reset-filters" title="Reset" data-i18n="assets.resetFilters" data-i18n-prop="title"><i class="icon-reset"></i></a></div></div><div class="modal-message no-data description alert" data-i18n="assets.noSavedAssets"><div>You have no saved assets.</div></div><div class="modal-message no-data description confirm" id="assets-no-match" data-i18n="assets.noMatch"><div>No assets match these filters.</div></div></div></div></div>';var X='<div id="add-asset-container" class="modal-container"><div class="modal-title" data-i18n="assets.add.heading">Add Asset</div><div id="add-asset-screens" class="modal-screen-container"><div class="buttons"><button id="assets-button" class="button" data-i18n="assets.heading">Assets</button></div><ul id="add-asset-tabs" class="modal-tabs"><li data-target="add-asset-data-url" class="active" data-i18n="assets.add.dataURL.heading">Data URL</li><li data-target="add-asset-gh-pages" data-i18n="assets.add.githubPages.heading">GitHub Pages</li></ul><div id="add-asset-data-url" class="tab-content active"><div class="modal-screen"><div class="description help" data-i18n="assets.add.dataURL.desc" data-i18n-prop="innerHTML">Add asset as a base64-encoded <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs" target="_blank" rel="noopener">data url</a>.</div><form id="add-asset-data-url-form"><label for="asset-data-url-file-input" class="file-input-label" data-i18n="assets.add.dataURL.label">Add file</label> <input type="file" id="asset-data-url-file-input" class="file-input"></form><div id="data-url-output" class="clickable" style="width:100%"></div></div></div><div id="add-asset-gh-pages" class="tab-content"><div class="modal-screen"><div class="description help" data-i18n="assets.add.githubPages.desc" data-i18n-prop="innerHTML">Deploy asset to GitHub Pages. The file is pushed to <span class="code">gh-pages</span> branch of the repo <span class="code">livecodes-assets</span> on your GitHub account. If the repo does not already exist, a public repo will be created.</div><form id="add-asset-gh-pages-form"><label for="asset-gh-pages-file-input" id="asset-gh-pages-file-input-label" class="file-input-label" data-i18n="assets.add.githubPages.label">Upload file</label> <input type="file" id="asset-gh-pages-file-input" class="file-input"></form><div id="gh-pages-output" class="clickable" style="width:100%"></div></div></div></div></div>';var Y=e=>Object.entries(G).reduce((n,[d,u])=>n.replace(new RegExp(`{{${d}}}`,"g"),u),e);var ee=Y(Q),te=Y(X);var oe='<i class="icon-delete"></i>';var se=e=>e.querySelector("#assets-add-asset-button"),ne=e=>e.querySelector("#assets-delete-all-button"),re=e=>e.querySelector("#assets-button"),ae=e=>e.querySelector("#asset-data-url-file-input"),ce=e=>e.querySelector("#data-url-output"),ie=e=>e.querySelector("#asset-gh-pages-file-input"),le=e=>e.querySelector("#asset-gh-pages-file-input-label");var pe=e=>e.querySelector("#gh-pages-output");var de=(e,n)=>{J(e)?n.success(window.deps.translateString("assets.url.success","URL is copied to clipboard.")):n.error(window.deps.translateString("assets.url.fail","Failed to copy URL."))},ke={other:window.deps.translateString("assets.type.other","Other"),audio:window.deps.translateString("assets.type.audio","Audio"),video:window.deps.translateString("assets.type.video","Video"),image:window.deps.translateString("assets.type.image","Image"),archive:window.deps.translateString("assets.type.archive","Archive"),stylesheet:window.deps.translateString("assets.type.stylesheet","Stylesheet"),csv:window.deps.translateString("assets.type.csv","CSV"),html:window.deps.translateString("assets.type.html","HTML"),icon:window.deps.translateString("assets.type.icon","Icon"),script:window.deps.translateString("assets.type.script","Script"),json:window.deps.translateString("assets.type.json","JSON"),font:window.deps.translateString("assets.type.font","Font"),text:window.deps.translateString("assets.type.text","Text"),xml:window.deps.translateString("assets.type.xml","XML")},Ue=(e,n)=>{let d=document.createElement("div");d.classList.add("asset-item");let u=document.createElement("div");u.classList.add("asset-title","overflow-text"),u.textContent=e.filename,d.appendChild(u);let m=document.createElement("img");m.src=me(e,n),m.classList.add("img-preview"),m.onerror=function(){let i=n+"assets/images/image.svg";m.src!==i&&(m.src=i)},d.appendChild(m);let f=document.createElement("div");f.classList.add("asset-details"),d.appendChild(f);let o=document.createElement("div");o.classList.add("light"),o.textContent=window.deps.translateString("assets.link.type","Type: {{type}}",{type:ke[e.type]}),f.appendChild(o);let s=K()?new Date(e.lastModified).toLocaleDateString():new Date(e.lastModified).toLocaleString(),l=document.createElement("div");l.classList.add("light"),l.textContent=window.deps.translateString("assets.link.date","Date: {{modified}}",{modified:String(s)}),f.appendChild(l);let c=document.createElement("div");return c.classList.add("light","asset-url","overflow-text"),c.textContent=window.deps.translateString("assets.link.url","URL: {{url}}",{url:e.url}),f.appendChild(c),d},je=(e,n,d,u)=>{let m=document.createElement("li");n.appendChild(m);let f=document.createElement("a");f.href="#",f.dataset.id=e.id,f.classList.add("asset-link"),f.title=window.deps.translateString("assets.generic.clickToCopyURL","Click to copy URL"),f.appendChild(Ue(e,u)),f.onclick=l=>{l.preventDefault(),de(e.url,d)},m.appendChild(f);let o=document.createElement("div");o.classList.add("actions"),m.appendChild(o);let s=document.createElement("div");return s.innerHTML=oe,s.classList.add("action-button","delete-button"),s.title=window.deps.translateString("assets.action.delete","Delete"),o.appendChild(s),{link:f,deleteButton:s}},qe=async(e,n,d)=>{let u="date",m="desc",f,o=[],s=document.querySelector("#assets-list-container #assets-sort-by-last-modified"),l=document.querySelector("#assets-list-container #assets-sort-by-title"),c=document.querySelector("#assets-list-container #assets-sorted-asc"),i=document.querySelector("#assets-list-container #assets-sorted-desc"),x=document.querySelector("#assets-list-container #assets-type-filter"),b=document.querySelector("#assets-list-container #search-assets"),L=document.querySelector("#assets-list-container #assets-reset-filters");Array.from(new Set((await e()).map(a=>a.type))).sort((a,t)=>a.toLowerCase()<t.toLowerCase()?-1:a.toLowerCase()>t.toLowerCase()?1:0).forEach(a=>{let t=document.createElement("option");t.text=a,t.value=a,x.appendChild(t)});let T=async()=>(await e()).filter(a=>f?a.type===f:!0).filter(a=>b.value.trim()!==""?o.includes(a.id):!0).sort((a,t)=>u==="date"&&m==="asc"?a.lastModified-t.lastModified:u==="date"&&m==="desc"?t.lastModified-a.lastModified:u==="filename"&&m==="asc"&&a.filename<t.filename?-1:u==="filename"&&m==="asc"&&a.filename>t.filename||u==="filename"&&m==="desc"&&a.filename<t.filename?1:u==="filename"&&m==="desc"&&a.filename>t.filename?-1:0),h=async()=>{n(await T())},S=()=>{m="asc",c.style.display="unset",i.style.display="none"},v=()=>{m="desc",c.style.display="none",i.style.display="unset"},g=async(a=x.value)=>{f=a,await h()};d.addEventListener(s,"click",async a=>{a.preventDefault(),u!=="date"||m==="asc"?v():S(),u="date",s.classList.add("active"),l.classList.remove("active"),await h()},!1),d.addEventListener(l,"click",async a=>{a.preventDefault(),u!=="filename"?S():m==="asc"?v():S(),u="filename",s.classList.remove("active"),l.classList.add("active"),await h()},!1),d.addEventListener(c,"click",async a=>{a.preventDefault(),v(),await h()},!1),d.addEventListener(i,"click",async a=>{a.preventDefault(),S(),await h()},!1),d.addEventListener(x,"change",async()=>{await g()},!1),B(W,"FlexSearch").then(async a=>{let t=new a.Document({index:["filename","type"],tokenize:"full",worker:!0});await Promise.all((await e()).map(r=>t.add(r))),d.addEventListener(b,"keyup",async()=>{o=(await t.searchAsync(b.value)).map(y=>y.result).flat(),await h()},!1)}),d.addEventListener(L,"click",async a=>{a.preventDefault(),u="date",m="desc",f="",o=[],s.classList.add("active"),l.classList.remove("active"),v(),x.value="",b.value="",await h()},!1)},$t=async({assetsStorage:e,eventsManager:n,showScreen:d,notifications:u,modal:m,baseUrl:f})=>{let o=document.createElement("div");o.innerHTML=ee;let s=o.firstChild,l=s.querySelector(".no-data"),c=s.querySelector("#assets-no-match.no-data"),i=s.querySelector("#assets-container"),x=document.createElement("ul");x.classList.add("open-list");let b=await e.getAllData(),L=b,T=se(s),h=ne(s);n.addEventListener(T,"click",()=>{d("add-asset")},!1),n.addEventListener(h,"click",async()=>{u.confirm(window.deps.translateString("assets.delete.all","Delete {{assets}} assets?",{assets:L.length}),async()=>{for(let g of L)await e.deleteItem(g.id);L=[],b=await e.getAllData(),await S(L)})},!1),i.appendChild(x);let S=async g=>{L=g,x.innerHTML="",g.forEach(a=>{let{deleteButton:t}=je(a,x,u,f);n.addEventListener(t,"click",()=>{u.confirm(window.deps.translateString("assets.delete.one","Delete asset: {{asset}}?",{asset:a.filename}),async()=>{await e.deleteItem(a.id),L=L.filter(y=>y.id!==a.id),t.parentElement.classList.add("hidden"),setTimeout(()=>{S(L)},500)})},!1)}),g.length===0?(x.classList.add("hidden"),h.classList.add("hidden"),(await e.getList()).length===0?(l.classList.remove("hidden"),c.classList.add("hidden")):(l.classList.add("hidden"),c.classList.remove("hidden"))):(x.classList.remove("hidden"),h.classList.remove("hidden"),l.classList.add("hidden"),c.classList.add("hidden"))};await S(b);let v=()=>e.getAllData();m.show(s,{isAsync:!0}),qe(v,S,n)},zt=({assetsStorage:e,eventsManager:n,showScreen:d,notifications:u,deployAsset:m,getUser:f,baseUrl:o,activeTab:s})=>{let l,c=document.createElement("div");c.innerHTML=te;let i=c.firstChild,x=i.querySelectorAll("#add-asset-tabs li"),b=y=>{x.forEach(E=>E.classList.remove("active")),y.classList.add("active"),document.querySelectorAll("#add-asset-screens > div").forEach(E=>{E.classList.remove("active")});let p=i.querySelector("#"+y.dataset.target);p?.classList.add("active"),p?.querySelector("input")?.focus()};x.forEach(y=>{n.addEventListener(y,"click",()=>b(y))}),setTimeout(()=>{s&&b(x[s])});let L=re(i),T=ae(i),h=ce(i),S=ie(i),v=le(i),g=pe(i);n.addEventListener(L,"click",()=>{d("assets")},!1);let a=(y,p=!1)=>new Promise((E,w)=>{if(y.files?.length===0)return;let M=y.files[0],C=2*1024*1024;if(M.size>C){w(window.deps.translateString("generic.error.exceededSize","Error: Exceeded size {{size}} MB",{size:2}));return}let k=new FileReader;n.addEventListener(k,"load",async q=>{let U="";if(p){if(!l){w(window.deps.translateString("assets.loadFile.error.unauthenticated","Error: Unauthenticated user"));return}v.innerText=window.deps.translateString("assets.loadFile.uploading","Uploading..."),v.classList.add("disabled");let A=await m(l,{path:M.name,content:q.target?.result.split("base64,")[1]});v.innerText=window.deps.translateString("assets.loadFile.upload","Upload file"),v.classList.remove("disabled"),A?U=A.url:w(window.deps.translateString("assets.loadFile.error.failedToUpload","Error: Failed to upload file"))}U=U||q.target?.result,E({id:R(),filename:M.name,type:Ae(M.type,M.name),url:U,lastModified:Date.now()})}),n.addEventListener(k,"error",()=>{w(window.deps.translateString("generic.error.failedToReadFile","Error: Failed to read file"))}),k.readAsDataURL(M)}),t=async(y,p,E=!1)=>{await e.updateItem(y.id,y);let w=document.createElement("p"),M=document.createElement("span");M.textContent=window.deps.translateString("assets.processAsset.addFile","Added file: "),M.classList.add("bold"),w.appendChild(M);let C=document.createElement("span");C.textContent+=y.filename,w.appendChild(C),w.classList.add("overflow-text"),p.appendChild(w);let k=document.createElement("p"),q=document.createElement("span");q.textContent=window.deps.translateString("assets.processAsset.urlLabel","URL: "),q.classList.add("bold"),k.appendChild(q);let U=document.createElement("span");if(U.textContent+=y.url,k.appendChild(U),k.classList.add("overflow-text"),p.appendChild(k),E){let H=document.createElement("p");H.textContent=window.deps.translateString("assets.processAsset.deployNotice","The asset should be available on this URL soon (~1 min)."),H.classList.add("description","center"),p.appendChild(H)}else{let H=document.createElement("img");H.src=me(y,o),H.onerror=function(){let P=o+"assets/images/image.svg";H.src!==P&&(H.src=P)},H.classList.add("img-preview-larger"),p.appendChild(H)}let A=document.createElement("p");A.textContent=window.deps.translateString("assets.generic.clickToCopyURL","Click to copy URL"),A.classList.add("description","center"),p.appendChild(A);let D=document.createElement("hr");D.style.margin="1em",p.appendChild(D),p.title=window.deps.translateString("assets.generic.clickToCopyURL","Click to copy URL"),u.success(window.deps.translateString("assets.processAsset.success","File added to assets!")),p.onclick=()=>de(y.url,u)},r=async(y,p,E=!1)=>{await a(y,E).then(w=>t(w,p,E)).catch(w=>{u.error(w)})};return n.addEventListener(T,"change",()=>{r(T,h)},!1),n.addEventListener(v,"click",async y=>{l=await f(async()=>{await d("add-asset",1)}),l||(y.preventDefault(),u.error(window.deps.translateString("generic.error.authentication","Authentication error!")))},!1),n.addEventListener(S,"change",()=>{r(S,g,!0)},!1),i},Ae=(e,n)=>{let d={"audio/aac":"audio","video/x-msvideo":"video","image/bmp":"image","application/x-bzip":"archive","application/x-bzip2":"archive","text/css":"stylesheet","text/csv":"csv","application/gzip":"archive","image/gif":"image","text/html":"html","image/vnd.microsoft.icon":"icon","image/jpeg":"image","text/javascript":"script","application/javascript":"script","application/json":"json","application/ld+json":"json","audio/midi":"audio","audio/x-midi":"audio","audio/mpeg":"audio","video/mp4":"video","video/mpeg":"video","audio/ogg":"audio","video/ogg":"video","application/ogg":"audio","audio/opus":"audio","font/otf":"font","image/png":"image","application/vnd.rar":"archive","image/svg+xml":"image","application/x-tar":"archive","image/tiff":"image","video/mp2t":"video","font/ttf":"font","text/plain":"text","audio/wav":"audio","audio/webm":"audio","video/webm":"video","image/webp":"image","font/woff":"font","font/woff2":"font","application/xhtml+xml":"html","application/xml":"xml","application/zip":"archive","video/3gpp":"video","video/3gpp2":"audio","application/x-7z-compressed":"archive"},u={aac:"audio",bmp:"image",bzip:"archive",bzip2:"archive",css:"stylesheet",csv:"csv",gzip:"archive",gif:"image",html:"html",ico:"icon",jpeg:"image",jpg:"image",js:"script",json:"json",midi:"audio",mpeg:"audio",mp4:"video",ogg:"audio",otf:"font",png:"image",rar:"archive",svg:"image",tar:"archive",tiff:"image",mp2t:"video",ttf:"font",txt:"text",wav:"audio",webm:"audio",webp:"image",woff:"font",woff2:"font",xml:"xml",zip:"archive","3gpp":"video","3gpp2":"audio","7z":"archive"},m=n.split(".")[n.split(".").length-1];return d[e]||u[m]||"other"},me=(e,n)=>{if(e.type==="image"||e.type==="icon")return e.url;let d=n+"assets/images/";return e.type==="other"?d+"file.svg":d+e.type+".svg"};export{zt as createAddAssetContainer,$t as createAssetsList};
