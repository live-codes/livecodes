var Ye=Object.defineProperty;var ko=Object.getOwnPropertyDescriptor;var Mo=Object.getOwnPropertyNames;var So=Object.prototype.hasOwnProperty;var wo=(o,r)=>{for(var s in r)Ye(o,s,{get:r[s],enumerable:!0})},Qe=(o,r,s,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let c of Mo(r))!So.call(o,c)&&c!==s&&Ye(o,c,{get:()=>r[c],enumerable:!(n=ko(r,c))||n.enumerable});return o},t=(o,r,s)=>(Qe(o,r,"default"),s&&Qe(s,r,"default"));import{Compartment as I,EditorState as Te}from"@codemirror/state";import{oneDark as yn}from"@codemirror/theme-one-dark";import{EditorView as D,keymap as K}from"@codemirror/view";import{indentWithTab as xn,undo as bn,redo as En}from"@codemirror/commands";import{defaultHighlightStyle as Ln,syntaxHighlighting as ao,indentUnit as Tn,HighlightStyle as kn}from"@codemirror/language";import{tags as Mn}from"@lezer/highlight";var Ze=()=>document.querySelector("#editor-mode");var Xe=()=>String(Math.random())+"-"+Date.now().toFixed();var tt=["esm.sh","skypack","esm.run","jsdelivr.esm","fastly.jsdelivr.esm","gcore.jsdelivr.esm","testingcf.jsdelivr.esm","jsdelivr.b-cdn.esm","jspm"],ot=["jsdelivr","fastly.jsdelivr","unpkg","gcore.jsdelivr","testingcf.jsdelivr","jsdelivr.b-cdn","npmcdn"],rt=["jsdelivr.gh","fastly.jsdelivr.gh","statically","gcore.jsdelivr.gh","testingcf.jsdelivr.gh","jsdelivr.b-cdn.gh"],B={getModuleUrl:(o,{isModule:r=!0,defaultCDN:s="esm.sh"}={})=>{o=o.replace(/#nobundle/g,"");let n=et(o,r,s);return n||(r?"https://esm.sh/"+o:"https://cdn.jsdelivr.net/npm/"+o)},getUrl:(o,r)=>o.startsWith("http")||o.startsWith("data:")?o:et(o,!1,r||vo())||o,cdnLists:{npm:ot,module:tt,gh:rt},checkCDNs:async(o,r)=>{let s=[r,...B.cdnLists.npm].filter(Boolean);for(let n of s)try{if((await fetch(B.getUrl(o,n),{method:"HEAD"})).ok)return n}catch{}return B.cdnLists.npm[0]}},vo=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||B.cdnLists.npm[0]}catch{return B.cdnLists.npm[0]}},et=(o,r,s)=>{let n=r&&o.startsWith("unpkg:")?"?module":"";o.startsWith("gh:")?o=o.replace("gh",rt[0]):o.includes(":")||(o=(s||(r?tt[0]:ot[0]))+":"+o);for(let c of Ao){let[l,i]=c;if(l.test(o))return o.replace(l,i)+n}return null},Ao=[[/^(esm\.sh:)(.+)/i,"https://esm.sh/$2"],[/^(npm:)(.+)/i,"https://esm.sh/$2"],[/^(node:)(.+)/i,"https://esm.sh/$2"],[/^(jsr:)(.+)/i,"https://esm.sh/jsr/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly\.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(gcore\.jsdelivr:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2"],[/^(testingcf\.jsdelivr:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2"],[/^(jsdelivr\.b-cdn:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2"],[/^(jsdelivr\.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(fastly\.jsdelivr\.gh:)(.+)/i,"https://fastly.jsdelivr.net/gh/$2"],[/^(gcore\.jsdelivr\.gh:)(.+)/i,"https://gcore.jsdelivr.net/gh/$2"],[/^(testingcf\.jsdelivr\.gh:)(.+)/i,"https://testingcf.jsdelivr.net/gh/$2"],[/^(jsdelivr\.b-cdn\.gh:)(.+)/i,"https://jsdelivr.b-cdn.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm\.run:)(.+)/i,"https://esm.run/$2"],[/^(jsdelivr\.esm:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2/+esm"],[/^(fastly\.jsdelivr\.esm:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2/+esm"],[/^(gcore\.jsdelivr\.esm:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2/+esm"],[/^(testingcf\.jsdelivr\.esm:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2/+esm"],[/^(jsdelivr\.b-cdn\.esm:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2/+esm"],[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle\.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(npmcdn:)(.+)/i,"https://npmcdn.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var{getUrl:v,getModuleUrl:qn}=B,P=v("@live-codes/browser-compilers@0.18.0/dist/");var nt=v("cm6-theme-basic-light@0.2.0/dist/index.js"),st=v("cm6-theme-basic-dark@0.2.0/dist/index.js"),ct=v("cm6-theme-gruvbox-light@0.2.0/dist/index.js"),at=v("cm6-theme-gruvbox-dark@0.2.0/dist/index.js"),it=v("cm6-theme-material-dark@0.2.0/dist/index.js"),lt=v("cm6-theme-nord@0.2.0/dist/index.js"),mt=v("cm6-theme-solarized-light@0.2.0/dist/index.js"),pt=v("cm6-theme-solarized-dark@0.2.0/dist/index.js");var dt=v("comlink@4.4.1/dist/");var q=v("@ddietr/codemirror-themes@1.4.2/dist/theme/");var L=v("thememirror@2.0.1/dist/themes/");var Ho=o=>{let r=o.trim(),s,n;return o.includes(":")&&([s,r]=r.split(":"),s!=="monaco"&&s!=="codemirror"&&s!=="codejar"&&(s=void 0)),o.includes("@")&&([r,n]=r.split("@"),n!=="light"&&n!=="dark"&&(n=void 0)),{editor:s,editorTheme:r,theme:n}},ut=({editor:o,editorTheme:r,theme:s,editorThemes:n})=>{if(!r)return null;let l=(typeof r=="string"?r.split(",").map(i=>i.trim()):r).map(Ho);for(let i of l)if((i.editor===o||i.editor===void 0)&&(i.theme===s||i.theme===void 0)&&n.includes(i.editorTheme))return i.editorTheme;return null};import{keymap as gt,highlightSpecialChars as ft,drawSelection as ht,highlightActiveLine as jo,dropCursor as Uo,rectangularSelection as Co,crosshairCursor as qo,lineNumbers as ae,highlightActiveLineGutter as Bo}from"@codemirror/view";import{EditorState as Io}from"@codemirror/state";import{defaultHighlightStyle as yt,syntaxHighlighting as xt,indentOnInput as Do,bracketMatching as No,foldGutter as Ro,foldKeymap as Po}from"@codemirror/language";import{defaultKeymap as bt,history as Et,historyKeymap as Lt}from"@codemirror/commands";import{searchKeymap as $o,highlightSelectionMatches as Fo}from"@codemirror/search";import{autocompletion as Oo,completionKeymap as Wo,closeBrackets as ie,closeBracketsKeymap as Vo}from"@codemirror/autocomplete";import{lintKeymap as zo}from"@codemirror/lint";import{EditorView as Gn}from"@codemirror/view";var Tt=[Bo(),ft(),Et(),Ro(),ht(),Uo(),Io.allowMultipleSelections.of(!0),Do(),xt(yt,{fallback:!0}),No(),Oo(),Co(),qo(),jo(),Fo(),gt.of([...Vo,...bt,...$o,...Lt,...Po,...Wo,...zo])],Wn=[ft(),Et(),ht(),xt(yt,{fallback:!0}),gt.of([...bt,...Lt])];import{LanguageSupport as Go,StreamLanguage as Ko}from"@codemirror/language";var k=o=>new Go(Ko.define(o)),h=o=>`./vendor/codemirror/v6.0.1/${o}`,u={core:h("codemirror-core.js"),vue:h("codemirror-lang-vue.js"),json:h("codemirror-lang-json.js"),markdown:h("codemirror-lang-markdown.js"),python:h("codemirror-lang-python.js"),php:h("codemirror-lang-php.js"),cpp:h("codemirror-lang-cpp.js"),sql:h("codemirror-lang-sql.js"),wast:h("codemirror-lang-wast.js"),scss:h("codemirror-lang-scss.js"),coffeescript:h("codemirror-lang-coffeescript.js"),livescript:h("codemirror-lang-livescript.js"),ruby:h("codemirror-lang-ruby.js"),go:h("codemirror-lang-go.js"),perl:h("codemirror-lang-perl.js"),lua:h("codemirror-lang-lua.js"),r:h("codemirror-lang-r.js"),julia:h("codemirror-lang-julia.js"),scheme:h("codemirror-lang-scheme.js"),clojure:h("codemirror-lang-clojure.js"),tcl:h("codemirror-lang-tcl.js"),less:h("codemirror-lang-less.js"),stylus:h("codemirror-lang-stylus.js"),rust:h("codemirror-lang-rust.js"),swift:h("codemirror-lang-swift.js")},le={html:async()=>(await import(u.core)).html(),css:async()=>(await import(u.core)).css(),javascript:async()=>(await import(u.core)).javascript(),typescript:async()=>(await import(u.core)).javascript({typescript:!0}),jsx:async()=>(await import(u.core)).javascript({jsx:!0}),tsx:async()=>(await import(u.core)).javascript({jsx:!0,typescript:!0}),json:async()=>(await import(u.core)).json(),vue:async()=>(await import(u.vue)).vue(),markdown:async()=>(await import(u.markdown)).markdown(),python:async()=>(await import(u.python)).python(),php:async()=>(await import(u.php)).php(),cpp:async()=>(await import(u.cpp)).cpp(),sql:async()=>(await import(u.sql)).sql(),wat:async()=>(await import(u.wast)).wast(),scss:async()=>(await import(u.scss)).sass(),sass:async()=>(await import(u.scss)).sass({indented:!0}),coffeescript:async()=>k((await import(u.coffeescript)).coffeeScript),livescript:async()=>k((await import(u.livescript)).liveScript),ruby:async()=>k((await import(u.ruby)).ruby),go:async()=>k((await import(u.go)).go),perl:async()=>k((await import(u.perl)).perl),lua:async()=>k((await import(u.lua)).lua),r:async()=>k((await import(u.r)).r),julia:async()=>k((await import(u.julia)).julia),scheme:async()=>k((await import(u.scheme)).scheme),clojure:async()=>k((await import(u.clojure)).clojure),tcl:async()=>k((await import(u.tcl)).tcl),less:async()=>k((await import(u.less)).less),stylus:async()=>k((await import(u.stylus)).stylus),rust:async()=>k((await import(u.rust)).rust),swift:async()=>k((await import(u.swift)).swift)};import{Decoration as pe,EditorView as _o,ViewPlugin as Jo,WidgetType as Qo}from"@codemirror/view";import{getIndentUnit as Mt}from"@codemirror/language";import{RangeSet as Yo}from"@codemirror/state";var Zo=pe.mark({class:"cm-indentation-marker",tagName:"span"}),Xo=pe.mark({class:"cm-indentation-marker active",tagName:"span"}),me=class extends Qo{constructor(r,s,n){super(),this.numIndent=r,this.indentSize=s,this.activeIndent=n}eq(r){return this.numIndent===r.numIndent&&this.indentSize===r.indentSize&&this.activeIndent===r.activeIndent}toDOM(r){let s=Mt(r.state),n=document.createElement("span");n.style.top="0",n.style.left="4px",n.style.position="absolute",n.style.pointerEvents="none";for(let c=0;c<this.numIndent;c++){let l=document.createElement("span");l.className="cm-indentation-marker",l.classList.toggle("active",c===this.activeIndent),l.innerHTML=" ".repeat(s),n.appendChild(l)}return n}};function St(o,r,s){let n=0,c=0,l=null;for(let i=0;i<o.length;i++){if(o[i]!==" "&&o[i]!=="	")return c%r===0&&i!==0&&n++,n;(l==="	"||c%r===0)&&(n++,s&&s(i)),o[i]===" "?c++:c=0,l=o[i]}return n}function er(o,r){let s=Math.min(o,r),n=Math.max(o,r);return s===0&&n>0?1:s===n&&s>0?s-1:s}function tr(o,r,s){let n=o.lines,c=r;for(;c<=n;){let{text:l}=o.line(c);if(l.trim().length===0){c++;continue}let i=St(l,s);return[c,i]}return[n+1,0]}function kt(o){let r=Mt(o.state),s=new Map,n=[];for(let{from:l,to:i}of o.visibleRanges){let m=l,f=0,p=0,x=0;for(;m<=i;){let b=o.state.doc.lineAt(m),{text:A}=b;if(A.trim().length===0){if(x<b.number){let[T,H]=tr(o.state.doc,b.number+1,r);x=T,p=H}let S=er(f,p);s.set(b.number,S),n.push({from:m,to:m,lineNumber:b.number,create:T=>pe.widget({widget:new me(S,r,T)})})}else{let S=[];f=St(A,r,T=>S.push(T)),s.set(b.number,S.length),n.push(...S.map((T,H)=>({from:b.from+T,to:b.from+T+1,lineNumber:b.number,create:j=>j===H?Xo:Zo})))}m=b.to+1}}let c=or(o.state,s);return Yo.of(Array.from(n).map(({lineNumber:l,from:i,to:m,create:f})=>{let p=l>=c.start&&l<=c.end?c.activeIndent-1:void 0;return{from:i,to:m,value:f(p)}}),!0)}function or(o,r){let s=o.doc.lineAt(o.selection.main.head),n=r.get(s.number),c=s.number,l=r.get(c+1);l&&n!=null&&l>n&&(n=l,c++);let i=r.get(c-1);if(i&&n!=null&&i>n&&(n=i,c--),!n)return{start:-1,end:-1,activeIndent:NaN};let m,f;for(m=c;m>=0;m--){let p=r.get(m-1);if(!p||p<n)break}for(f=c;;f++){let p=r.get(f+1);if(!p||p<n)break}return{start:m,end:f,activeIndent:n}}function rr(){return Jo.define(o=>({decorations:kt(o),update(r){(r.docChanged||r.viewportChanged||r.selectionSet)&&(this.decorations=kt(r.view))}}),{decorations:o=>o.decorations})}var nr=_o.baseTheme({".cm-line":{position:"relative"},".cm-indentation-marker":{display:"inline-block"},"&light .cm-indentation-marker":{background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") left repeat-y'},"&light .cm-indentation-marker.active":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACAQMAAACjTyRkAAAABlBMVEX///+goKD0a5EfAAAADElEQVR4nGNgYGgAAACEAIHJde6SAAAAAElFTkSuQmCC) left repeat-y"},"&dark .cm-indentation-marker":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHB3d/8PAAOIAdULw8qMAAAAAElFTkSuQmCC) left repeat-y"},"&dark .cm-indentation-marker.active":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACAQMAAACjTyRkAAAABlBMVEUAAACFhYWZv3sFAAAAAnRSTlMA/1uRIrUAAAAMSURBVHicY2BgaAAAAIQAgcl17pIAAAAASUVORK5CYII=) left repeat-y"}});function de(){return[rr(),nr]}import{insertNewlineAndIndent as wt,cursorCharLeft as vt,selectCharLeft as At,cursorGroupLeft as sr,selectGroupLeft as cr,cursorCharRight as Ht,selectCharRight as jt,cursorGroupRight as ar,selectGroupRight as ir,cursorLineUp as Ut,selectLineUp as Ct,cursorLineDown as qt,selectLineDown as Bt,cursorLineBoundaryBackward as It,selectLineBoundaryBackward as Dt,cursorDocStart as Nt,selectDocStart as Rt,cursorPageUp as ue,selectPageUp as Pt,cursorPageDown as ge,selectPageDown as $t,cursorLineBoundaryForward as Ft,selectLineBoundaryForward as Ot,cursorDocEnd as Wt,selectDocEnd as Vt,selectAll as lr,deleteCharBackward as fe,deleteCharForward as zt,deleteGroupBackward as Gt,deleteGroupForward as mr,deleteToLineStart as pr,deleteToLineEnd as Kt,cursorLineStart as dr,selectLineStart as ur,cursorLineEnd as gr,selectLineEnd as fr,splitLine as hr,transposeChars as yr,deleteLine as xr,moveLineDown as br,moveLineUp as Er,copyLineDown as Lr,copyLineUp as Tr,selectLine as kr,cursorMatchingBracket as Mr,indentMore as _t,indentLess as Jt,lineComment as Sr,lineUncomment as wr,toggleComment as vr,toggleBlockComment as Ar,undo as Hr,redo as Qt,undoSelection as jr}from"@codemirror/commands";import{openSearchPanel as Ur,closeSearchPanel as Cr,selectMatches as qr,replaceAll as Br,gotoLine as Ir,selectNextOccurrence as Dr,selectSelectionMatches as Nr}from"@codemirror/search";import{foldCode as Rr,unfoldCode as Pr,foldAll as $r,unfoldAll as Fr}from"@codemirror/language";import{startCompletion as Or,closeCompletion as Wr,moveCompletionSelection as V,acceptCompletion as Yt,deleteBracketPair as Vr}from"@codemirror/autocomplete";import{openLintPanel as zr,nextDiagnostic as Gr}from"@codemirror/lint";import{EditorSelection as Zt}from"@codemirror/state";var Xt=o=>r=>{let s=o==="down",n=r.state.selection;for(let c of n.ranges)n=n.addRange(r.moveVertically(c,s));return r.dispatch({selection:n}),!0},Kr=Xt("up"),_r=Xt("down"),Jr=o=>{let r=null;for(let s of o.state.selection.ranges)if(!s.empty)for(let n=s.from;n<=s.to;){let c=o.state.doc.lineAt(n),l=Math.min(c.to,s.to);r?r=r.addRange(Zt.range(l,l)):r=Zt.single(l),n=c.to+1}return r?(o.dispatch({selection:r}),!0):!1},he=[{key:"Ctrl-Space",run:Or},{key:"Escape",run:Wr},{key:"ArrowDown",run:V(!0)},{key:"ArrowUp",run:V(!1)},{key:"PageDown",run:V(!0,"page")},{key:"PageUp",run:V(!1,"page")},{key:"Enter",run:Yt},{key:"Tab",run:Yt},{key:"Mod-f",run:Ur,scope:"editor search-panel"},{key:"Escape",run:Cr,scope:"editor search-panel"},{key:"Alt-Enter",run:qr,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:Br,scope:"editor search-panel"},{key:"Ctrl-g",run:Ir},{key:"Mod-d",run:Dr,preventDefault:!0},{key:"Shift-Mod-l",run:Nr},{key:"Enter",run:wt,shift:wt},{key:"ArrowLeft",run:vt,shift:At,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:sr,shift:cr},{key:"ArrowRight",run:Ht,shift:jt,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:ar,shift:ir},{key:"ArrowUp",run:Ut,shift:Ct,preventDefault:!0},{key:"ArrowDown",run:qt,shift:Bt,preventDefault:!0},{key:"Home",run:It,shift:Dt},{mac:"Cmd-ArrowLeft",run:It,shift:Dt},{key:"Mod-Home",run:Nt,shift:Rt},{mac:"Cmd-ArrowUp",run:Nt,shift:Rt},{key:"PageUp",run:ue,shift:Pt},{mac:"Ctrl-ArrowUp",run:ue,shift:Pt},{key:"PageDown",run:ge,shift:$t},{mac:"Ctrl-ArrowDown",run:ge,shift:$t},{key:"End",run:Ft,shift:Ot},{mac:"Cmd-ArrowRight",run:Ft,shift:Ot},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Kr,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:_r,preventDefault:!0},{key:"Shift-Alt-i",run:Jr},{key:"Mod-End",run:Wt,shift:Vt},{mac:"Cmd-ArrowDown",run:Wt,shift:Vt},{key:"Mod-a",run:lr},{key:"Backspace",run:Vr},{key:"Backspace",run:fe,shift:fe},{key:"Delete",run:zt},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Gt},{key:"Mod-Delete",mac:"Alt-Delete",run:mr},{mac:"Mod-Backspace",run:pr},{mac:"Mod-Delete",run:Kt},{mac:"Ctrl-b",run:vt,shift:At,preventDefault:!0},{mac:"Ctrl-f",run:Ht,shift:jt},{mac:"Ctrl-p",run:Ut,shift:Ct},{mac:"Ctrl-n",run:qt,shift:Bt},{mac:"Ctrl-a",run:dr,shift:ur},{mac:"Ctrl-e",run:gr,shift:fr},{mac:"Ctrl-d",run:zt},{mac:"Ctrl-h",run:fe},{mac:"Ctrl-k",run:Kt},{mac:"Ctrl-Alt-h",run:Gt},{mac:"Ctrl-o",run:hr},{mac:"Ctrl-t",run:yr},{mac:"Ctrl-v",run:ge},{mac:"Alt-v",run:ue},{key:"Shift-Mod-k",run:xr},{key:"Alt-ArrowDown",run:br},{key:"Alt-ArrowUp",run:Er},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Lr},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Tr},{key:"Mod-l",run:kr,preventDefault:!0},{key:"Shift-Mod-\\",run:Mr},{key:"Tab",run:_t,shift:Jt,preventDefault:!0},{key:"Mod-[",run:Jt},{key:"Mod-]",run:_t},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Rr},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Pr},{key:"Mod-k Mod-0",run:$r},{key:"Mod-k Mod-j",run:Fr},{key:"Mod-k Mod-c",run:Sr},{key:"Mod-k Mod-u",run:wr},{key:"Mod-/",run:vr},{key:"Shift-Alt-a",run:Ar},{key:"Mod-z",run:Hr,preventDefault:!0},{key:"Mod-y",run:Qt,preventDefault:!0},{key:"Mod-Shift-z",run:Qt,preventDefault:!0},{key:"Mod-u",run:jr,preventDefault:!0},{key:"Mod-Shift-m",run:zr},{key:"F8",run:Gr}];import{EditorView as Qr,ViewPlugin as Yr,Decoration as $,WidgetType as Zr}from"@codemirror/view";import{syntaxTree as Xr}from"@codemirror/language";var be=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkgrey","#a9a9a9"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkslategrey","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["goldenrod","#daa520"],["gold","#ffd700"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["grey","#808080"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavenderblush","#fff0f5"],["lavender","#e6e6fa"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgray","#d3d3d3"],["lightgreen","#90ee90"],["lightgrey","#d3d3d3"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370db"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#db7093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["slategrey","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]),en=function(o,r){var s={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.indexOf(n)<0&&(s[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,n=Object.getOwnPropertySymbols(o);c<n.length;c++)r.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(o,n[c])&&(s[n[c]]=o[n[c]]);return s},ro=new WeakMap,U=function(o){return o.rgb="RGB",o.hex="HEX",o.named="NAMED",o.hsl="HSL",o}(U||(U={})),tn=/rgb\(\s*(\d{1,3}%?)\s*,?\s*(\d{1,3}%?)\s*,?\s*(\d{1,3}%?)\s*(,\s*0?\.\d+)?\)/,on=/hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(,\s*0?\.\d+)?\)/;function eo(o){let r=[];for(let s of o.visibleRanges)Xr(o.state).iterate({from:s.from,to:s.to,enter:({type:n,from:c,to:l})=>{if(n.name==="CallExpression"){let i=o.state.doc.sliceString(c,l);if(i.startsWith("rgb")){let m=tn.exec(i);if(!m)return;let[f,p,x,b,A]=m,S=nn(p,x,b),T=$.widget({widget:new R({colorType:U.rgb,color:S,from:c,to:l,alpha:A||""}),side:1});r.push(T.range(c));return}if(i.startsWith("hsl")){let m=on.exec(i);if(!m)return;let[f,p,x,b,A]=m,S=sn(p,x,b),T=$.widget({widget:new R({colorType:U.hsl,color:S,from:c,to:l,alpha:A||""}),side:1});r.push(T.range(c));return}}if(n.name==="ColorLiteral"){let[i,m]=rn(o.state.doc.sliceString(c,l)),f=$.widget({widget:new R({colorType:U.hex,color:i,from:c,to:l,alpha:m}),side:1});r.push(f.range(c))}if(n.name==="ValueName"){let i=o.state.doc.sliceString(c,l);if(be.has(i)){let m=be.get(i),f=$.widget({widget:new R({colorType:U.named,color:m,from:c,to:l,alpha:""}),side:1});r.push(f.range(c))}}}});return $.set(r)}function rn(o){return o.length===4?[`#${o[1].repeat(2)}${o[2].repeat(2)}${o[3].repeat(2)}`,""]:o.length===5?[`#${o[1].repeat(2)}${o[2].repeat(2)}${o[3].repeat(2)}`,o[4].repeat(2)]:o.length===9?[`#${o.slice(1,-2)}`,o.slice(-2)]:[o,""]}function ye(o){let r;if(o.endsWith("%")){let s=Number(o.slice(0,-1));r=Math.round(s/100*255)}else r=Number(o);return z(r)}function z(o){let r=o.toString(16);return r.length==1?"0"+r:r}function to(o){let r=o.slice(1,3),s=o.slice(3,5),n=o.slice(5,7);return[parseInt(r,16),parseInt(s,16),parseInt(n,16)]}function nn(o,r,s){return`#${ye(o)}${ye(r)}${ye(s)}`}function sn(o,r,s){let n=Number(r)/100,c=Number(s)/100,[l,i,m]=cn(Number(o),n,c);return`#${z(l)}${z(i)}${z(m)}`}function cn(o,r,s){if(r===0){let b=Math.round(s*255);return[b,b,b]}let n;s<.5?n=s*(1+r):n=s+r-s*r;let c=2*s-n;o=o/360;let l=oo(o+.333),i=o,m=oo(o-.333),f=xe(n,c,l),p=xe(n,c,i),x=xe(n,c,m);return[Math.round(f*255),Math.round(p*255),Math.round(x*255)]}function oo(o){return o<0?o+1:o>1?o-1:o}function xe(o,r,s){return 6*s<1?r+(o-r)*6*s:2*s<1?o:3*s<2?r+(o-r)*(.666-s)*6:r}function an(o,r,s){let n=o/255,c=r/255,l=s/255,i=Math.min(n,c,l),m=Math.max(n,c,l),f=(m+i)/2;if(m===i)return[0,0,f];let p;f<=.5?p=(m-i)/(m+i):p=(m-i)/(2-m-i);let x;for(m===n?x=(c-l)/(m-i):c===m?x=2+(l-n)/(m-i):x=4+(n-c)/(m-i),x=Math.round(x*60);x<0;)x+=360;return[x,p,f]}var G="cm-css-color-picker-wrapper",R=class extends Zr{constructor(r){var{color:s}=r,n=en(r,["color"]);super(),this.state=n,this.color=s}eq(r){return r.state.colorType===this.state.colorType&&r.color===this.color&&r.state.from===this.state.from&&r.state.to===this.state.to&&r.state.alpha===this.state.alpha}toDOM(){let r=document.createElement("input");ro.set(r,this.state),r.type="color",r.value=this.color;let s=document.createElement("span");return s.appendChild(r),s.className=G,s}ignoreEvent(){return!1}},ln=Qr.baseTheme({[`.${G}`]:{display:"inline-block",outline:"1px solid #eee",marginRight:"0.6ch",height:"1em",width:"1em",transform:"translateY(1px)"},[`.${G} input[type="color"]`]:{cursor:"pointer",height:"100%",width:"100%",padding:0,border:"none","&::-webkit-color-swatch-wrapper":{padding:0},"&::-webkit-color-swatch":{border:"none"},"&::-moz-color-swatch":{border:"none"}}}),mn=Yr.fromClass(class{constructor(r){this.decorations=eo(r)}update(r){(r.docChanged||r.viewportChanged)&&(this.decorations=eo(r.view))}},{decorations:o=>o.decorations,eventHandlers:{change:(o,r)=>{let s=o.target;if(s.nodeName!=="INPUT"||!s.parentElement||!s.parentElement.classList.contains(G))return!1;let n=ro.get(s),c=s.value+n.alpha;if(n.colorType===U.rgb)c=`rgb(${to(s.value).join(", ")}${n.alpha})`;else if(n.colorType===U.named)for(let[l,i]of be.entries())i===s.value&&(c=l);else if(n.colorType===U.hsl){let[l,i,m]=to(s.value),[f,p,x]=an(l,i,m);c=`hsl(${f}, ${Math.round(p*100)}%, ${Math.round(x*100)}%${n.alpha})`}return r.dispatch({changes:{from:n.from,to:n.to,insert:c}}),!0}}}),Ee=[mn,ln];import{lineNumbers as fs,highlightActiveLineGutter as hs,highlightSpecialChars as ys,drawSelection as xs,dropCursor as bs,rectangularSelection as Es,crosshairCursor as Ls,highlightActiveLine as Ts,keymap as ks}from"@codemirror/view";import{EditorView as no}from"@codemirror/view";import{EditorState as Ss}from"@codemirror/state";import{foldGutter as vs,indentOnInput as As,syntaxHighlighting as Hs,defaultHighlightStyle as js,bracketMatching as Us,foldKeymap as Cs}from"@codemirror/language";import{history as Bs,defaultKeymap as Is,historyKeymap as Ds}from"@codemirror/commands";import{highlightSelectionMatches as Rs,searchKeymap as Ps}from"@codemirror/search";import{closeBrackets as Fs,autocompletion as Os,closeBracketsKeymap as Ws,completionKeymap as Vs}from"@codemirror/autocomplete";import{lintKeymap as Gs}from"@codemirror/lint";import{HighlightStyle as pn,syntaxHighlighting as dn}from"@codemirror/language";var Le=[{name:"amy",title:"Amy",url:L+"amy.js",exportName:"amy"},{name:"aura",title:"Aura",url:q+"aura.js",exportName:"aura"},{name:"ayu-light",title:"Ayu Light",url:L+"ayu-light.js",exportName:"ayuLight"},{name:"barf",title:"Barf",url:L+"barf.js",exportName:"barf"},{name:"basic-light",title:"Basic Light",url:nt,exportName:"basicLight"},{name:"basic-dark",title:"Basic Dark",url:st,exportName:"basicDark"},{name:"bespin",title:"Bespin",url:L+"bespin.js",exportName:"bespin"},{name:"birds-of-paradise",title:"Birds of Paradise",url:L+"birds-of-paradise.js",exportName:"birdsOfParadise"},{name:"boys-and-girls",title:"Boys and Girls",url:L+"boys-and-girls.js",exportName:"boysAndGirls"},{name:"catppuccin-latte",title:"Catppuccin Latte",url:P+"catppuccin/codemirror/codemirror-theme-catppuccin.js",exportName:"catppuccinLatte"},{name:"catppuccin-frappe",title:"Catppuccin Frappe",url:P+"catppuccin/codemirror/codemirror-theme-catppuccin.js",exportName:"catppuccinFrappe"},{name:"catppuccin-macchiato",title:"Catppuccin Macchiato",url:P+"catppuccin/codemirror/codemirror-theme-catppuccin.js",exportName:"catppuccinMacchiato"},{name:"catppuccin-mocha",title:"Catppuccin Mocha",url:P+"catppuccin/codemirror/codemirror-theme-catppuccin.js",exportName:"catppuccinMocha"},{name:"clouds",title:"Clouds",url:L+"clouds.js",exportName:"clouds"},{name:"cobalt",title:"Cobalt",url:L+"cobalt.js",exportName:"cobalt"},{name:"cm-light",title:"Codemirror Light"},{name:"cool-glow",title:"Cool Glow",url:L+"cool-glow.js",exportName:"coolGlow"},{name:"dracula",title:"Dracula",url:L+"dracula.js",exportName:"dracula"},{name:"espresso",title:"Espresso",url:L+"espresso.js",exportName:"espresso"},{name:"github-dark",title:"GitHub Dark",url:q+"github-dark.js",exportName:"githubDark"},{name:"github-light",title:"GitHub Light",url:q+"github-light.js",exportName:"githubLight"},{name:"gruvbox-dark",title:"Gruvbox Dark",url:at,exportName:"gruvboxDark"},{name:"gruvbox-light",title:"Gruvbox Light",url:ct,exportName:"gruvboxLight"},{name:"material-dark",title:"Material Dark",url:it,exportName:"materialDark"},{name:"material-light",title:"Material Light",url:q+"material-light.js",exportName:"materialLight"},{name:"monochrome",title:"Monochrome"},{name:"monochrome-dark",title:"Monochrome Dark"},{name:"noctis-lilac",title:"Noctis Lilac",url:L+"noctis-lilac.js",exportName:"noctisLilac"},{name:"nord",title:"Nord",url:lt,exportName:"nord"},{name:"one-dark",title:"One Dark"},{name:"rose-pine-dawn",title:"Ros\xE9 Pine Dawn",url:L+"rose-pine-dawn.js",exportName:"rosePineDawn"},{name:"smoothy",title:"Smoothy",url:L+"smoothy.js",exportName:"smoothy"},{name:"solarized-dark",title:"Solarized Dark",url:pt,exportName:"solarizedDark"},{name:"solarized-light",title:"Solarized Light",url:mt,exportName:"solarizedLight"},{name:"tokyo-night",title:"Tokyo Night",url:q+"tokyo-night.js",exportName:"tokyoNight"},{name:"tokyo-night-day",title:"Tokyo Night Day",url:q+"tokyo-night-day.js",exportName:"tokyoNightDay"},{name:"tokyo-night-storm",title:"Tokyo Night Storm",url:q+"tokyo-night-storm.js",exportName:"tokyoNightStorm"},{name:"tomorrow",title:"Tomorrow",url:L+"tomorrow.js",exportName:"tomorrow"}],so=({variant:o,settings:r,styles:s})=>{let n=no.theme({"&":{backgroundColor:r.background,color:r.foreground},".cm-content":{caretColor:r.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:r.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-selectionMatch, .cm-content ::selection":{backgroundColor:r.selection},".cm-activeLine":{backgroundColor:r.lineHighlight},".cm-gutters":{backgroundColor:r.gutterBackground,color:r.gutterForeground},".cm-activeLineGutter":{backgroundColor:r.lineHighlight}},{dark:o==="dark"}),c=pn.define(s);return[n,dn(c)]},co={monochrome:so({variant:"light",settings:{background:"#fffffe",foreground:"#24292e",caret:"#24292e",selection:"#c8c8fa",gutterBackground:"#fffffe",gutterForeground:"#24292e",lineHighlight:"#f1faff"},styles:[]}),"monochrome-dark":so({variant:"dark",settings:{background:"#24292e",foreground:"#e2e2e3",caret:"#e2e2e3",selection:"#444d56",gutterBackground:"#24292e",gutterForeground:"#e2e2e3",lineHighlight:"#444d56"},styles:[]})};var e={};wo(e,{html:()=>un,htmlCompletionSource:()=>gn,htmlCompletionSourceWith:()=>fn,htmlLanguage:()=>hn});t(e,Xs);t(e,ec);t(e,tc);t(e,oc);t(e,rc);t(e,nc);t(e,sc);t(e,ac);t(e,ic);t(e,lc);t(e,mc);t(e,pc);t(e,dc);t(e,uc);import*as Xs from"@codemirror/autocomplete";import*as ec from"@codemirror/commands";import*as tc from"@codemirror/language";import*as oc from"@codemirror/lint";import*as rc from"@codemirror/search";import*as nc from"@codemirror/state";import*as sc from"@codemirror/view";import{html as un,htmlCompletionSource as gn,htmlCompletionSourceWith as fn,htmlLanguage as hn}from"@codemirror/lang-html";import*as ac from"@codemirror/lang-css";import*as ic from"@codemirror/lang-javascript";import*as lc from"@codemirror/lang-json";import*as mc from"@codemirror/theme-one-dark";import*as pc from"@lezer/common";import*as dc from"@lezer/highlight";import*as uc from"@lezer/lr";var _=[],ke,Hc=async o=>{let{baseUrl:r,container:s,readonly:n,isEmbed:c,editorId:l,getFormatterConfig:i,getFontFamily:m,getLanguageExtension:f}=o,p={...o};if(!s)throw new Error("editor container not found");let x=async a=>le[a]?.()||le.html?.(),b=a=>["vue","vue3","vue2"].includes(a)?"vue":o.mapLanguage?.(a)||a,A={"one-dark":yn,"cm-light":[ao(Ln),D.theme({"&":{backgroundColor:"#ffffff"}})],...co},S={dark:"one-dark",light:"cm-light"},T=()=>A[Me]||A[S[o.theme]]||[],H=o.language,j=b(H),J=await x(j),Me=await ze(o.theme,o.editorTheme),F=[],Q=[],io=a=>{a.docChanged&&Q.forEach(d=>d(a))},C,Y,Z,X,ee,Se=a=>j==="typescript"?a:j==="javascript"?a.slice(0,-1):[],we,ve=new Promise(a=>we=a),Ae=async(a=!1)=>{let d=C&&a?"changeCodeMirrorLanguage":"initCodeMirrorTS";if(a&&(C=void 0),!["typescript","javascript"].includes(j)||C)return;let g=`${r}vendor/codemirror/v6.0.1/codemirror-ts.js`,[E,M,w]=await Promise.all([import(g),import(dt+"esm/comlink.min.js"),window.compiler.typescriptFeatures({feature:d,payload:H})]),{tsFacetWorker:N,tsSyncWorker:ce,tsLinterWorker:O,tsAutocompleteWorker:xo,tsHoverWorker:bo}=E;if(!ke){let _e=document.querySelector("#compiler-frame");if(!_e?.contentWindow)return;let Je=M.wrap(M.windowEndpoint(_e.contentWindow));await Je.initialize(),ke=Je}let Eo=Xe(),W=f(H),Lo=j==="typescript"&&!W?.endsWith("ts")&&!W?.endsWith("tsx")?W+".tsx":W,To=`/${l}.${Eo}.${Lo}`;C=C||[N.of({worker:ke,path:To}),ce(),(0,e.autocompletion)({override:[xo()]}),bo(),O()],y.dispatch({effects:[Ue.reconfigure(Se(C))]})},lo=a=>{ve.then(()=>{window.compiler.typescriptFeatures({feature:"addTypes",payload:a})})},He=async a=>{let d={vim:"./vendor/codemirror/v6.0.1/codemirror-vim.js",emacs:"./vendor/codemirror/v6.0.1/codemirror-emacs.js",emmet:"./vendor/codemirror/v6.0.1/codemirror-emmet.js",codeium:"./vendor/codemirror/v6.0.1/codemirror-codeium.js"},[g,E,M,w]=await Promise.all([a.editorMode==="vim"?import(d.vim):Promise.resolve({}),a.editorMode==="emacs"?import(d.emacs):Promise.resolve({}),a.emmet?import(d.emmet):Promise.resolve({}),a.enableAI?import(d.codeium):Promise.resolve({})]);Y=g.vim,Z=E.emacs,X=M.emmet,ee=w.codeium};await He(o);let je=new I,Ue=new I,Ce=new I,qe=new I,te=D.editable.of(!1),Be=new I,Ie=new I,De=new I,mo=kn.define([{tag:Mn.comment,fontStyle:"italic"}]),Ne=a=>{let d=(a.fontSize??p.fontSize)||(c?12:14),g=m(a.fontFamily??p.fontFamily),E=a.tabSize??p.tabSize,M=a.useTabs??p.useTabs,w=a.wordWrap??p.wordWrap,N=a.emmet??p.emmet,ce=a.enableAI??p.enableAI,O=a.editorMode??p.editorMode;return[Te.tabSize.of(E),Tn.of(M?"	":" ".repeat(E)),...w?[D.lineWrapping]:[],...O==="vim"&&Y?[Y()]:O==="emacs"&&Z?[Z()]:[],...N&&X?[X]:[],...ce&&ee?[ee(_,b)]:[],D.theme({"&":{height:"100%",fontSize:d+"px"},".cm-scroller":{overflow:"auto",fontFamily:g}})]},Re=()=>{let a=[je.of(J),Ue.of(["typescript","javascript"].includes(j)&&C?Se(C):[]),D.updateListener.of(io),qe.of(T()),ao(mo),Be.of(Ne({})),Ce.of(K.of(F)),Ie.of(p.lineNumbers?ae():[]),De.of(p.closeBrackets?ie():[]),Tt,n?te:[],K.of([xn]),K.of(he),de(),Ee],d=[te,...a],g=[te,...a],E=[...a];return l==="console"?E:l==="compiled"?g:o.mode==="codeblock"?d:a},Pe=async a=>{let d=Ze(),g=E=>{d&&(d.textContent=E)};a||g(""),a==="vim"&&g("Vim"),a==="emacs"&&g("Emacs")},y=new D({state:Te.create({extensions:Re(),doc:o.value}),parent:s});Pe(o.editorMode);let po=()=>l,oe=()=>y.state.doc.toString(),re=(a="",d=!0)=>{d?y.setState(Te.create({doc:a,extensions:Re()})):y.dispatch({changes:{from:0,to:y.state.doc.length,insert:a}})},$e=()=>y.focus(),Fe=()=>H,uo=(a,d)=>{H=a,j=b(H),x(j).then(g=>{J=g,y.dispatch({effects:[je.reconfigure(J)]})}),ve.then(()=>{Ae(!0)}),d!=null&&re(d)},Oe={editorId:l,getLanguage:Fe,getValue:oe};_.push(Oe),Ae().then(()=>{we()});let go=a=>{Q.push(a)},We={CtrlEnter:"Ctrl-Enter",ShiftEnter:"Shift-Enter",Enter:"Enter",UpArrow:"ArrowUp",DownArrow:"ArrowDown",ShiftAltF:"Shift-Alt-f"},ne=(a,d,g)=>{F.push({key:d,run(){return g(),!0}}),y.dispatch({effects:Ce.reconfigure(K.of(F))})},se,fo=a=>{a&&(se=a,ne("format",We.ShiftAltF,async()=>{await Ve(),$e()}))},Ve=async()=>{if(!se)return;let a=y.state.selection.main.to,d=oe(),g=await se(d,a,i());re(g.formatted,!1);let E=g.cursorOffset>=0?g.cursorOffset:0;y.dispatch({selection:{anchor:E}})};async function ze(a,d){let g=ut({editor:"codemirror",editorTheme:d,theme:a,editorThemes:Le.map(w=>w.name)}),E=g||S[a],M=Le.find(w=>w.name===E);if(!A[E]&&M?.url){let w=(await import(M.url))[M.exportName||"default"];A[E]=w}return E}let Ge=(a,d)=>{ze(a,d).then(g=>{Me=g,y.dispatch({effects:qe.reconfigure(T())})})},ho=a=>{p={...a},He(p).then(()=>{y.dispatch({effects:[Be.reconfigure(Ne(p)),Ie.reconfigure(p.lineNumbers?ae():[]),De.reconfigure(p.closeBrackets?ie():[])]}),Ge(p.theme,p.editorTheme),Pe(p.editorMode)})},yo=()=>{bn({state:y.state,dispatch:y.dispatch})},Ke=()=>{En({state:y.state,dispatch:y.dispatch})};return ne("redo","Mod-Shift-z",Ke),{getValue:oe,setValue:re,getLanguage:Fe,setLanguage:uo,getEditorId:po,focus:$e,getPosition:()=>{let a=y.state.selection.asSingle().ranges[0].from,d=y.state.doc.lineAt(a),g=d.number,E=a-d.from+1;return{lineNumber:g,column:E}},setPosition:({lineNumber:a,column:d=1})=>{let g=d-1,E=y.state.doc.lines>a?a:y.state.doc.lines,M=y.state.doc.line(E),w=M.length>g?g:M.length,N=M.from+w;y.dispatch({selection:{anchor:N},effects:[D.scrollIntoView(N,{x:"center",y:"center"})]})},addTypes:lo,onContentChanged:go,keyCodes:We,addKeyBinding:ne,changeSettings:ho,registerFormatter:fo,format:Ve,isReadonly:n,setTheme:Ge,undo:yo,redo:Ke,destroy:()=>{Q.length=0,F.length=0,y.destroy(),s.innerHTML="",_.splice(_.indexOf(Oe),1)},codemirror:y}};export{Hc as createEditor};
