"use strict";(()=>{var L=(e,o,r)=>{if(!o.has(e))throw TypeError("Cannot "+r)};var i=(e,o,r)=>(L(e,o,"read from private field"),r?r.call(e):o.get(e)),U=(e,o,r)=>{if(o.has(e))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(e):o.set(e,r)},v=(e,o,r,c)=>(L(e,o,"write to private field"),c?c.call(e,r):o.set(e,r),r);var S=(e,o,r,c)=>({set _(d){v(e,o,d,r)},get _(){return i(e,o,c)}});var _=(e,o)=>({...o.customSettings[e]});var $=e=>e==null?"":e instanceof Error||e&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:String(e);var B=["esm.sh","skypack","esm.run","jsdelivr.esm","fastly.jsdelivr.esm","gcore.jsdelivr.esm","testingcf.jsdelivr.esm","jsdelivr.b-cdn.esm","jspm"],M=["jsdelivr","fastly.jsdelivr","unpkg","gcore.jsdelivr","testingcf.jsdelivr","jsdelivr.b-cdn","npmcdn"],A=["jsdelivr.gh","fastly.jsdelivr.gh","statically","gcore.jsdelivr.gh","testingcf.jsdelivr.gh","jsdelivr.b-cdn.gh"],h={getModuleUrl:(e,{isModule:o=!0,defaultCDN:r="esm.sh",external:c}={})=>{e=e.replace(/#nobundle/g,"");let d=g=>!c||!g.includes("https://esm.sh")?g:g.includes("?")?`${g}&external=${c}`:`${g}?external=${c}`,f=E(e,o,r);return f?d(f):o?d("https://esm.sh/"+e):"https://cdn.jsdelivr.net/npm/"+e},getUrl:(e,o)=>e.startsWith("http")||e.startsWith("data:")?e:E(e,!1,o||N())||e,cdnLists:{npm:M,module:B,gh:A},checkCDNs:async(e,o)=>{let r=[o,...h.cdnLists.npm].filter(Boolean);for(let c of r)try{if((await fetch(h.getUrl(e,c),{method:"HEAD"})).ok)return c}catch{}return h.cdnLists.npm[0]}},N=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||h.cdnLists.npm[0]}catch{return h.cdnLists.npm[0]}},E=(e,o,r)=>{let c=o&&e.startsWith("unpkg:")?"?module":"";e.startsWith("gh:")?e=e.replace("gh",A[0]):e.includes(":")||(e=(r||(o?B[0]:M[0]))+":"+e);for(let d of W){let[f,g]=d;if(f.test(e))return e.replace(f,g)+c}return null},W=[[/^(esm\.sh:)(.+)/i,"https://esm.sh/$2"],[/^(npm:)(.+)/i,"https://esm.sh/$2"],[/^(node:)(.+)/i,"https://esm.sh/$2"],[/^(jsr:)(.+)/i,"https://esm.sh/jsr/$2"],[/^(pr:)(.+)/i,"https://esm.sh/pr/$2"],[/^(pkg\.pr\.new:)(.+)/i,"https://esm.sh/pkg.pr.new/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly\.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(gcore\.jsdelivr:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2"],[/^(testingcf\.jsdelivr:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2"],[/^(jsdelivr\.b-cdn:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2"],[/^(jsdelivr\.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(fastly\.jsdelivr\.gh:)(.+)/i,"https://fastly.jsdelivr.net/gh/$2"],[/^(gcore\.jsdelivr\.gh:)(.+)/i,"https://gcore.jsdelivr.net/gh/$2"],[/^(testingcf\.jsdelivr\.gh:)(.+)/i,"https://testingcf.jsdelivr.net/gh/$2"],[/^(jsdelivr\.b-cdn\.gh:)(.+)/i,"https://jsdelivr.b-cdn.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm\.run:)(.+)/i,"https://esm.run/$2"],[/^(jsdelivr\.esm:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2/+esm"],[/^(fastly\.jsdelivr\.esm:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2/+esm"],[/^(gcore\.jsdelivr\.esm:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2/+esm"],[/^(testingcf\.jsdelivr\.esm:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2/+esm"],[/^(jsdelivr\.b-cdn\.esm:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2/+esm"],[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle\.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(npmcdn:)(.+)/i,"https://npmcdn.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var{getUrl:F,getModuleUrl:X}=h;var j=F("gh:live-codes/gleam-precompiled@v0.5.0/");var t=j+"build/packages/",l={"gleam/bit_array":{srcUrl:t+"gleam_stdlib/src/gleam/bit_array.gleam"},"gleam/bool":{srcUrl:t+"gleam_stdlib/src/gleam/bool.gleam"},"gleam/bytes_builder":{srcUrl:t+"gleam_stdlib/src/gleam/bytes_builder.gleam"},"gleam/dict":{srcUrl:t+"gleam_stdlib/src/gleam/dict.gleam"},"gleam/dynamic":{srcUrl:t+"gleam_stdlib/src/gleam/dynamic.gleam"},"gleam/float":{srcUrl:t+"gleam_stdlib/src/gleam/float.gleam"},"gleam/function":{srcUrl:t+"gleam_stdlib/src/gleam/function.gleam"},"gleam/int":{srcUrl:t+"gleam_stdlib/src/gleam/int.gleam"},"gleam/io":{srcUrl:t+"gleam_stdlib/src/gleam/io.gleam"},"gleam/iterator":{srcUrl:t+"gleam_stdlib/src/gleam/iterator.gleam"},"gleam/list":{srcUrl:t+"gleam_stdlib/src/gleam/list.gleam"},"gleam/option":{srcUrl:t+"gleam_stdlib/src/gleam/option.gleam"},"gleam/order":{srcUrl:t+"gleam_stdlib/src/gleam/order.gleam"},"gleam/pair":{srcUrl:t+"gleam_stdlib/src/gleam/pair.gleam"},"gleam/queue":{srcUrl:t+"gleam_stdlib/src/gleam/queue.gleam"},"gleam/regex":{srcUrl:t+"gleam_stdlib/src/gleam/regex.gleam"},"gleam/result":{srcUrl:t+"gleam_stdlib/src/gleam/result.gleam"},"gleam/set":{srcUrl:t+"gleam_stdlib/src/gleam/set.gleam"},"gleam/string":{srcUrl:t+"gleam_stdlib/src/gleam/string.gleam"},"gleam/string_builder":{srcUrl:t+"gleam_stdlib/src/gleam/string_builder.gleam"},"gleam/uri":{srcUrl:t+"gleam_stdlib/src/gleam/uri.gleam"},"gleam/crypto":{srcUrl:t+"gleam_crypto/src/gleam/crypto.gleam"},"gleam/erlang":{srcUrl:t+"gleam_erlang/src/gleam/erlang.gleam"},"gleam/erlang/atom":{srcUrl:t+"gleam_erlang/src/gleam/erlang/atom.gleam"},"gleam/erlang/charlist":{srcUrl:t+"gleam_erlang/src/gleam/erlang/charlist.gleam"},"gleam/erlang/node":{srcUrl:t+"gleam_erlang/src/gleam/erlang/node.gleam"},"gleam/erlang/os":{srcUrl:t+"gleam_erlang/src/gleam/erlang/os.gleam"},"gleam/erlang/process":{srcUrl:t+"gleam_erlang/src/gleam/erlang/process.gleam"},"gleam/fetch":{srcUrl:t+"gleam_fetch/src/gleam/fetch.gleam"},"gleam/http":{srcUrl:t+"gleam_http/src/gleam/http.gleam"},"gleam/http/cookie":{srcUrl:t+"gleam_http/src/gleam/http/cookie.gleam"},"gleam/http/request":{srcUrl:t+"gleam_http/src/gleam/http/request.gleam"},"gleam/http/response":{srcUrl:t+"gleam_http/src/gleam/http/response.gleam"},"gleam/http/service":{srcUrl:t+"gleam_http/src/gleam/http/service.gleam"},"gleam/javascript":{srcUrl:t+"gleam_javascript/src/gleam/javascript.gleam"},"gleam/javascript/array":{srcUrl:t+"gleam_javascript/src/gleam/javascript/array.gleam"},"gleam/javascript/map":{srcUrl:t+"gleam_javascript/src/gleam/javascript/map.gleam"},"gleam/javascript/promise":{srcUrl:t+"gleam_javascript/src/gleam/javascript/promise.gleam"},"gleam/json":{srcUrl:t+"gleam_json/src/gleam/json.gleam"},"gleam/otp/actor":{srcUrl:t+"gleam_otp/src/gleam/otp/actor.gleam"},"gleam/otp/intensity_tracker":{srcUrl:t+"gleam_otp/src/gleam/otp/intensity_tracker.gleam"},"gleam/otp/port":{srcUrl:t+"gleam_otp/src/gleam/otp/port.gleam"},"gleam/otp/supervisor":{srcUrl:t+"gleam_otp/src/gleam/otp/supervisor.gleam"},"gleam/otp/system":{srcUrl:t+"gleam_otp/src/gleam/otp/system.gleam"},"gleam/otp/task":{srcUrl:t+"gleam_otp/src/gleam/otp/task.gleam"}};self.createGleamCompiler=()=>{var x,w,b,p;let e=j+"compiler/v1.3.0-rc1/gleam_wasm.js",o=j+"build/dev/javascript/",r;async function c(){let a=await import(e);return await a.default(),a.initialise_panic_hook(!1),r||(r=new d(a)),r}class d{constructor(s){U(this,x,void 0);U(this,w,0);U(this,b,new Map);v(this,x,s)}get wasm(){return i(this,x)}newProject(){let s=S(this,w)._++,n=new f(s);return i(this,b).set(s,new WeakRef(n)),n}garbageCollectProjects(){let s=[];for(let[n,m]of i(this,b))m.deref()||s.push(n);for(let n of s)i(this,b).delete(n),i(this,x).delete_project(n)}}x=new WeakMap,w=new WeakMap,b=new WeakMap;class f{constructor(s){U(this,p,void 0);v(this,p,s)}get projectId(){return i(this,p)}writeModule(s,n){r.wasm.write_module(i(this,p),s,n)}compilePackage(s){r.garbageCollectProjects(),r.wasm.reset_warnings(i(this,p)),r.wasm.compile_package(i(this,p),s)}readCompiledJavaScript(s){return r.wasm.read_compiled_javascript(i(this,p),s)}readCompiledErlang(s){return r.wasm.read_compiled_erlang(i(this,p),s)}resetFilesystem(){r.wasm.reset_filesystem(i(this,p))}delete(){r.wasm.delete_project(i(this,p))}takeWarnings(){let s=[];for(;;){let n=r.wasm.pop_warning(i(this,p));if(!n)return s;s.push(n.trimStart())}}}p=new WeakMap;let g=async a=>{await Promise.all(Object.keys(a).filter(s=>a[s].srcUrl&&!a[s].src).map(async s=>{let{srcUrl:n}=a[s];if(!n)return;let m=await fetch(n);if(!m.ok){console.error("Failed fetching: "+n);return}let u=await m.text();a[s].src=u}))},P=async a=>{for(let s of Object.keys(a)){let n=a[s],m={...l[s]};l[s]=l[s]||{},n.src&&(l[s].src=n.src),n.srcUrl&&n.srcUrl!==m?.srcUrl&&(l[s].srcUrl=n.srcUrl,l[s].src=void 0),n.compiledUrl&&(l[s].compiledUrl=n.compiledUrl)}await g(l)},q=Promise.all([c(),g(l)]),D=/(@external\s{0,20}\(\s{0,20}javascript\s{0,20},\s{0,20}".{0,200}?)(@)(.{0,200}?"\s{0,20},\s{0,20}".{0,200}?"\))/g,k="______at______",R=a=>{if(!a.includes("@"))return a;let s=new RegExp(D);return a.replace(s,`$1${k}$3`)},I=a=>a.includes(k)?a.split(k).join("@"):a;return async(a,{config:s})=>{if(!a)return"";await q;let n=_("gleam",s)?.modules||{};await P(n);let m=r.newProject();for(let u of Object.keys(l))l[u].src&&m.writeModule(u,l[u].src);try{m.writeModule("main",R(a)),m.compilePackage("javascript");let u=m.readCompiledJavaScript("main");return I(u).replace(/from\s+"\.\/(.+)"/g,(z,y)=>{if(y==="gleam.mjs"||y==="prelude.mjs")return`from "${o}prelude.mjs"`;let C=y.replace(".mjs","");if(y.startsWith("gleam/")){let[V,T]=C.split("/"),O=["javascript","json","crypto","fetch","http"].includes(T)?`gleam_${T}/`:"gleam_stdlib/";return`from "${o+O+y}"`}return l[C]?.compiledUrl?`from "${l[C].compiledUrl}"`:`from "${y}"`})}catch(u){return console.warn(u),{code:"",info:{errors:[$(u)]}}}finally{m.delete()}}};})();
