var Te=()=>document.querySelector("#editor-mode");var Me=["esm.sh","skypack","esm.run","jsdelivr.esm","fastly.jsdelivr.esm","gcore.jsdelivr.esm","testingcf.jsdelivr.esm","jsdelivr.b-cdn.esm","jspm"],Le=["jsdelivr","fastly.jsdelivr","unpkg","gcore.jsdelivr","testingcf.jsdelivr","jsdelivr.b-cdn","npmcdn"],Se=["jsdelivr.gh","fastly.jsdelivr.gh","statically","gcore.jsdelivr.gh","testingcf.jsdelivr.gh","jsdelivr.b-cdn.gh"],q={getModuleUrl:(t,{isModule:n=!0,defaultCDN:o="esm.sh",external:s}={})=>{t=t.replace(/#nobundle/g,"");let c=l=>!s||!l.includes("https://esm.sh")?l:l.includes("?")?`${l}&external=${s}`:`${l}?external=${s}`,i=Ee(t,n,o);return i?c(i):n?c("https://esm.sh/"+t):"https://cdn.jsdelivr.net/npm/"+t},getUrl:(t,n)=>t.startsWith("http")||t.startsWith("data:")?t:Ee(t,!1,n||Lt())||t,cdnLists:{npm:Le,module:Me,gh:Se},checkCDNs:async(t,n)=>{let o=[n,...q.cdnLists.npm].filter(Boolean);for(let s of o)try{if((await fetch(q.getUrl(t,s),{method:"HEAD"})).ok)return s}catch{}return q.cdnLists.npm[0]}},Lt=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||q.cdnLists.npm[0]}catch{return q.cdnLists.npm[0]}},Ee=(t,n,o)=>{let s=n&&t.startsWith("unpkg:")?"?module":"";t.startsWith("gh:")?t=t.replace("gh",Se[0]):t.includes(":")||(t=(o||(n?Me[0]:Le[0]))+":"+t);for(let c of St){let[i,l]=c;if(i.test(t))return t.replace(i,l)+s}return null},St=[[/^(esm\.sh:)(.+)/i,"https://esm.sh/$2"],[/^(npm:)(.+)/i,"https://esm.sh/$2"],[/^(node:)(.+)/i,"https://esm.sh/$2"],[/^(jsr:)(.+)/i,"https://esm.sh/jsr/$2"],[/^(pr:)(.+)/i,"https://esm.sh/pr/$2"],[/^(pkg\.pr\.new:)(.+)/i,"https://esm.sh/pkg.pr.new/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly\.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(gcore\.jsdelivr:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2"],[/^(testingcf\.jsdelivr:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2"],[/^(jsdelivr\.b-cdn:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2"],[/^(jsdelivr\.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(fastly\.jsdelivr\.gh:)(.+)/i,"https://fastly.jsdelivr.net/gh/$2"],[/^(gcore\.jsdelivr\.gh:)(.+)/i,"https://gcore.jsdelivr.net/gh/$2"],[/^(testingcf\.jsdelivr\.gh:)(.+)/i,"https://testingcf.jsdelivr.net/gh/$2"],[/^(jsdelivr\.b-cdn\.gh:)(.+)/i,"https://jsdelivr.b-cdn.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm\.run:)(.+)/i,"https://esm.run/$2"],[/^(jsdelivr\.esm:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2/+esm"],[/^(fastly\.jsdelivr\.esm:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2/+esm"],[/^(gcore\.jsdelivr\.esm:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2/+esm"],[/^(testingcf\.jsdelivr\.esm:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2/+esm"],[/^(jsdelivr\.b-cdn\.esm:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2/+esm"],[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle\.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(npmcdn:)(.+)/i,"https://npmcdn.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var we=()=>{let t=navigator.userAgent.toLowerCase();return t.includes("firefox")||t.includes("fxios")};var ve=t=>(globalThis.structuredClone||(n=>JSON.parse(JSON.stringify(n,(o,s)=>s===void 0?null:s))))(t);var je=()=>String(Math.random())+"-"+Date.now().toFixed();var X=(t,n)=>new Promise((o,s)=>{if(n&&globalThis[n])return o(globalThis[n]);if(typeof globalThis.importScripts=="function")return globalThis.importScripts(t),n&&globalThis[n]?o(globalThis[n]):o(globalThis);let c=document.createElement("script");c.src=t,c.async=!0;let i=()=>{c.removeEventListener("load",l),c.removeEventListener("error",y)},l=()=>{if(i(),!n)return o("loaded: "+t);let f=setInterval(()=>{if(window[n])return clearInterval(f),o(window[n])},5)},y=()=>{i(),s("failed to load: "+t)};c.addEventListener("load",l),c.addEventListener("error",y),document.head.appendChild(c)});var ie=t=>t.replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,"$1");var wt=/(import\s+?(?:(?:(?:[\w*\s{},\$]*)\s+from\s+?)|))((?:".*?")|(?:'.*?'))([\s]*?(?:;|$|))/g,vt=/(import\s*?\(\s*?((?:".*?")|(?:'.*?'))\s*?\))/g,ke=(t,n=!1)=>[...ie(t).matchAll(new RegExp(wt)),...ie(t).matchAll(new RegExp(vt))].map(o=>o[2].replace(/"/g,"").replace(/'/g,"")).map(o=>!n||!jt(o)||!o.includes(":")?o:o.split(":")[1]);var jt=t=>!t.startsWith("https://")&&!t.startsWith("http://")&&!t.startsWith(".")&&!t.startsWith("/")&&!t.startsWith("data:")&&!t.startsWith("blob:");var He=t=>{if(!t.startsWith("https://"))return t;let n=["https://esm.sh/","https://cdn.skypack.dev/","https://cdn.jsdelivr.net/npm/","https://fastly.jsdelivr.net/npm/","https://gcore.jsdelivr.net/npm/","https://testingcf.jsdelivr.net/npm/","https://jsdelivr.b-cdn.net/npm/","https://esm.run/","https://esbuild.vercel.app/","https://bundle.run/","https://unpkg.com/","https://npmcdn.com/","https://deno.bundlejs.com/?file&q=","https://jspm.dev/"];for(let o of n)if(t.startsWith(o))return t.replace(o,"");return t},Ce=t=>t.includes(":")&&!t.startsWith("data:")&&!t.startsWith("http")?t.split(":")[1]:t;var qe=t=>`https://ofcncog2cu-dsn.algolia.net/1/indexes/npm-search/${encodeURIComponent(t)}?x-algolia-agent=Browser`,Ue={"X-Algolia-Application-Id":"OFCNCOG2CU","X-Algolia-API-Key":"f54e21fa3a2a0160595bb058179bfb1e"},Ie=["name","description","homepage","repository.url","version"],ae="https://data.jsdelivr.com/v1",ce={...we()?{}:{"User-Agent":"https://livecodes.io"}},V=t=>{let n=t.startsWith("@"),o=n?t.slice(1):t,[s,c]=o.split("@");return[(n?"@":"")+s,c]},kt=async(t,n=10)=>{let o={page:0,hitsPerPage:n,attributesToHighlight:[],attributesToRetrieve:Ie,analyticsTags:["jsdelivr"]},[s,c]=V(t),i;if(c){let f=await Q(t);typeof f=="string"&&(i=V(f)[1])}let l=await fetch(qe("query"),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",...Ue},body:JSON.stringify({query:s,...o})}).then(f=>{if(!f.ok)throw new Error("failed to fetch");return f}).then(f=>f.json()).catch(f=>({error:!0,message:f.message||String(f)}));if("error"in l)return l;let y=l.hits.map(f=>(f.name===s&&i&&(f.version=i),f.repository?.url&&(f.repo=f.repository?.url),f));return y.sort((f,U)=>f.name===s?-1:U.name===s?1:0),y},Q=async t=>{let n=`${ae}/package/resolve/npm/${t}`,o=await fetch(n,{headers:ce}).then(i=>{if(!i.ok)throw new Error("failed to fetch");return i}).then(i=>i.json()).catch(i=>({error:!0,message:i.message||String(i)}));if("error"in o)return o;let s=V(t)[0],c=o.version;return c?`${s}@${c}`:s},Ht=async t=>{let[n,o]=V(Ce(He(t))),s;if(o){let l=await Q(t);typeof l=="string"&&(s=V(l)[1])}let c=qe(n)+"&attributesToRetrieve="+Ie.join(","),i=await fetch(c,{method:"GET",headers:Ue}).then(l=>{if(!l.ok)throw new Error("failed to fetch");return l}).then(l=>l.json()).catch(l=>({error:!0,message:l.message||String(l)}));return"error"in i||(s&&(i.version=s),i.repository?.url&&(i.repo=i.repository?.url)),i},Ct=async t=>{let n=await Q(t),o=`${ae}/package/npm/${n}/flat`,s=await fetch(o,{headers:ce}).then(i=>{if(!i.ok)throw new Error("failed to fetch");return i}).then(i=>i.json()).catch(i=>({error:!0,message:i.message||String(i)}));if("error"in s)return s;let c=`https://cdn.jsdelivr.net/npm/${n}`;return{...s.default?{default:c+s.default}:{},files:s.files.map(i=>c+i.name)}},qt=async t=>{let n=await Q(t),o=`${ae}/package/npm/${n}/entrypoints`,s=await fetch(o,{headers:ce}).then(i=>{if(!i.ok)throw new Error("failed to fetch");return i}).then(i=>i.json()).catch(i=>({error:!0,message:i.message||String(i)}));if("error"in s)return s;let c=`https://cdn.jsdelivr.net/npm/${n}`;return{...s.js?.file?{js:c+s.js?.file}:{},...s.css?.file?{css:c+s.css?.file}:{}}},Ae={search:kt,getPkgInfo:Ht,getPkgFiles:Ct,getPkgDefaultFiles:qt};var{getUrl:A,getModuleUrl:co}=q,B=A("@live-codes/browser-compilers@0.22.6/dist/");var Be=A("emmet-monaco-es@5.5.0/dist/emmet-monaco.js");var Pe=A("@live-codes/monaco-editor@0.3.1/"),Re=A("monaco-emacs@0.3.0/dist/monaco-emacs.js"),p=A("monaco-themes@0.4.4/themes/"),De=A("monaco-vim@0.4.1/dist/monaco-vim.js"),Oe=A("@live-codes/monaco-volar@0.1.0/dist/index.js");var Ut=t=>{let n=t.trim(),o,s;return t.includes(":")&&([o,n]=n.split(":"),o!=="monaco"&&o!=="codemirror"&&o!=="codejar"&&(o=void 0)),t.includes("@")&&([n,s]=n.split("@"),s!=="light"&&s!=="dark"&&(s=void 0)),{editor:o,editorTheme:n,theme:s}},$e=({editor:t,editorTheme:n,theme:o,editorThemes:s})=>{if(!n)return null;let i=(typeof n=="string"?n.split(",").map(l=>l.trim()):n).map(Ut);for(let l of i)if((l.editor===t||l.editor===void 0)&&(l.theme===o||l.theme===void 0)&&s.includes(l.editorTheme))return l.editorTheme;return null};var le=["jsx","tsx","react","react-tsx","sucrase","babel","flow","solid","solid.tsx","stencil","react-native","react-native-tsx","vue"],pe=t=>{let o=["javascript","jsx","react","flow","solid","react-native"].includes(t),s=le.includes(t),c=["solid","solid.tsx","stencil","vue"].includes(t),i={allowJs:!0,checkJs:!o,strictNullChecks:!o,allowNonTsExtensions:!0,experimentalDecorators:!0,emitDecoratorMetadata:!0,allowSyntheticDefaultImports:!0,allowUmdGlobalAccess:!0,esModuleInterop:!0,target:7,module:99,moduleResolution:2,lib:["es2021","dom","dom.iterable"]},l={jsx:4},y={jsx:1,jsxFactory:"h",...["solid","solid.tsx"].includes(t)?{jsxImportSource:"solid-js",jsxFactory:"JSX"}:{},jsxFragmentFactory:"Fragment"};return{...i,...s?l:{},...c?y:{}}};var me=[{name:"active4d",title:"Active4D",url:p+"Active4D.json"},{name:"all-hallows-eve",title:"All Hallows Eve",url:p+"All Hallows Eve.json"},{name:"amy",title:"Amy",url:p+"Amy.json"},{name:"birds-of-paradise",title:"Birds of Paradise",url:p+"Birds of Paradise.json"},{name:"blackboard",title:"Blackboard",url:p+"Blackboard.json"},{name:"brilliance-black",title:"Brilliance Black",url:p+"Brilliance Black.json"},{name:"brilliance-dull",title:"Brilliance Dull",url:p+"Brilliance Dull.json"},{name:"catppuccin-latte",title:"Catppuccin Latte",url:B+"catppuccin/monaco/latte.json"},{name:"catppuccin-frappe",title:"Catppuccin Frappe",url:B+"catppuccin/monaco/frappe.json"},{name:"catppuccin-macchiato",title:"Catppuccin Macchiato",url:B+"catppuccin/monaco/macchiato.json"},{name:"catppuccin-mocha",title:"Catppuccin Mocha",url:B+"catppuccin/monaco/mocha.json"},{name:"chrome-devtools",title:"Chrome DevTools",url:p+"Chrome DevTools.json"},{name:"clouds-midnight",title:"Clouds Midnight",url:p+"Clouds Midnight.json"},{name:"clouds",title:"Clouds",url:p+"Clouds.json"},{name:"cobalt",title:"Cobalt",url:p+"Cobalt.json"},{name:"cobalt2",title:"Cobalt2",url:p+"Cobalt2.json"},{name:"dawn",title:"Dawn",url:p+"Dawn.json"},{name:"dracula",title:"Dracula",url:p+"Dracula.json"},{name:"dreamweaver",title:"Dreamweaver",url:p+"Dreamweaver.json"},{name:"eiffel",title:"Eiffel",url:p+"Eiffel.json"},{name:"espresso-libre",title:"Espresso Libre",url:p+"Espresso Libre.json"},{name:"github",title:"GitHub",url:p+"GitHub.json"},{name:"github-dark",title:"GitHub Dark",url:p+"GitHub Dark.json"},{name:"github-light",title:"GitHub Light",url:p+"GitHub Light.json"},{name:"hc-black",title:"High Contrast (Black)"},{name:"hc-light",title:"High Contrast (Light)"},{name:"idle",title:"Idle",url:p+"IDLE.json"},{name:"idlefingers",title:"Idle Fingers",url:p+"idleFingers.json"},{name:"iplastic",title:"iPlastic",url:p+"iPlastic.json"},{name:"katzenmilch",title:"Katzenmilch",url:p+"Katzenmilch.json"},{name:"krtheme",title:"krTheme",url:p+"krTheme.json"},{name:"kuroir",title:"Kuroir Theme",url:p+"Kuroir Theme.json"},{name:"lazy",title:"Lazy",url:p+"LAZY.json"},{name:"magicwb-amiga",title:"MagicWB (Amiga)",url:p+"MagicWB (Amiga).json"},{name:"merbivore-soft",title:"Merbivore Soft",url:p+"Merbivore Soft.json"},{name:"merbivore",title:"Merbivore",url:p+"Merbivore.json"},{name:"monochrome",title:"Monochrome"},{name:"monochrome-dark",title:"Monochrome Dark"},{name:"monoindustrial",title:"monoindustrial",url:p+"monoindustrial.json"},{name:"monokai",title:"Monokai",url:p+"Monokai.json"},{name:"monokai-bright",title:"Monokai Bright",url:p+"Monokai Bright.json"},{name:"night-owl",title:"Night Owl",url:p+"Night Owl.json"},{name:"nord",title:"Nord",url:p+"Nord.json"},{name:"oceanic-next",title:"Oceanic Next",url:p+"Oceanic Next.json"},{name:"pastels-on-dark",title:"Pastels on Dark",url:p+"Pastels on Dark.json"},{name:"slush-and-poppies",title:"Slush and Poppies",url:p+"Slush and Poppies.json"},{name:"solarized-dark",title:"Solarized Dark",url:p+"Solarized-dark.json"},{name:"solarized-light",title:"Solarized Light",url:p+"Solarized-light.json"},{name:"spacecadet",title:"SpaceCadet",url:p+"SpaceCadet.json"},{name:"sunburst",title:"Sunburst",url:p+"Sunburst.json"},{name:"textmate-mac-classic",title:"Textmate (Mac Classic)",url:p+"Textmate (Mac Classic).json"},{name:"tomorrow",title:"Tomorrow",url:p+"Tomorrow.json"},{name:"tomorrow-night",title:"Tomorrow Night",url:p+"Tomorrow-Night.json"},{name:"tomorrow-night-blue",title:"Tomorrow Night Blue",url:p+"Tomorrow-Night-Blue.json"},{name:"tomorrow-night-bright",title:"Tomorrow Night Bright",url:p+"Tomorrow-Night-Bright.json"},{name:"tomorrow-night-eighties",title:"Tomorrow Night Eighties",url:p+"Tomorrow-Night-Eighties.json"},{name:"twilight",title:"Twilight",url:p+"Twilight.json"},{name:"upstream-sunburst",title:"Upstream Sunburst",url:p+"Upstream Sunburst.json"},{name:"vibrant-ink",title:"Vibrant Ink",url:p+"Vibrant Ink.json"},{name:"vs",title:"VS"},{name:"vs-dark",title:"VS Dark"},{name:"xcode-default",title:"Xcode Default",url:p+"Xcode_default.json"},{name:"zenburnesque",title:"Zenburnesque",url:p+"Zenburnesque.json"}],We=[{name:"custom-vs-light",theme:{base:"vs",inherit:!0,rules:[{token:"comment",fontStyle:"italic"}],colors:{}}},{name:"custom-vs-dark",theme:{base:"vs-dark",inherit:!0,rules:[{token:"comment",fontStyle:"italic"}],colors:{}}},{name:"monochrome",theme:{base:"vs",inherit:!1,rules:[],colors:{"editor.foreground":"#24292e","editorBracketHighlight.foreground1":"#24292e","editorBracketHighlight.foreground2":"#24292e","editorBracketHighlight.foreground3":"#24292e","editorBracketHighlight.foreground4":"#24292e","editorBracketHighlight.unexpectedBracket.foreground":"#24292e"}}},{name:"monochrome-dark",theme:{base:"vs-dark",inherit:!1,rules:[],colors:{"editor.foreground":"#e2e2e3","editor.background":"#24292e","editorBracketHighlight.foreground1":"#e2e2e3","editorBracketHighlight.foreground2":"#e2e2e3","editorBracketHighlight.foreground3":"#e2e2e3","editorBracketHighlight.foreground4":"#e2e2e3","editorBracketHighlight.unexpectedBracket.foreground":"#e2e2e3"}}}];var It=/^\/\/\s?@(\w+)$/,At=/^\/\/\s?@(\w+):\s?(.+)$/,_e=t=>{let n=new Map;if(t)for(let o of t)n.set(o.name.toLowerCase(),o);return o=>{let s=o.split(`
`),c={};return s.forEach(i=>{let l,y=i.trim();(l=It.exec(y))?n.has(l[1].toLowerCase())&&(c[l[1]]=!0,Ne(l[1],"true",c,n)):(l=At.exec(y))&&n.has(l[1].toLowerCase())&&Ne(l[1],l[2],c,n)}),c}};function Ne(t,n,o,s){let c=s.get(t.toLowerCase());if(c)switch(c.type){case"number":case"string":case"boolean":o[c.name]=Fe(n,c.type);break;case"list":let i=c.element.type,l=n.split(",");typeof i=="string"?o[c.name]=l.map(f=>Fe(f,i)):o[c.name]=l.map(f=>Ve(c.name,f,i)).filter(Boolean);break;default:let y=c.type;o[c.name]=Ve(c.name,n,y)}}function Fe(t,n){switch(n){case"number":return+t;case"string":return t;case"boolean":return t.toLowerCase()==="true"||t.length===0}}function Ve(t,n,o){return o.get(n.toLowerCase())}var ze=t=>(n,o,s)=>{let c=[],i=n.getValueInRange({startLineNumber:o.lineNumber,startColumn:0,endLineNumber:o.lineNumber,endColumn:o.column});if(!i.startsWith("//"))return{suggestions:[]};let l=i.replace("	","").split(" ");if(l.length!==2)return{suggestions:[]};let y=l[1];if(y.startsWith("-"))return{suggestions:[{label:"---cut---",kind:14,detail:"Twoslash split output",insertText:"---cut---".replace(y,"")}]};if(!y.startsWith("@"))return{suggestions:[]};let f=["noErrors","errors","showEmit","showEmittedFile","noStaticSemanticInfo","emit","noErrorValidation","filename"],U=(t||[]).map(w=>w.name);return f.concat(U).forEach(w=>{w.startsWith(y.slice(1))&&c.push({label:w,kind:14,detail:"Twoslash comment",insertText:w})}),{suggestions:c}};var Y,Je=async({isJSLang:t,editor:n,monaco:o,compilerOptions:s})=>{let c=t?"javascript":"typescript",i=t?o.languages.typescript.getJavaScriptWorker:o.languages.typescript.getTypeScriptWorker,l=t?o.languages.typescript.javascriptDefaults:o.languages.typescript.typescriptDefaults,y=n.getModel();Y=Y||await window.compiler.typescriptFeatures({feature:"getOptionDeclarations"}),window.isTwoslashCompletionsRegistered||(["javascript","typescript"].forEach(E=>{o.languages.registerCompletionItemProvider(E,{triggerCharacters:["@","/","-"],provideCompletionItems:ze(Y)})}),window.isTwoslashCompletionsRegistered=!0);let f=x=>{let E=Object.keys(x);E.length&&(E.forEach(I=>{s[I]===x[I]&&delete x[I]}),Object.keys(x).length&&(s={...s,...x},l.setCompilerOptions(s)))},U=_e(Y),w=()=>{let x=n.getModel()?.getValue();if(!x)return;let E=U(x);f(E)};w();let b=async()=>y?(await i())(y.uri):void 0,ee=()=>({provideInlayHints:async(E,I,J)=>{let te=E.getValue(),L=/^\s*\/\/\s*\^\?$/gm,P,R=[],H=await b();if(!H||E.isDisposed())return{hints:[],dispose:()=>{}};for(;(P=L.exec(te))!==null;){if(J.isCancellationRequested||E.isDisposed())return{hints:[],dispose:()=>{}};let D=P.index+P[0].length-1,O=E.getPositionAt(D),oe=new o.Position(O.lineNumber-1,O.column),K=E.getOffsetAt(oe),W=await H.getQuickInfoAtPosition("file://"+E.uri.path,K);if(!W||!W.displayParts)continue;let T=W.displayParts.map(v=>v.text).join("").replace(/\\n/g,"").replace(/  /g,"");T.length>120&&(T=T.slice(0,119)+"...");let G={kind:0,position:new o.Position(O.lineNumber,O.column+1),label:T,paddingLeft:!0};R.push(G)}return{hints:R,dispose:()=>{}}}});window.inlayHintRegistered=window.inlayHintRegistered||new Set,window.inlayHintRegistered.has(c)||(o.languages.registerInlayHintsProvider(c,ee()),window.inlayHintRegistered.add(c),n.getModel()?.onDidChangeContent(w))};var Ke=!1,k={},m,Ge=new Set,_=[],z,Ze=!1,$={},jo=async t=>{let{container:n,baseUrl:o,readonly:s,theme:c,editorTheme:i,isEmbed:l,getLanguageExtension:y,mapLanguage:f,getFormatterConfig:U,getFontFamily:w}=t,b=t.language;if(!n)throw new Error("editor container not found");let ee=()=>import(Pe+"monaco.js"),x,E=c,I=i,J=e=>({fontFamily:w(e.fontFamily),fontSize:e.fontSize||(l?12:14),insertSpaces:!e.useTabs,detectIndentation:!1,tabSize:e.tabSize,lineNumbers:e.lineNumbers==="relative"?"relative":e.lineNumbers?"on":"off",wordWrap:e.wordWrap?"on":"off",autoClosingBrackets:e.closeBrackets?"always":"never",autoClosingQuotes:e.closeBrackets?"always":"never",autoClosingDelete:e.closeBrackets?"always":"never"}),te=J(t),L=e=>e==="livescript"?"coffeescript":["rescript","reason","ocaml"].includes(e)?"csharp":e.startsWith("vue")?"vue":["svelte","malina","riot"].includes(e)?"razor":f(e);try{window.monaco=window.monaco||(await ee()).monaco,m=window.monaco}catch{throw new Error("Failed to load monaco editor")}We.forEach(e=>m.editor.defineTheme(e.name,e.theme));let P=async(e,a)=>{let r=$e({editor:"monaco",editorTheme:a,theme:e,editorThemes:me.map(g=>g.name)}),d=r==="vs"?"custom-vs-light":r==="vs-dark"?"custom-vs-dark":r||"custom-vs-"+e;if(Ge.has(d))return d;let h=me.find(g=>g.name===d);return h?.url&&await fetch(h.url).then(g=>g.json()).then(g=>{m.editor.defineTheme(d,g),Ge.add(d)}),d},R=(e,a)=>{P(e,a).then(r=>{m.editor.setTheme($[r]??r),E=e,I=a})},H=navigator&&/android/i.test(navigator.userAgent),D={theme:await P(c,i),fontLigatures:!0,formatOnType:!1,lineNumbersMinChars:3,minimap:{enabled:!1},scrollbar:{useShadows:!1},mouseWheelZoom:!1,automaticLayout:!0,readOnly:s,fixedOverflowWidgets:!0,lightbulb:{enabled:"on"},quickSuggestions:{other:!H,comments:!H,strings:!H},acceptSuggestionOnCommitCharacter:!H,acceptSuggestionOnEnter:H?"off":"on",inlayHints:{enabled:"on"}},O={...D,scrollBeyondLastLine:!1,contextmenu:!1},oe={...D,scrollBeyondLastLine:!1},K={...D,glyphMargin:!0,folding:!1,lineDecorationsWidth:0,lineNumbers:"off",lineNumbersMinChars:0,scrollbar:{vertical:"auto"},scrollBeyondLastLine:!1,contextmenu:!1},W={...K},T=t.editorId,G=T==="console"?K:T==="compiled"?oe:T==="embed"?W:t.mode==="codeblock"?O:D,v=ve({...te,...G}),Xe=()=>{let a=["javascript","jsx","react","flow","solid","react-native"].includes(b);if(!["script","tests","editorSettings"].includes(T)||!["javascript","typescript"].includes(L(b)))return;let r=pe(b);m.languages.typescript.typescriptDefaults.setCompilerOptions(r),m.languages.typescript.javascriptDefaults.setCompilerOptions(r);let d={noSemanticValidation:b==="flow",diagnosticCodesToIgnore:[2354]};m.languages.typescript.typescriptDefaults.setDiagnosticsOptions(d),m.languages.typescript.javascriptDefaults.setDiagnosticsOptions(d),Je({isJSLang:a,editor:u,monaco:m,compilerOptions:r})},ne=[],Qe=()=>{ne.forEach(e=>u.getModel()?.onDidChangeContent(e))},Ye={astro:o+"monaco-lang-astro.f30e7d04fcebf9df1d1428cecdca96a0.js",clio:o+"monaco-lang-clio.ee3a53f8e10786f6ab567382a5cdde30.js",imba:o+"monaco-lang-imba.ea949da9285ec36b5d1be2adfa54307a.js",minizinc:o+"monaco-lang-minizinc.e97fcdcd102283a122b248d89f6a79dd.js",prolog:o+"monaco-lang-prolog.e0950f3165edbe999d5daa45367d9d24.js",wat:o+"monaco-lang-wat.5cbc6437814cc38898ad90fdc5566503.js"},et=async()=>{if(Ze)return;Ze=!0;let{registerVue:e,registerHighlighter:a}=await import(Oe),r={...pe("vue"),jsx:"preserve"};await e({editor:u,monaco:m,tsCompilerOptions:r,silent:!0}),$=a(m),$["custom-vs-light"]=$.vs,$["custom-vs-dark"]=$["vs-dark"],R(E,I)},ue=async e=>{if(L(e)==="vue"){await et();return}let a=Ye[e];if(a&&!m.languages.getLanguages().find(r=>r.id===e)){let r=(await import(a)).default;m.languages.register({id:e}),r.config&&m.languages.setLanguageConfiguration(e,r.config),r.tokens&&m.languages.setMonarchTokensProvider(e,r.tokens),r.completions&&m.languages.registerCompletionItemProvider(e,r.completions)}},de="",re=(e,a,r)=>{let d=je(),h=y(r),g=L(r)==="typescript"&&!h?.endsWith("ts")&&!h?.endsWith("tsx")?h+".tsx":h;de=`file:///${T}.${d}.${g}`;let S=e.getModel(),M=m.editor.createModel(a||"",L(r),m.Uri.parse(de));e.setModel(M),setTimeout(()=>S?.dispose(),1e3),Qe(),Xe()},u=m.editor.create(n,{...v,language:b.startsWith("vue")?"html":L(b)});re(u,t.value,b.startsWith("vue")?"html":b),ue(b),b.startsWith("vue")&&setTimeout(()=>{ye(b)},50);let ge=(e,a,r)=>{let d=m.editor.getModel(r);return d?(d.setValue(e),d):m.editor.createModel(e,a,r)};["markup","style","script","tests"].includes(T)&&_.push(u),v.theme==="vs-light"&&(n.style.backgroundColor="#fff"),(v.theme?.startsWith("http")||v.theme?.startsWith("./"))&&fetch(v.theme).then(e=>e.json()).then(e=>{m.editor.defineTheme("theme",e),m.editor.setTheme("theme"),n.style.backgroundColor=e.colors["editor.background"]});let tt=()=>T,ot=()=>u.getValue(),he=(e="")=>{u.getModel()?.setValue(e)},N=[],Z=e=>!e.filename.startsWith("/node_modules/"),nt=(e,a)=>{let r=e.content,d="file://"+e.filename,h=N.find(g=>g.filename===e.filename);if(h){if(Z(e)&&(h.libJs.dispose(),h.libJs=m.languages.typescript.javascriptDefaults.addExtraLib(r,d)),!a)return;h.libJs?.dispose(),h.libTs?.dispose()}N.push({editorId:T,filename:e.filename,libJs:m.languages.typescript.javascriptDefaults.addExtraLib(r,d),libTs:Z(e)?{dispose:()=>{}}:m.languages.typescript.typescriptDefaults.addExtraLib(r,d)})},fe;(()=>{if(T!=="tests")return;let e="javascript",a=_.find(d=>{let h=d.getModel()?.getLanguageId();return e=h||"javascript",["javascript","typescript"].includes(h)});if(!a)return;let r=e==="typescript"?"tsx":"jsx";fe=ge(a.getValue(),e,m.Uri.parse("script."+r))})(),(()=>{if(T!=="script")return;ge(`
    declare module 'https://*';
    declare module 'data:*';
    declare module './*';
    `,void 0,m.Uri.parse("file:///declarations.d.ts"))})();let xe=(e=!0)=>{fe?.dispose(),T!=="tests"&&(N.filter(a=>a.editorId===T).filter(a=>e?!0:Z(a)).forEach(a=>{a.libJs.dispose(),a.libTs.dispose()}),N=N.filter(a=>a.editorId!==T).filter(a=>e?!1:!Z(a)))},rt=()=>b,ye=(e,a)=>{b=e,xe(!1);let r=a??u.getValue();L(e)==="vue"?he(r):re(u,r,b),ue(e).then(()=>{L(e)==="vue"&&re(u,u.getValue(),b)})},st=()=>u.focus(),it=()=>u.layout(),at=e=>{ne.push(e),u.getModel()?.onDidChangeContent(e)},ct={CtrlEnter:m.KeyMod.CtrlCmd|m.KeyCode.Enter,ShiftEnter:m.KeyMod.Shift|m.KeyCode.Enter,Enter:m.KeyCode.Enter,UpArrow:m.KeyCode.UpArrow,DownArrow:m.KeyCode.DownArrow,ShiftAltF:m.KeyMod.Shift|m.KeyMod.Alt|m.KeyCode.KeyF},lt=(e,a,r)=>{u.addAction({id:e,label:e,keybindings:[a],precondition:"!suggestWidgetVisible && !markersNavigationVisible && !findWidgetVisible",run:r})},be=async e=>{let a=Te(),r=document.querySelector(`#editor-status [data-status="${t.editorId}"]`),d=g=>{a&&(a.textContent=g)},h=g=>{r&&(r.textContent=g)};if(!e){x?.dispose(),x=void 0,h(""),d("");return}if(e==="vim"){if(x?.mode==="vim")return;x?.mode==="emacs"&&(x.dispose(),h(""));let g=await X(De,"MonacoVim"),S=r?.innerHTML!==""?void 0:r;x=g.initVimMode(u,S),x.mode="vim",d("Vim")}if(e==="emacs"){if(x?.mode==="emacs")return;x?.mode==="vim"&&(x.dispose(),h(""));let g=await X(Re,"MonacoEmacs");x=new g.EmacsExtension(u),h(""),x.onDidMarkChange(function(S){h(S?"Mark Set!":"Mark Unset")}),x.onDidChangeKey(function(S){h(S)}),x.start(),x.mode="emacs",d("Emacs")}};be(t.editorMode);let pt=e=>{let a=u.getModel();!e||!a||m.languages.registerDocumentFormattingEditProvider(L(b),{provideDocumentFormattingEdits:async()=>{let r=u;if(u.getModel()||(r=_.find(g=>g.getModel()?.getLanguageId()===L(b))||u),a=r.getModel(),!a)return[];let d=r.getValue()||"",h=await e(d,0,U());return[{range:a.getFullModelRange(),text:h.formatted}]}})},mt=async()=>u.getAction("editor.action.formatDocument")?.run(),ut=e=>{!e&&!window.emmetMonaco||X(Be,"emmetMonaco").then(a=>{e?(!k.html||k.disabled)&&(k.html=a.emmetHTML(m,["html","php","astro","markdown","mdx"]),k.css=a.emmetCSS(m,["css","scss","less"]),k.jsx=a.emmetJSX(m,["javascript","typescript","jsx","tsx"]),k.disabled=!1):(k.html?.(),k.css?.(),k.jsx?.(),k.disabled=!0)})},dt=e=>{if(!e){z?.dispose(),z=void 0;return}z||(z=!0,import(B+"tailwindcss/monaco-tailwindcss.js").then(({configureMonacoTailwindcss:a,tailwindcssData:r})=>{m.languages.css.cssDefaults.setOptions({data:{dataProviders:{tailwindcssData:r}}}),z=a(m)}))},gt=e=>{v={...J(e),...G},ut(e.emmet),be(e.editorMode),u.updateOptions(v),R(e.theme,e.editorTheme)},ht=()=>{u.getModel()?.undo?.()},ft=()=>{u.getModel()?.redo?.()},xt=()=>{let e=u.getPosition();return{lineNumber:e?.lineNumber??1,column:e?.column??1}},yt=e=>{let a={lineNumber:e.lineNumber,column:e.column??1};u.setPosition(a),setTimeout(()=>u.revealPositionInCenter(a,0),50)},bt=async()=>{let e=u.getModel();if(!e)return;let a=/\/\/#region[\s\S]*?\/\/#endregion/g,r;for(;(r=a.exec(e.getValue()))!==null;){let d=e.getPositionAt(r.index).lineNumber,h=e.getPositionAt(r.index+r[0].length).lineNumber;u.setSelection(new m.Selection(d,1,h+1,1)),await u.getAction("editor.createFoldingRangeFromSelection")?.run()}},Tt=async e=>{for(let a of e){let r=a.from??0,d=a.to??u.getModel().getLineCount();r<0||d<0||r>d||(u.setSelection(new m.Selection(r,1,d+1,1)),await u.getAction("editor.createFoldingRangeFromSelection")?.run())}},Et=()=>{_=_.filter(e=>e!==u),x?.dispose(),ne.length=0,xe(!0),u.getModel()?.dispose(),u.dispose(),n.innerHTML=""};window.addEventListener("unhandledrejection",function(e){e.reason&&e.reason.name==="Canceled"&&e.preventDefault()});let Mt=e=>{let a=["html","markdown","javascript","typescript"],r=u.getModel();if(!r||!a.includes(L(b))||L(b)==="typescript"&&!le.includes(b)||v.autoClosingBrackets==="never")return;let d=h=>["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","circle","ellipse","line","path","polygon","polyline","rect","stop","use"].includes(h);if(e.browserEvent.key===">"){let h=u.getSelections()||[],g=[],S=[];for(let M of h){S.push(new m.Selection(M.selectionStartLineNumber,M.selectionStartColumn+1,M.endLineNumber,M.endColumn+1));let j=r.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:M.endLineNumber,endColumn:M.endColumn}).match(/<([\w-]+)(?![^>]*\/>)[^>]*$/);if(!j)continue;let[se,F]=j;d(F)||se.trim().endsWith("/")||g.push({range:{startLineNumber:M.endLineNumber,startColumn:M.endColumn+1,endLineNumber:M.endLineNumber,endColumn:M.endColumn+1},text:`</${F}>`})}setTimeout(()=>{u.executeEdits(r.getValue(),g,S)},0)}};return u.onKeyDown(Mt),Ke||(()=>{let e=new Map,a={provideHover(r,d){let h=r.getLineContent(d.lineNumber),g=ke(h,!0)[0];if(!g||g.startsWith("https://")||g.startsWith("http://")||g.startsWith(".")||g.startsWith("data:")||g.startsWith("blob:"))return;let S=g.split("/"),M=S[0].startsWith("@")?2:1;return g=S.slice(0,M).join("/"),(async()=>{let C;if(e.has(g))C=e.get(g);else{if(C=await Ae.getPkgInfo(g),"error"in C)return;e.set(g,C)}if(!C||"error"in C)return;let{name:j,description:se="",repo:F=""}=C;return{contents:[{value:`## [${j}](https://www.npmjs.com/package/${j})
${se}


${F?`[GitHub](${F}) |`:""} [Skypack](https://skypack.dev/view/${j}) | [jsDelivr](https://www.jsdelivr.com/package/npm/${j}) | [Unpkg](https://unpkg.com/browse/${j}/) | [Snyk](https://snyk.io/advisor/npm-package/${j}) | [Bundlephobia](https://bundlephobia.com/package/${j})

Docs: [Importing modules](${new URL("/livecodes/docs/",location.href).href}features/module-resolution)`}]}})()}};m.languages.registerHoverProvider("javascript",a),m.languages.registerHoverProvider("typescript",a),m.languages.registerHoverProvider("html",a)})(),Ke=!0,{getValue:ot,setValue:he,getLanguage:rt,setLanguage:ye,getEditorId:tt,focus:st,getPosition:xt,setPosition:yt,foldRegions:bt,foldLines:Tt,layout:it,addTypes:nt,changeSettings:gt,configureTailwindcss:dt,onContentChanged:at,keyCodes:ct,addKeyBinding:lt,registerFormatter:pt,format:mt,isReadonly:s,setTheme:R,undo:ht,redo:ft,destroy:Et,monaco:u}};export{jo as createEditor};
