var Qe=Object.defineProperty;var To=Object.getOwnPropertyDescriptor;var ko=Object.getOwnPropertyNames;var Mo=Object.prototype.hasOwnProperty;var So=(o,r)=>{for(var s in r)Qe(o,s,{get:r[s],enumerable:!0})},Je=(o,r,s,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let c of ko(r))!Mo.call(o,c)&&c!==s&&Qe(o,c,{get:()=>r[c],enumerable:!(n=To(r,c))||n.enumerable});return o},t=(o,r,s)=>(Je(o,r,"default"),s&&Je(s,r,"default"));import{Compartment as I,EditorState as Le}from"@codemirror/state";import{oneDark as hn}from"@codemirror/theme-one-dark";import{EditorView as D,keymap as G}from"@codemirror/view";import{indentWithTab as yn,undo as xn,redo as bn}from"@codemirror/commands";import{defaultHighlightStyle as En,syntaxHighlighting as co,indentUnit as Ln,HighlightStyle as Tn}from"@codemirror/language";import{tags as kn}from"@lezer/highlight";var Ye=()=>document.querySelector("#editor-mode");var Ze=()=>String(Math.random())+"-"+Date.now().toFixed();var et=["esm.sh","skypack","esm.run","jsdelivr.esm","fastly.jsdelivr.esm","gcore.jsdelivr.esm","testingcf.jsdelivr.esm","jsdelivr.b-cdn.esm","jspm"],tt=["jsdelivr","fastly.jsdelivr","unpkg","gcore.jsdelivr","testingcf.jsdelivr","jsdelivr.b-cdn","npmcdn"],ot=["jsdelivr.gh","fastly.jsdelivr.gh","statically","gcore.jsdelivr.gh","testingcf.jsdelivr.gh","jsdelivr.b-cdn.gh"],B={getModuleUrl:(o,{isModule:r=!0,defaultCDN:s="esm.sh"}={})=>{o=o.replace(/#nobundle/g,"");let n=Xe(o,r,s);return n||(r?"https://esm.sh/"+o:"https://cdn.jsdelivr.net/npm/"+o)},getUrl:(o,r)=>o.startsWith("http")||o.startsWith("data:")?o:Xe(o,!1,r||wo())||o,cdnLists:{npm:tt,module:et,gh:ot},checkCDNs:async(o,r)=>{let s=[r,...B.cdnLists.npm].filter(Boolean);for(let n of s)try{if((await fetch(B.getUrl(o,n),{method:"HEAD"})).ok)return n}catch{}return B.cdnLists.npm[0]}},wo=()=>{if(globalThis.appCDN)return globalThis.appCDN;try{return new URL(location.href).searchParams.get("appCDN")||B.cdnLists.npm[0]}catch{return B.cdnLists.npm[0]}},Xe=(o,r,s)=>{let n=r&&o.startsWith("unpkg:")?"?module":"";o.startsWith("gh:")?o=o.replace("gh",ot[0]):o.includes(":")||(o=(s||(r?et[0]:tt[0]))+":"+o);for(let c of vo){let[l,a]=c;if(l.test(o))return o.replace(l,a)+n}return null},vo=[[/^(esm\.sh:)(.+)/i,"https://esm.sh/$2"],[/^(npm:)(.+)/i,"https://esm.sh/$2"],[/^(node:)(.+)/i,"https://esm.sh/$2"],[/^(jsr:)(.+)/i,"https://esm.sh/jsr/$2"],[/^(skypack:)(.+)/i,"https://cdn.skypack.dev/$2"],[/^(jsdelivr:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2"],[/^(fastly\.jsdelivr:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2"],[/^(gcore\.jsdelivr:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2"],[/^(testingcf\.jsdelivr:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2"],[/^(jsdelivr\.b-cdn:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2"],[/^(jsdelivr\.gh:)(.+)/i,"https://cdn.jsdelivr.net/gh/$2"],[/^(fastly\.jsdelivr\.gh:)(.+)/i,"https://fastly.jsdelivr.net/gh/$2"],[/^(gcore\.jsdelivr\.gh:)(.+)/i,"https://gcore.jsdelivr.net/gh/$2"],[/^(testingcf\.jsdelivr\.gh:)(.+)/i,"https://testingcf.jsdelivr.net/gh/$2"],[/^(jsdelivr\.b-cdn\.gh:)(.+)/i,"https://jsdelivr.b-cdn.net/gh/$2"],[/^(statically:)(.+)/i,"https://cdn.statically.io/gh/$2"],[/^(esm\.run:)(.+)/i,"https://esm.run/$2"],[/^(jsdelivr\.esm:)(.+)/i,"https://cdn.jsdelivr.net/npm/$2/+esm"],[/^(fastly\.jsdelivr\.esm:)(.+)/i,"https://fastly.jsdelivr.net/npm/$2/+esm"],[/^(gcore\.jsdelivr\.esm:)(.+)/i,"https://gcore.jsdelivr.net/npm/$2/+esm"],[/^(testingcf\.jsdelivr\.esm:)(.+)/i,"https://testingcf.jsdelivr.net/npm/$2/+esm"],[/^(jsdelivr\.b-cdn\.esm:)(.+)/i,"https://jsdelivr.b-cdn.net/npm/$2/+esm"],[/^(jspm:)(.+)/i,"https://jspm.dev/$2"],[/^(esbuild:)(.+)/i,"https://esbuild.vercel.app/$2"],[/^(bundle\.run:)(.+)/i,"https://bundle.run/$2"],[/^(unpkg:)(.+)/i,"https://unpkg.com/$2"],[/^(npmcdn:)(.+)/i,"https://npmcdn.com/$2"],[/^(bundlejs:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(bundle:)(.+)/i,"https://deno.bundlejs.com/?file&q=$2"],[/^(deno:)(.+)/i,"https://deno.bundlejs.com/?file&q=https://deno.land/x/$2/mod.ts"],[/^(https:\/\/deno\.land\/.+)/i,"https://deno.bundlejs.com/?file&q=$1"],[/^(github:|https:\/\/github\.com\/)(.[^\/]+?)\/(.[^\/]+?)\/(?!releases\/)(?:(?:blob|raw)\/)?(.+?\/.+)/i,"https://deno.bundlejs.com/?file&q=https://cdn.jsdelivr.net/gh/$2/$3@$4"],[/^(gist\.github:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(gitlab:|https:\/\/gitlab\.com\/)([^\/]+.*\/[^\/]+)\/(?:raw|blob)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://gl.githack.com/$2/raw/$3"],[/^(bitbucket:|https:\/\/bitbucket\.org\/)([^\/]+\/[^\/]+)\/(?:raw|src)\/(.+?)(?:\?.*)?$/i,"https://deno.bundlejs.com/?file&q=https://bb.githack.com/$2/raw/$3"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/]+)\/revisions\/([^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/$3/files/$4"],[/^(bitbucket:)snippets\/([^\/]+\/[^\/\#\?]+)(?:\?[^#]*)?(?:\#file-(.+?))$/i,"https://bb.githack.com/!api/2.0/snippets/$2/HEAD/files/$3"],[/^(bitbucket:)\!api\/2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(api\.bitbucket:)2.0\/snippets\/([^\/]+\/[^\/]+\/[^\/]+)\/files\/(.+?)(?:\?.*)?$/i,"https://bb.githack.com/!api/2.0/snippets/$2/files/$3"],[/^(rawgit:)(.+?\/[0-9a-f]+\/raw\/(?:[0-9a-f]+\/)?.+)$/i,"https://gist.githack.com/$2"],[/^(rawgit:|https:\/\/raw\.githubusercontent\.com)(\/[^\/]+\/[^\/]+|[0-9A-Za-z-]+\/[0-9a-f]+\/raw)\/(.+)/i,"https://deno.bundlejs.com/?file&q=https://raw.githack.com/$2/$3"]];var{getUrl:A,getModuleUrl:Cn}=B;var rt=A("cm6-theme-basic-light@0.2.0/dist/index.js"),nt=A("cm6-theme-basic-dark@0.2.0/dist/index.js"),st=A("cm6-theme-gruvbox-light@0.2.0/dist/index.js"),ct=A("cm6-theme-gruvbox-dark@0.2.0/dist/index.js"),it=A("cm6-theme-material-dark@0.2.0/dist/index.js"),at=A("cm6-theme-nord@0.2.0/dist/index.js"),lt=A("cm6-theme-solarized-light@0.2.0/dist/index.js"),mt=A("cm6-theme-solarized-dark@0.2.0/dist/index.js");var pt=A("comlink@4.4.1/dist/");var q=A("@ddietr/codemirror-themes@1.4.2/dist/theme/");var L=A("thememirror@2.0.1/dist/themes/");var Ao=o=>{let r=o.trim(),s,n;return o.includes(":")&&([s,r]=r.split(":"),s!=="monaco"&&s!=="codemirror"&&s!=="codejar"&&(s=void 0)),o.includes("@")&&([r,n]=r.split("@"),n!=="light"&&n!=="dark"&&(n=void 0)),{editor:s,editorTheme:r,theme:n}},dt=({editor:o,editorTheme:r,theme:s,editorThemes:n})=>{if(!r)return null;let l=(typeof r=="string"?r.split(",").map(a=>a.trim()):r).map(Ao);for(let a of l)if((a.editor===o||a.editor===void 0)&&(a.theme===s||a.theme===void 0)&&n.includes(a.editorTheme))return a.editorTheme;return null};import{keymap as ut,highlightSpecialChars as gt,drawSelection as ft,highlightActiveLine as Ho,dropCursor as jo,rectangularSelection as Uo,crosshairCursor as Co,lineNumbers as ce,highlightActiveLineGutter as qo}from"@codemirror/view";import{EditorState as Bo}from"@codemirror/state";import{defaultHighlightStyle as ht,syntaxHighlighting as yt,indentOnInput as Io,bracketMatching as Do,foldGutter as No,foldKeymap as Ro}from"@codemirror/language";import{defaultKeymap as xt,history as bt,historyKeymap as Et}from"@codemirror/commands";import{searchKeymap as Po,highlightSelectionMatches as $o}from"@codemirror/search";import{autocompletion as Fo,completionKeymap as Oo,closeBrackets as ie,closeBracketsKeymap as Wo}from"@codemirror/autocomplete";import{lintKeymap as Vo}from"@codemirror/lint";import{EditorView as zn}from"@codemirror/view";var Lt=[qo(),gt(),bt(),No(),ft(),jo(),Bo.allowMultipleSelections.of(!0),Io(),yt(ht,{fallback:!0}),Do(),Fo(),Uo(),Co(),Ho(),$o(),ut.of([...Wo,...xt,...Po,...Et,...Ro,...Oo,...Vo])],On=[gt(),bt(),ft(),yt(ht,{fallback:!0}),ut.of([...xt,...Et])];import{LanguageSupport as zo,StreamLanguage as Go}from"@codemirror/language";var k=o=>new zo(Go.define(o)),h=o=>`./vendor/codemirror/v6.0.1/${o}`,u={core:h("codemirror-core.js"),vue:h("codemirror-lang-vue.js"),json:h("codemirror-lang-json.js"),markdown:h("codemirror-lang-markdown.js"),python:h("codemirror-lang-python.js"),php:h("codemirror-lang-php.js"),cpp:h("codemirror-lang-cpp.js"),sql:h("codemirror-lang-sql.js"),wast:h("codemirror-lang-wast.js"),scss:h("codemirror-lang-scss.js"),coffeescript:h("codemirror-lang-coffeescript.js"),livescript:h("codemirror-lang-livescript.js"),ruby:h("codemirror-lang-ruby.js"),go:h("codemirror-lang-go.js"),perl:h("codemirror-lang-perl.js"),lua:h("codemirror-lang-lua.js"),r:h("codemirror-lang-r.js"),julia:h("codemirror-lang-julia.js"),scheme:h("codemirror-lang-scheme.js"),clojure:h("codemirror-lang-clojure.js"),tcl:h("codemirror-lang-tcl.js"),less:h("codemirror-lang-less.js"),stylus:h("codemirror-lang-stylus.js"),rust:h("codemirror-lang-rust.js"),swift:h("codemirror-lang-swift.js")},ae={html:async()=>(await import(u.core)).html(),css:async()=>(await import(u.core)).css(),javascript:async()=>(await import(u.core)).javascript(),typescript:async()=>(await import(u.core)).javascript({typescript:!0}),jsx:async()=>(await import(u.core)).javascript({jsx:!0}),tsx:async()=>(await import(u.core)).javascript({jsx:!0,typescript:!0}),json:async()=>(await import(u.core)).json(),vue:async()=>(await import(u.vue)).vue(),markdown:async()=>(await import(u.markdown)).markdown(),python:async()=>(await import(u.python)).python(),php:async()=>(await import(u.php)).php(),cpp:async()=>(await import(u.cpp)).cpp(),sql:async()=>(await import(u.sql)).sql(),wat:async()=>(await import(u.wast)).wast(),scss:async()=>(await import(u.scss)).sass(),sass:async()=>(await import(u.scss)).sass({indented:!0}),coffeescript:async()=>k((await import(u.coffeescript)).coffeeScript),livescript:async()=>k((await import(u.livescript)).liveScript),ruby:async()=>k((await import(u.ruby)).ruby),go:async()=>k((await import(u.go)).go),perl:async()=>k((await import(u.perl)).perl),lua:async()=>k((await import(u.lua)).lua),r:async()=>k((await import(u.r)).r),julia:async()=>k((await import(u.julia)).julia),scheme:async()=>k((await import(u.scheme)).scheme),clojure:async()=>k((await import(u.clojure)).clojure),tcl:async()=>k((await import(u.tcl)).tcl),less:async()=>k((await import(u.less)).less),stylus:async()=>k((await import(u.stylus)).stylus),rust:async()=>k((await import(u.rust)).rust),swift:async()=>k((await import(u.swift)).swift)};import{Decoration as me,EditorView as Ko,ViewPlugin as _o,WidgetType as Jo}from"@codemirror/view";import{getIndentUnit as kt}from"@codemirror/language";import{RangeSet as Qo}from"@codemirror/state";var Yo=me.mark({class:"cm-indentation-marker",tagName:"span"}),Zo=me.mark({class:"cm-indentation-marker active",tagName:"span"}),le=class extends Jo{constructor(r,s,n){super(),this.numIndent=r,this.indentSize=s,this.activeIndent=n}eq(r){return this.numIndent===r.numIndent&&this.indentSize===r.indentSize&&this.activeIndent===r.activeIndent}toDOM(r){let s=kt(r.state),n=document.createElement("span");n.style.top="0",n.style.left="4px",n.style.position="absolute",n.style.pointerEvents="none";for(let c=0;c<this.numIndent;c++){let l=document.createElement("span");l.className="cm-indentation-marker",l.classList.toggle("active",c===this.activeIndent),l.innerHTML=" ".repeat(s),n.appendChild(l)}return n}};function Mt(o,r,s){let n=0,c=0,l=null;for(let a=0;a<o.length;a++){if(o[a]!==" "&&o[a]!=="	")return c%r===0&&a!==0&&n++,n;(l==="	"||c%r===0)&&(n++,s&&s(a)),o[a]===" "?c++:c=0,l=o[a]}return n}function Xo(o,r){let s=Math.min(o,r),n=Math.max(o,r);return s===0&&n>0?1:s===n&&s>0?s-1:s}function er(o,r,s){let n=o.lines,c=r;for(;c<=n;){let{text:l}=o.line(c);if(l.trim().length===0){c++;continue}let a=Mt(l,s);return[c,a]}return[n+1,0]}function Tt(o){let r=kt(o.state),s=new Map,n=[];for(let{from:l,to:a}of o.visibleRanges){let m=l,f=0,p=0,x=0;for(;m<=a;){let b=o.state.doc.lineAt(m),{text:v}=b;if(v.trim().length===0){if(x<b.number){let[T,H]=er(o.state.doc,b.number+1,r);x=T,p=H}let S=Xo(f,p);s.set(b.number,S),n.push({from:m,to:m,lineNumber:b.number,create:T=>me.widget({widget:new le(S,r,T)})})}else{let S=[];f=Mt(v,r,T=>S.push(T)),s.set(b.number,S.length),n.push(...S.map((T,H)=>({from:b.from+T,to:b.from+T+1,lineNumber:b.number,create:j=>j===H?Zo:Yo})))}m=b.to+1}}let c=tr(o.state,s);return Qo.of(Array.from(n).map(({lineNumber:l,from:a,to:m,create:f})=>{let p=l>=c.start&&l<=c.end?c.activeIndent-1:void 0;return{from:a,to:m,value:f(p)}}),!0)}function tr(o,r){let s=o.doc.lineAt(o.selection.main.head),n=r.get(s.number),c=s.number,l=r.get(c+1);l&&n!=null&&l>n&&(n=l,c++);let a=r.get(c-1);if(a&&n!=null&&a>n&&(n=a,c--),!n)return{start:-1,end:-1,activeIndent:NaN};let m,f;for(m=c;m>=0;m--){let p=r.get(m-1);if(!p||p<n)break}for(f=c;;f++){let p=r.get(f+1);if(!p||p<n)break}return{start:m,end:f,activeIndent:n}}function or(){return _o.define(o=>({decorations:Tt(o),update(r){(r.docChanged||r.viewportChanged||r.selectionSet)&&(this.decorations=Tt(r.view))}}),{decorations:o=>o.decorations})}var rr=Ko.baseTheme({".cm-line":{position:"relative"},".cm-indentation-marker":{display:"inline-block"},"&light .cm-indentation-marker":{background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") left repeat-y'},"&light .cm-indentation-marker.active":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACAQMAAACjTyRkAAAABlBMVEX///+goKD0a5EfAAAADElEQVR4nGNgYGgAAACEAIHJde6SAAAAAElFTkSuQmCC) left repeat-y"},"&dark .cm-indentation-marker":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHB3d/8PAAOIAdULw8qMAAAAAElFTkSuQmCC) left repeat-y"},"&dark .cm-indentation-marker.active":{background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACAQMAAACjTyRkAAAABlBMVEUAAACFhYWZv3sFAAAAAnRSTlMA/1uRIrUAAAAMSURBVHicY2BgaAAAAIQAgcl17pIAAAAASUVORK5CYII=) left repeat-y"}});function pe(){return[or(),rr]}import{insertNewlineAndIndent as St,cursorCharLeft as wt,selectCharLeft as vt,cursorGroupLeft as nr,selectGroupLeft as sr,cursorCharRight as At,selectCharRight as Ht,cursorGroupRight as cr,selectGroupRight as ir,cursorLineUp as jt,selectLineUp as Ut,cursorLineDown as Ct,selectLineDown as qt,cursorLineBoundaryBackward as Bt,selectLineBoundaryBackward as It,cursorDocStart as Dt,selectDocStart as Nt,cursorPageUp as de,selectPageUp as Rt,cursorPageDown as ue,selectPageDown as Pt,cursorLineBoundaryForward as $t,selectLineBoundaryForward as Ft,cursorDocEnd as Ot,selectDocEnd as Wt,selectAll as ar,deleteCharBackward as ge,deleteCharForward as Vt,deleteGroupBackward as zt,deleteGroupForward as lr,deleteToLineStart as mr,deleteToLineEnd as Gt,cursorLineStart as pr,selectLineStart as dr,cursorLineEnd as ur,selectLineEnd as gr,splitLine as fr,transposeChars as hr,deleteLine as yr,moveLineDown as xr,moveLineUp as br,copyLineDown as Er,copyLineUp as Lr,selectLine as Tr,cursorMatchingBracket as kr,indentMore as Kt,indentLess as _t,lineComment as Mr,lineUncomment as Sr,toggleComment as wr,toggleBlockComment as vr,undo as Ar,redo as Jt,undoSelection as Hr}from"@codemirror/commands";import{openSearchPanel as jr,closeSearchPanel as Ur,selectMatches as Cr,replaceAll as qr,gotoLine as Br,selectNextOccurrence as Ir,selectSelectionMatches as Dr}from"@codemirror/search";import{foldCode as Nr,unfoldCode as Rr,foldAll as Pr,unfoldAll as $r}from"@codemirror/language";import{startCompletion as Fr,closeCompletion as Or,moveCompletionSelection as W,acceptCompletion as Qt,deleteBracketPair as Wr}from"@codemirror/autocomplete";import{openLintPanel as Vr,nextDiagnostic as zr}from"@codemirror/lint";import{EditorSelection as Yt}from"@codemirror/state";var Zt=o=>r=>{let s=o==="down",n=r.state.selection;for(let c of n.ranges)n=n.addRange(r.moveVertically(c,s));return r.dispatch({selection:n}),!0},Gr=Zt("up"),Kr=Zt("down"),_r=o=>{let r=null;for(let s of o.state.selection.ranges)if(!s.empty)for(let n=s.from;n<=s.to;){let c=o.state.doc.lineAt(n),l=Math.min(c.to,s.to);r?r=r.addRange(Yt.range(l,l)):r=Yt.single(l),n=c.to+1}return r?(o.dispatch({selection:r}),!0):!1},fe=[{key:"Ctrl-Space",run:Fr},{key:"Escape",run:Or},{key:"ArrowDown",run:W(!0)},{key:"ArrowUp",run:W(!1)},{key:"PageDown",run:W(!0,"page")},{key:"PageUp",run:W(!1,"page")},{key:"Enter",run:Qt},{key:"Tab",run:Qt},{key:"Mod-f",run:jr,scope:"editor search-panel"},{key:"Escape",run:Ur,scope:"editor search-panel"},{key:"Alt-Enter",run:Cr,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:qr,scope:"editor search-panel"},{key:"Ctrl-g",run:Br},{key:"Mod-d",run:Ir,preventDefault:!0},{key:"Shift-Mod-l",run:Dr},{key:"Enter",run:St,shift:St},{key:"ArrowLeft",run:wt,shift:vt,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:nr,shift:sr},{key:"ArrowRight",run:At,shift:Ht,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:cr,shift:ir},{key:"ArrowUp",run:jt,shift:Ut,preventDefault:!0},{key:"ArrowDown",run:Ct,shift:qt,preventDefault:!0},{key:"Home",run:Bt,shift:It},{mac:"Cmd-ArrowLeft",run:Bt,shift:It},{key:"Mod-Home",run:Dt,shift:Nt},{mac:"Cmd-ArrowUp",run:Dt,shift:Nt},{key:"PageUp",run:de,shift:Rt},{mac:"Ctrl-ArrowUp",run:de,shift:Rt},{key:"PageDown",run:ue,shift:Pt},{mac:"Ctrl-ArrowDown",run:ue,shift:Pt},{key:"End",run:$t,shift:Ft},{mac:"Cmd-ArrowRight",run:$t,shift:Ft},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:Gr,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:Kr,preventDefault:!0},{key:"Shift-Alt-i",run:_r},{key:"Mod-End",run:Ot,shift:Wt},{mac:"Cmd-ArrowDown",run:Ot,shift:Wt},{key:"Mod-a",run:ar},{key:"Backspace",run:Wr},{key:"Backspace",run:ge,shift:ge},{key:"Delete",run:Vt},{key:"Mod-Backspace",mac:"Alt-Backspace",run:zt},{key:"Mod-Delete",mac:"Alt-Delete",run:lr},{mac:"Mod-Backspace",run:mr},{mac:"Mod-Delete",run:Gt},{mac:"Ctrl-b",run:wt,shift:vt,preventDefault:!0},{mac:"Ctrl-f",run:At,shift:Ht},{mac:"Ctrl-p",run:jt,shift:Ut},{mac:"Ctrl-n",run:Ct,shift:qt},{mac:"Ctrl-a",run:pr,shift:dr},{mac:"Ctrl-e",run:ur,shift:gr},{mac:"Ctrl-d",run:Vt},{mac:"Ctrl-h",run:ge},{mac:"Ctrl-k",run:Gt},{mac:"Ctrl-Alt-h",run:zt},{mac:"Ctrl-o",run:fr},{mac:"Ctrl-t",run:hr},{mac:"Ctrl-v",run:ue},{mac:"Alt-v",run:de},{key:"Shift-Mod-k",run:yr},{key:"Alt-ArrowDown",run:xr},{key:"Alt-ArrowUp",run:br},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Er},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Lr},{key:"Mod-l",run:Tr,preventDefault:!0},{key:"Shift-Mod-\\",run:kr},{key:"Tab",run:Kt,shift:_t,preventDefault:!0},{key:"Mod-[",run:_t},{key:"Mod-]",run:Kt},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Nr},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Rr},{key:"Mod-k Mod-0",run:Pr},{key:"Mod-k Mod-j",run:$r},{key:"Mod-k Mod-c",run:Mr},{key:"Mod-k Mod-u",run:Sr},{key:"Mod-/",run:wr},{key:"Shift-Alt-a",run:vr},{key:"Mod-z",run:Ar,preventDefault:!0},{key:"Mod-y",run:Jt,preventDefault:!0},{key:"Mod-Shift-z",run:Jt,preventDefault:!0},{key:"Mod-u",run:Hr,preventDefault:!0},{key:"Mod-Shift-m",run:Vr},{key:"F8",run:zr}];import{EditorView as Jr,ViewPlugin as Qr,Decoration as P,WidgetType as Yr}from"@codemirror/view";import{syntaxTree as Zr}from"@codemirror/language";var xe=new Map([["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkgrey","#a9a9a9"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkslategrey","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["goldenrod","#daa520"],["gold","#ffd700"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["grey","#808080"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavenderblush","#fff0f5"],["lavender","#e6e6fa"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgray","#d3d3d3"],["lightgreen","#90ee90"],["lightgrey","#d3d3d3"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370db"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#db7093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["slategrey","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]]),Xr=function(o,r){var s={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&r.indexOf(n)<0&&(s[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,n=Object.getOwnPropertySymbols(o);c<n.length;c++)r.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(o,n[c])&&(s[n[c]]=o[n[c]]);return s},oo=new WeakMap,U=function(o){return o.rgb="RGB",o.hex="HEX",o.named="NAMED",o.hsl="HSL",o}(U||(U={})),en=/rgb\(\s*(\d{1,3}%?)\s*,?\s*(\d{1,3}%?)\s*,?\s*(\d{1,3}%?)\s*(,\s*0?\.\d+)?\)/,tn=/hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(,\s*0?\.\d+)?\)/;function Xt(o){let r=[];for(let s of o.visibleRanges)Zr(o.state).iterate({from:s.from,to:s.to,enter:({type:n,from:c,to:l})=>{if(n.name==="CallExpression"){let a=o.state.doc.sliceString(c,l);if(a.startsWith("rgb")){let m=en.exec(a);if(!m)return;let[f,p,x,b,v]=m,S=rn(p,x,b),T=P.widget({widget:new R({colorType:U.rgb,color:S,from:c,to:l,alpha:v||""}),side:1});r.push(T.range(c));return}if(a.startsWith("hsl")){let m=tn.exec(a);if(!m)return;let[f,p,x,b,v]=m,S=nn(p,x,b),T=P.widget({widget:new R({colorType:U.hsl,color:S,from:c,to:l,alpha:v||""}),side:1});r.push(T.range(c));return}}if(n.name==="ColorLiteral"){let[a,m]=on(o.state.doc.sliceString(c,l)),f=P.widget({widget:new R({colorType:U.hex,color:a,from:c,to:l,alpha:m}),side:1});r.push(f.range(c))}if(n.name==="ValueName"){let a=o.state.doc.sliceString(c,l);if(xe.has(a)){let m=xe.get(a),f=P.widget({widget:new R({colorType:U.named,color:m,from:c,to:l,alpha:""}),side:1});r.push(f.range(c))}}}});return P.set(r)}function on(o){return o.length===4?[`#${o[1].repeat(2)}${o[2].repeat(2)}${o[3].repeat(2)}`,""]:o.length===5?[`#${o[1].repeat(2)}${o[2].repeat(2)}${o[3].repeat(2)}`,o[4].repeat(2)]:o.length===9?[`#${o.slice(1,-2)}`,o.slice(-2)]:[o,""]}function he(o){let r;if(o.endsWith("%")){let s=Number(o.slice(0,-1));r=Math.round(s/100*255)}else r=Number(o);return V(r)}function V(o){let r=o.toString(16);return r.length==1?"0"+r:r}function eo(o){let r=o.slice(1,3),s=o.slice(3,5),n=o.slice(5,7);return[parseInt(r,16),parseInt(s,16),parseInt(n,16)]}function rn(o,r,s){return`#${he(o)}${he(r)}${he(s)}`}function nn(o,r,s){let n=Number(r)/100,c=Number(s)/100,[l,a,m]=sn(Number(o),n,c);return`#${V(l)}${V(a)}${V(m)}`}function sn(o,r,s){if(r===0){let b=Math.round(s*255);return[b,b,b]}let n;s<.5?n=s*(1+r):n=s+r-s*r;let c=2*s-n;o=o/360;let l=to(o+.333),a=o,m=to(o-.333),f=ye(n,c,l),p=ye(n,c,a),x=ye(n,c,m);return[Math.round(f*255),Math.round(p*255),Math.round(x*255)]}function to(o){return o<0?o+1:o>1?o-1:o}function ye(o,r,s){return 6*s<1?r+(o-r)*6*s:2*s<1?o:3*s<2?r+(o-r)*(.666-s)*6:r}function cn(o,r,s){let n=o/255,c=r/255,l=s/255,a=Math.min(n,c,l),m=Math.max(n,c,l),f=(m+a)/2;if(m===a)return[0,0,f];let p;f<=.5?p=(m-a)/(m+a):p=(m-a)/(2-m-a);let x;for(m===n?x=(c-l)/(m-a):c===m?x=2+(l-n)/(m-a):x=4+(n-c)/(m-a),x=Math.round(x*60);x<0;)x+=360;return[x,p,f]}var z="cm-css-color-picker-wrapper",R=class extends Yr{constructor(r){var{color:s}=r,n=Xr(r,["color"]);super(),this.state=n,this.color=s}eq(r){return r.state.colorType===this.state.colorType&&r.color===this.color&&r.state.from===this.state.from&&r.state.to===this.state.to&&r.state.alpha===this.state.alpha}toDOM(){let r=document.createElement("input");oo.set(r,this.state),r.type="color",r.value=this.color;let s=document.createElement("span");return s.appendChild(r),s.className=z,s}ignoreEvent(){return!1}},an=Jr.baseTheme({[`.${z}`]:{display:"inline-block",outline:"1px solid #eee",marginRight:"0.6ch",height:"1em",width:"1em",transform:"translateY(1px)"},[`.${z} input[type="color"]`]:{cursor:"pointer",height:"100%",width:"100%",padding:0,border:"none","&::-webkit-color-swatch-wrapper":{padding:0},"&::-webkit-color-swatch":{border:"none"},"&::-moz-color-swatch":{border:"none"}}}),ln=Qr.fromClass(class{constructor(r){this.decorations=Xt(r)}update(r){(r.docChanged||r.viewportChanged)&&(this.decorations=Xt(r.view))}},{decorations:o=>o.decorations,eventHandlers:{change:(o,r)=>{let s=o.target;if(s.nodeName!=="INPUT"||!s.parentElement||!s.parentElement.classList.contains(z))return!1;let n=oo.get(s),c=s.value+n.alpha;if(n.colorType===U.rgb)c=`rgb(${eo(s.value).join(", ")}${n.alpha})`;else if(n.colorType===U.named)for(let[l,a]of xe.entries())a===s.value&&(c=l);else if(n.colorType===U.hsl){let[l,a,m]=eo(s.value),[f,p,x]=cn(l,a,m);c=`hsl(${f}, ${Math.round(p*100)}%, ${Math.round(x*100)}%${n.alpha})`}return r.dispatch({changes:{from:n.from,to:n.to,insert:c}}),!0}}}),be=[ln,an];import{lineNumbers as gs,highlightActiveLineGutter as fs,highlightSpecialChars as hs,drawSelection as ys,dropCursor as xs,rectangularSelection as bs,crosshairCursor as Es,highlightActiveLine as Ls,keymap as Ts}from"@codemirror/view";import{EditorView as ro}from"@codemirror/view";import{EditorState as Ms}from"@codemirror/state";import{foldGutter as ws,indentOnInput as vs,syntaxHighlighting as As,defaultHighlightStyle as Hs,bracketMatching as js,foldKeymap as Us}from"@codemirror/language";import{history as qs,defaultKeymap as Bs,historyKeymap as Is}from"@codemirror/commands";import{highlightSelectionMatches as Ns,searchKeymap as Rs}from"@codemirror/search";import{closeBrackets as $s,autocompletion as Fs,closeBracketsKeymap as Os,completionKeymap as Ws}from"@codemirror/autocomplete";import{lintKeymap as zs}from"@codemirror/lint";import{HighlightStyle as mn,syntaxHighlighting as pn}from"@codemirror/language";var Ee=[{name:"amy",title:"Amy",url:L+"amy.js",exportName:"amy"},{name:"aura",title:"Aura",url:q+"aura.js",exportName:"aura"},{name:"ayu-light",title:"Ayu Light",url:L+"ayu-light.js",exportName:"ayuLight"},{name:"barf",title:"Barf",url:L+"barf.js",exportName:"barf"},{name:"basic-light",title:"Basic Light",url:rt,exportName:"basicLight"},{name:"basic-dark",title:"Basic Dark",url:nt,exportName:"basicDark"},{name:"bespin",title:"Bespin",url:L+"bespin.js",exportName:"bespin"},{name:"birds-of-paradise",title:"Birds of Paradise",url:L+"birds-of-paradise.js",exportName:"birdsOfParadise"},{name:"boys-and-girls",title:"Boys and Girls",url:L+"boys-and-girls.js",exportName:"boysAndGirls"},{name:"clouds",title:"Clouds",url:L+"clouds.js",exportName:"clouds"},{name:"cobalt",title:"Cobalt",url:L+"cobalt.js",exportName:"cobalt"},{name:"cm-light",title:"Codemirror Light"},{name:"cool-glow",title:"Cool Glow",url:L+"cool-glow.js",exportName:"coolGlow"},{name:"dracula",title:"Dracula",url:L+"dracula.js",exportName:"dracula"},{name:"espresso",title:"Espresso",url:L+"espresso.js",exportName:"espresso"},{name:"github-dark",title:"GitHub Dark",url:q+"github-dark.js",exportName:"githubDark"},{name:"github-light",title:"GitHub Light",url:q+"github-light.js",exportName:"githubLight"},{name:"gruvbox-dark",title:"Gruvbox Dark",url:ct,exportName:"gruvboxDark"},{name:"gruvbox-light",title:"Gruvbox Light",url:st,exportName:"gruvboxLight"},{name:"material-dark",title:"Material Dark",url:it,exportName:"materialDark"},{name:"material-light",title:"Material Light",url:q+"material-light.js",exportName:"materialLight"},{name:"monochrome",title:"Monochrome"},{name:"monochrome-dark",title:"Monochrome Dark"},{name:"noctis-lilac",title:"Noctis Lilac",url:L+"noctis-lilac.js",exportName:"noctisLilac"},{name:"nord",title:"Nord",url:at,exportName:"nord"},{name:"one-dark",title:"One Dark"},{name:"rose-pine-dawn",title:"Ros\xE9 Pine Dawn",url:L+"rose-pine-dawn.js",exportName:"rosePineDawn"},{name:"smoothy",title:"Smoothy",url:L+"smoothy.js",exportName:"smoothy"},{name:"solarized-dark",title:"Solarized Dark",url:mt,exportName:"solarizedDark"},{name:"solarized-light",title:"Solarized Light",url:lt,exportName:"solarizedLight"},{name:"tokyo-night",title:"Tokyo Night",url:q+"tokyo-night.js",exportName:"tokyoNight"},{name:"tokyo-night-day",title:"Tokyo Night Day",url:q+"tokyo-night-day.js",exportName:"tokyoNightDay"},{name:"tokyo-night-storm",title:"Tokyo Night Storm",url:q+"tokyo-night-storm.js",exportName:"tokyoNightStorm"},{name:"tomorrow",title:"Tomorrow",url:L+"tomorrow.js",exportName:"tomorrow"}],no=({variant:o,settings:r,styles:s})=>{let n=ro.theme({"&":{backgroundColor:r.background,color:r.foreground},".cm-content":{caretColor:r.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:r.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-selectionMatch, .cm-content ::selection":{backgroundColor:r.selection},".cm-activeLine":{backgroundColor:r.lineHighlight},".cm-gutters":{backgroundColor:r.gutterBackground,color:r.gutterForeground},".cm-activeLineGutter":{backgroundColor:r.lineHighlight}},{dark:o==="dark"}),c=mn.define(s);return[n,pn(c)]},so={monochrome:no({variant:"light",settings:{background:"#fffffe",foreground:"#24292e",caret:"#24292e",selection:"#c8c8fa",gutterBackground:"#fffffe",gutterForeground:"#24292e",lineHighlight:"#f1faff"},styles:[]}),"monochrome-dark":no({variant:"dark",settings:{background:"#24292e",foreground:"#e2e2e3",caret:"#e2e2e3",selection:"#444d56",gutterBackground:"#24292e",gutterForeground:"#e2e2e3",lineHighlight:"#444d56"},styles:[]})};var e={};So(e,{html:()=>dn,htmlCompletionSource:()=>un,htmlCompletionSourceWith:()=>gn,htmlLanguage:()=>fn});t(e,Zs);t(e,Xs);t(e,ec);t(e,tc);t(e,oc);t(e,rc);t(e,nc);t(e,cc);t(e,ic);t(e,ac);t(e,lc);t(e,mc);t(e,pc);t(e,dc);import*as Zs from"@codemirror/autocomplete";import*as Xs from"@codemirror/commands";import*as ec from"@codemirror/language";import*as tc from"@codemirror/lint";import*as oc from"@codemirror/search";import*as rc from"@codemirror/state";import*as nc from"@codemirror/view";import{html as dn,htmlCompletionSource as un,htmlCompletionSourceWith as gn,htmlLanguage as fn}from"@codemirror/lang-html";import*as cc from"@codemirror/lang-css";import*as ic from"@codemirror/lang-javascript";import*as ac from"@codemirror/lang-json";import*as lc from"@codemirror/theme-one-dark";import*as mc from"@lezer/common";import*as pc from"@lezer/highlight";import*as dc from"@lezer/lr";var K=[],Te,Ac=async o=>{let{baseUrl:r,container:s,readonly:n,isEmbed:c,editorId:l,getFormatterConfig:a,getFontFamily:m,getLanguageExtension:f}=o,p={...o};if(!s)throw new Error("editor container not found");let x=async i=>ae[i]?.()||ae.html?.(),b=i=>["vue","vue3","vue2"].includes(i)?"vue":o.mapLanguage?.(i)||i,v={"one-dark":hn,"cm-light":[co(En),D.theme({"&":{backgroundColor:"#ffffff"}})],...so},S={dark:"one-dark",light:"cm-light"},T=()=>v[ke]||v[S[o.theme]]||[],H=o.language,j=b(H),_=await x(j),ke=await Ve(o.theme,o.editorTheme),$=[],J=[],io=i=>{i.docChanged&&J.forEach(d=>d(i))},C,Q,Y,Z,X,Me=i=>j==="typescript"?i:j==="javascript"?i.slice(0,-1):[],Se,we=new Promise(i=>Se=i),ve=async(i=!1)=>{let d=C&&i?"changeCodeMirrorLanguage":"initCodeMirrorTS";if(i&&(C=void 0),!["typescript","javascript"].includes(j)||C)return;let g=`${r}vendor/codemirror/v6.0.1/codemirror-ts.js`,[E,M,w]=await Promise.all([import(g),import(pt+"esm/comlink.min.js"),window.compiler.typescriptFeatures({feature:d,payload:H})]),{tsFacetWorker:N,tsSyncWorker:se,tsLinterWorker:F,tsAutocompleteWorker:yo,tsHoverWorker:xo}=E;if(!Te){let Ke=document.querySelector("#compiler-frame");if(!Ke?.contentWindow)return;let _e=M.wrap(M.windowEndpoint(Ke.contentWindow));await _e.initialize(),Te=_e}let bo=Ze(),O=f(H),Eo=j==="typescript"&&!O?.endsWith("ts")&&!O?.endsWith("tsx")?O+".tsx":O,Lo=`/${l}.${bo}.${Eo}`;C=C||[N.of({worker:Te,path:Lo}),se(),(0,e.autocompletion)({override:[yo()]}),xo(),F()],y.dispatch({effects:[je.reconfigure(Me(C))]})},ao=i=>{we.then(()=>{window.compiler.typescriptFeatures({feature:"addTypes",payload:i})})},Ae=async i=>{let d={vim:"./vendor/codemirror/v6.0.1/codemirror-vim.js",emacs:"./vendor/codemirror/v6.0.1/codemirror-emacs.js",emmet:"./vendor/codemirror/v6.0.1/codemirror-emmet.js",codeium:"./vendor/codemirror/v6.0.1/codemirror-codeium.js"},[g,E,M,w]=await Promise.all([i.editorMode==="vim"?import(d.vim):Promise.resolve({}),i.editorMode==="emacs"?import(d.emacs):Promise.resolve({}),i.emmet?import(d.emmet):Promise.resolve({}),i.enableAI?import(d.codeium):Promise.resolve({})]);Q=g.vim,Y=E.emacs,Z=M.emmet,X=w.codeium};await Ae(o);let He=new I,je=new I,Ue=new I,Ce=new I,ee=D.editable.of(!1),qe=new I,Be=new I,Ie=new I,lo=Tn.define([{tag:kn.comment,fontStyle:"italic"}]),De=i=>{let d=(i.fontSize??p.fontSize)||(c?12:14),g=m(i.fontFamily??p.fontFamily),E=i.tabSize??p.tabSize,M=i.useTabs??p.useTabs,w=i.wordWrap??p.wordWrap,N=i.emmet??p.emmet,se=i.enableAI??p.enableAI,F=i.editorMode??p.editorMode;return[Le.tabSize.of(E),Ln.of(M?"	":" ".repeat(E)),...w?[D.lineWrapping]:[],...F==="vim"&&Q?[Q()]:F==="emacs"&&Y?[Y()]:[],...N&&Z?[Z]:[],...se&&X?[X(K,b)]:[],D.theme({"&":{height:"100%",fontSize:d+"px"},".cm-scroller":{overflow:"auto",fontFamily:g}})]},Ne=()=>{let i=[He.of(_),je.of(["typescript","javascript"].includes(j)&&C?Me(C):[]),D.updateListener.of(io),Ce.of(T()),co(lo),qe.of(De({})),Ue.of(G.of($)),Be.of(p.lineNumbers?ce():[]),Ie.of(p.closeBrackets?ie():[]),Lt,n?ee:[],G.of([yn]),G.of(fe),pe(),be],d=[ee,...i],g=[ee,...i],E=[...i];return l==="console"?E:l==="compiled"?g:o.mode==="codeblock"?d:i},Re=async i=>{let d=Ye(),g=E=>{d&&(d.textContent=E)};i||g(""),i==="vim"&&g("Vim"),i==="emacs"&&g("Emacs")},y=new D({state:Le.create({extensions:Ne(),doc:o.value}),parent:s});Re(o.editorMode);let mo=()=>l,te=()=>y.state.doc.toString(),oe=(i="",d=!0)=>{d?y.setState(Le.create({doc:i,extensions:Ne()})):y.dispatch({changes:{from:0,to:y.state.doc.length,insert:i}})},Pe=()=>y.focus(),$e=()=>H,po=(i,d)=>{H=i,j=b(H),x(j).then(g=>{_=g,y.dispatch({effects:[He.reconfigure(_)]})}),we.then(()=>{ve(!0)}),d!=null&&oe(d)},Fe={editorId:l,getLanguage:$e,getValue:te};K.push(Fe),ve().then(()=>{Se()});let uo=i=>{J.push(i)},Oe={CtrlEnter:"Ctrl-Enter",ShiftEnter:"Shift-Enter",Enter:"Enter",UpArrow:"ArrowUp",DownArrow:"ArrowDown",ShiftAltF:"Shift-Alt-f"},re=(i,d,g)=>{$.push({key:d,run(){return g(),!0}}),y.dispatch({effects:Ue.reconfigure(G.of($))})},ne,go=i=>{i&&(ne=i,re("format",Oe.ShiftAltF,async()=>{await We(),Pe()}))},We=async()=>{if(!ne)return;let i=y.state.selection.main.to,d=te(),g=await ne(d,i,a());oe(g.formatted,!1);let E=g.cursorOffset>=0?g.cursorOffset:0;y.dispatch({selection:{anchor:E}})};async function Ve(i,d){let g=dt({editor:"codemirror",editorTheme:d,theme:i,editorThemes:Ee.map(w=>w.name)}),E=g||S[i],M=Ee.find(w=>w.name===E);if(!v[E]&&M?.url){let w=(await import(M.url))[M.exportName||"default"];v[E]=w}return E}let ze=(i,d)=>{Ve(i,d).then(g=>{ke=g,y.dispatch({effects:Ce.reconfigure(T())})})},fo=i=>{p={...i},Ae(p).then(()=>{y.dispatch({effects:[qe.reconfigure(De(p)),Be.reconfigure(p.lineNumbers?ce():[]),Ie.reconfigure(p.closeBrackets?ie():[])]}),ze(p.theme,p.editorTheme),Re(p.editorMode)})},ho=()=>{xn({state:y.state,dispatch:y.dispatch})},Ge=()=>{bn({state:y.state,dispatch:y.dispatch})};return re("redo","Mod-Shift-z",Ge),{getValue:te,setValue:oe,getLanguage:$e,setLanguage:po,getEditorId:mo,focus:Pe,getPosition:()=>{let i=y.state.selection.asSingle().ranges[0].from,d=y.state.doc.lineAt(i),g=d.number,E=i-d.from+1;return{lineNumber:g,column:E}},setPosition:({lineNumber:i,column:d=1})=>{let g=d-1,E=y.state.doc.lines>i?i:y.state.doc.lines,M=y.state.doc.line(E),w=M.length>g?g:M.length,N=M.from+w;y.dispatch({selection:{anchor:N},effects:[D.scrollIntoView(N,{x:"center",y:"center"})]})},addTypes:ao,onContentChanged:uo,keyCodes:Oe,addKeyBinding:re,changeSettings:fo,registerFormatter:go,format:We,isReadonly:n,setTheme:ze,undo:ho,redo:Ge,destroy:()=>{J.length=0,$.length=0,y.destroy(),s.innerHTML="",K.splice(K.indexOf(Fe),1)},codemirror:y}};export{Ac as createEditor};
