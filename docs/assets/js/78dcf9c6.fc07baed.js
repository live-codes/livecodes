"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["8118"],{38050:function(e,s,t){t.r(s),t.d(s,{default:()=>f,frontMatter:()=>l,metadata:()=>n,assets:()=>c,toc:()=>h,contentTitle:()=>d});var n=JSON.parse('{"id":"features/embeds","title":"Embedded Playgrounds","description":"Overview","source":"@site/docs/features/embeds.mdx","sourceDirName":"features","slug":"/features/embeds","permalink":"/livecodes/docs/features/embeds","draft":false,"unlisted":false,"editUrl":"https://github.com/live-codes/livecodes/tree/develop/docs/docs/features/embeds.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Mobile Support","permalink":"/livecodes/docs/features/mobile"},"next":{"title":"Lite Mode","permalink":"/livecodes/docs/features/lite"}}'),o=t("85893"),r=t("50065"),i=t("13365"),a=t("58500");let l={},d="Embedded Playgrounds",c={},h=[{value:"Overview",id:"overview",level:2},{value:"Create Embedded Playground",id:"create-embedded-playground",level:2},{value:"App Embed Screen",id:"app-embed-screen",level:3},{value:"SDK",id:"sdk",level:3},{value:"Avoid Breaking Changes",id:"avoid-breaking-changes",level:2},{value:"Differences from Full App",id:"differences-from-full-app",level:2},{value:"Features Not Available",id:"features-not-available",level:3},{value:"Features Not Shown by Default",id:"features-not-shown-by-default",level:3},{value:"Security",id:"security",level:2},{value:"Related",id:"related",level:2}];function u(e){let s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",ul:"ul",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"embedded-playgrounds",children:"Embedded Playgrounds"})}),"\n","\n",(0,o.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsxs)(s.p,{children:["LiveCodes playgrounds can be embedded in any web page. The playground can be ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/code-prefill",children:"prefilled with code"})," in any supported language. This can be very useful in documentation websites, technical blogs, educational websites and others."]}),"\n",(0,o.jsx)(s.p,{children:"Demo:"}),"\n",(0,o.jsx)(i.Z,{template:"javascript"}),"\n",(0,o.jsxs)(s.p,{children:["The embedding web page can communicate with the playground using a powerful ",(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/",children:"SDK"})," (e.g. edit/format code, watch for code changes, get the compiled code or result page HTML, run tests, change layout, ...etc)."]}),"\n",(0,o.jsx)(s.h2,{id:"create-embedded-playground",children:"Create Embedded Playground"}),"\n",(0,o.jsx)(s.h3,{id:"app-embed-screen",children:"App Embed Screen"}),"\n",(0,o.jsxs)(s.p,{children:["In the ",(0,o.jsx)(s.a,{href:"/livecodes/docs/getting-started#standalone-app",children:"standalone app"}),", the Embed Screen can be accessed from Project menu \u2192 Embed."]}),"\n","\n",(0,o.jsx)(a.Z,{params:{screen:"embed"},linkText:"direct link"}),"\n",(0,o.jsxs)(s.p,{children:["It shows a preview of the embedded playground, allows customizations of ",(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/js-ts#embed-options",children:"embed options"})," and provides generated code that can be added to the web page that will embed the playground."]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.img,{alt:"LiveCodes embed",src:t(76054).Z+"",width:"2240",height:"1400"}),"\n",(0,o.jsx)(s.img,{alt:"LiveCodes embed",src:t(36494).Z+"",width:"2240",height:"1400"}),"\n",(0,o.jsx)(s.img,{alt:"LiveCodes embed",src:t(67254).Z+"",width:"2240",height:"1400"})]}),"\n",(0,o.jsx)(s.admonition,{title:"Note",type:"info",children:(0,o.jsxs)(s.p,{children:["Please note that the Embed Screen sends the project code to ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/share",children:"LiveCodes share service"})," to generate a short URL for usage in the embed code."]})}),"\n",(0,o.jsx)(s.p,{children:'The setting "Embed Type" allows selection from different variations of the generated code:'}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Using the SDK from CDN."}),"\n",(0,o.jsx)(s.li,{children:"Using the SDK with a bundler (e.g. vite, parcel, webpack, etc)."}),"\n",(0,o.jsx)(s.li,{children:"Using the React SDK."}),"\n",(0,o.jsx)(s.li,{children:"Using the Vue SDK."}),"\n",(0,o.jsxs)(s.li,{children:["Using iframe and ",(0,o.jsx)(s.a,{href:"/livecodes/docs/configuration/query-params",children:"query params"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Using HTML code that the SDK can use to ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/code-prefill#auto-prefill-from-page-dom",children:"auto-prefill"})," the playground."]}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"sdk",children:"SDK"}),"\n",(0,o.jsxs)(s.p,{children:["The LiveCodes ",(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/",children:"SDK"})," can be used to embed playgrounds, specify ",(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/js-ts#embed-options",children:"embed"})," and ",(0,o.jsx)(s.a,{href:"/livecodes/docs/configuration/",children:"configuration"})," options and allows communication with the embedded playground with many ",(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/js-ts#sdk-methods",children:"SDK methods"}),"."]}),"\n",(0,o.jsx)(s.p,{children:"This method provides more control and allows advanced scenarios."}),"\n",(0,o.jsx)(s.h2,{id:"avoid-breaking-changes",children:"Avoid Breaking Changes"}),"\n",(0,o.jsx)(s.p,{children:"To avoid breaking changes that would cause the embedded playgrounds to stop working as expected with later updates, follow these recommendations:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Use a ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/permanent-url",children:"permanent URL"})," to a pinned version of the LiveCodes app for ",(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/js-ts#appurl",children:(0,o.jsx)(s.code,{children:"EmbedOptions.appUrl"})}),". The code generated in the Embed screen uses that by default."]}),"\n",(0,o.jsx)(s.li,{children:"Specify the version of the SDK used. The code generated in the Embed screen also does that."}),"\n",(0,o.jsxs)(s.li,{children:["For project code, ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/module-resolution#package-version",children:"specify the versions"})," of the imported packages and ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/external-resources",children:"external resources"}),". ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/module-resolution#custom-module-resolution",children:"Custom import maps"})," can be set to control the module import behavior."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["Check the ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/permanent-url",children:"Permanent URL"})," section for more details."]}),"\n",(0,o.jsx)(s.h2,{id:"differences-from-full-app",children:"Differences from Full App"}),"\n",(0,o.jsx)(s.p,{children:"Some of the features of the full standalone app are not available or shown by default in embedded playgrounds, either because of security reasons, being not useful when embedded or because of space limitations."}),"\n",(0,o.jsx)(s.h3,{id:"features-not-available",children:"Features Not Available"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["All features that require saving/loading from browser storage:\ne.g. ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/projects",children:"projects"}),", ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/assets",children:"assets"}),", ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/snippets",children:"code snippets"}),", ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/user-settings",children:"user settings"}),", ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/default-template-language",children:"default template/language"}),", ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/recover",children:"recover unsaved"}),", ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/backup-restore",children:"backup/restore"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["All features that require authentication:\ne.g. ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/github-integration",children:"login/logout"}),", ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/sync",children:"sync"}),", ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/deploy",children:"deploy"}),", ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/import",children:"importing"})," from private github repos."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/livecodes/docs/features/broadcast",children:"Broadcast"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"App menus."}),"\n",(0,o.jsxs)(s.li,{children:["Some tools in ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/tools-pane",children:"tools pane"}),":\ne.g. open result page in new window, broadcast status."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/livecodes/docs/features/welcome",children:"Welcome screen"}),"."]}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"features-not-shown-by-default",children:"Features Not Shown by Default"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/livecodes/docs/features/external-resources",children:"External resources"})," button (below the editor) and external resources screen are only shown if the loaded project has external resources (e.g. via ",(0,o.jsx)(s.a,{href:"/livecodes/docs/configuration/configuration-object#stylesheets",children:(0,o.jsx)(s.code,{children:"EmbedOptions.config.stylesheets"})})," and ",(0,o.jsx)(s.a,{href:"/livecodes/docs/configuration/configuration-object#scripts",children:(0,o.jsx)(s.code,{children:"EmbedOptions.config.scripts"})}),")."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/livecodes/docs/features/tests",children:"Tests"})," are not shown in ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/tools-pane",children:"tools pane"})," unless the loaded project has tests (e.g. via ",(0,o.jsx)(s.a,{href:"/livecodes/docs/configuration/configuration-object#tests",children:(0,o.jsx)(s.code,{children:"EmbedOptions.config.tests"})}),"). Test editor is not available."]}),"\n",(0,o.jsxs)(s.li,{children:["Loading ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/templates",children:"starter templates"})," can be achieved by the ",(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/",children:"SDK"})," (",(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/js-ts#template",children:(0,o.jsx)(s.code,{children:"EmbedOptions.template"})}),"), not from the UI."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.a,{href:"/livecodes/docs/features/import",children:"Importing"})," from external sources can be achieved by the ",(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/",children:"SDK"})," (",(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/js-ts#import",children:(0,o.jsx)(s.code,{children:"EmbedOptions.import"})}),"), not from the UI."]}),"\n",(0,o.jsxs)(s.li,{children:["Getting a ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/share",children:"share"})," URL can be achieved by the ",(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/",children:"SDK"})," (",(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/js-ts#getshareurl",children:(0,o.jsx)(s.code,{children:"getShareUrl"})})," method), not from the UI."]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"security",children:"Security"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:["All user code, ",(0,o.jsx)(s.a,{href:"/livecodes/docs/features/result",children:"result page"})," and compilers run in ",(0,o.jsx)(s.a,{href:"https://www.html5rocks.com/en/tutorials/security/sandboxed-iframes/",children:"sandboxed iframes"})," with a unique origin."]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["\n",(0,o.jsxs)(s.p,{children:["Embedded playgrounds do not have access to the parent page, or to sensitive data like user cookies and localstorage of the embedding page origin. Communications with the SDK occur by means of ",(0,o.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage",children:(0,o.jsx)(s.code,{children:"postMessage"})})," calls."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"related",children:"Related"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/",children:"SDK"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"/livecodes/docs/features/code-prefill",children:"Code prefill"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"/livecodes/docs/configuration/",children:"Configuration"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/js-ts#embed-options",children:"Embed options"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"/livecodes/docs/sdk/js-ts#sdk-methods",children:"SDK methods"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"/livecodes/docs/features/permanent-url",children:"Permanent URL"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"/livecodes/docs/features/lite",children:"Lite mode"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"/livecodes/docs/features/read-only",children:"Read-only"})}),"\n"]})]})}function f(e={}){let{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},76054:function(e,s,t){t.d(s,{Z:function(){return n}});let n=t.p+"assets/images/embed-1-408ede1485d4bc08a9d49ae7c79dd077.jpg"},36494:function(e,s,t){t.d(s,{Z:function(){return n}});let n=t.p+"assets/images/embed-2-1a99c4db9d201fd7d7a928cccc31b1b6.jpg"},67254:function(e,s,t){t.d(s,{Z:function(){return n}});let n=t.p+"assets/images/embed-3-c90eef02803a8609e7c39ccb48bbe5a6.jpg"},13365:function(e,s,t){t.d(s,{Z:()=>g});var n=t("85893"),o=t("79207"),r=t("67294"),i=t("38294");function a(e){let s=(0,r.useRef)(null),[t,o]=(0,r.useState)(e.className||""),[a,l]=(0,r.useState)(e.style||{}),[d,c]=(0,r.useState)(e.height),[h,u]=(0,r.useState)(),[f,p]=(0,r.useState)(JSON.stringify(e.config||"")),[m,g]=(0,r.useState)("");return(0,r.useEffect)(()=>{if(!s.current)return;let{className:t,style:n,height:r,sdkReady:a,config:d,...v}=e;if(o(t||""),l(n||{}),c(r),h&&m===JSON.stringify(v)){if(f===JSON.stringify(d))return;p(JSON.stringify(d)),"string"==typeof d?fetch(d).then(e=>e.json()).then(e=>{h?.setConfig(e)}):d&&h.setConfig(d)}else g(JSON.stringify(v)),h?.destroy(),(0,i.T)(s.current,{config:d,...v}).then(e=>{u(e),"function"==typeof a&&a(e)})},[e]),(0,r.useEffect)(()=>()=>{h?.destroy()},[]),(0,n.jsx)("div",{ref:s,className:t,style:a,"data-height":d})}var l=t("21858"),d=t("33262"),c=t("31705"),h=t("97645"),u=t("58168"),f=t("98228"),p=t("45050");function m(e){let[s,t]=(0,r.useState)(e.js),[o,i]=(0,r.useState)(e.ts),[a,l]=(0,r.useState)(e.react),[m,g]=(0,r.useState)(e.vue),[v,j]=(0,r.useState)(e.svelte),[x,b]=(0,r.useState)(e.solid),y="3.7rem",[w,S]=(0,r.useState)(!0),[k,E]=(0,r.useState)(y),C=(0,r.useRef)(null),P=()=>{setTimeout(()=>{E(`calc(${C.current.offsetHeight}px + ${y})`)},5),setTimeout(()=>{E(`calc(${C.current.offsetHeight}px + ${y})`)},255)};return(0,r.useEffect)(()=>{if(d.Z.canUseDOM){let e=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"js";try{return window.prettier?.format(e,{parser:"html"===s?"html":"babel",plugins:window.prettierPlugins})}catch{return e}};t(e(s,"js")),i(e(o,"ts")),l(e(a,"jsx")),g(e(m,"html")),j(e(v,"html")),b(e(x,"tsx"))}},[]),(0,n.jsxs)("details",{className:`alert alert--info ${p.Z.details} ${f.Z.details}`,"data-collapsed":w,style:{height:w?y:k,overflow:"hidden",willChange:"height",transition:`height ${w?"250ms":"265ms"} ease-in-out 0s`,margin:"1em 0"},children:[(0,n.jsx)("summary",{onClick:()=>{S(!w),P()},children:"show code"}),(0,n.jsx)("div",{ref:C,style:{display:"block",overflow:"hidden"},children:(0,n.jsx)("div",{className:p.Z.collapsibleContent,children:(0,n.jsxs)(u.Z,{groupId:"sdk-code",children:[(0,n.jsx)(h.Z,{value:"js",label:"JS",attributes:{onMouseDown:P},children:(0,n.jsx)(c.Z,{language:"js",children:s})}),(0,n.jsx)(h.Z,{value:"ts",label:"TS",attributes:{onMouseDown:P},children:(0,n.jsx)(c.Z,{language:"ts",children:o})}),(0,n.jsx)(h.Z,{value:"react",label:"React",attributes:{onMouseDown:P},children:(0,n.jsx)(c.Z,{language:"jsx",children:a})}),(0,n.jsx)(h.Z,{value:"vue",label:"Vue",attributes:{onMouseDown:P},children:(0,n.jsx)(c.Z,{language:"html",children:m})}),(0,n.jsx)(h.Z,{value:"svelte",label:"Svelte",attributes:{onMouseDown:P},children:(0,n.jsx)(c.Z,{language:"html",children:v})}),(0,n.jsx)(h.Z,{value:"solid",label:"Solid",attributes:{onMouseDown:P},children:(0,n.jsx)(c.Z,{language:"tsx",children:x})})]})})})]})}function g(e){let{className:s,style:t,showCode:r,height:i,...d}=e,{colorMode:c}=(0,o.I)(),h=e=>JSON.stringify(e,null,2),u=`
import { createPlayground } from 'livecodes';

const options = ${h(d)};
createPlayground('#container', options);

`.trimStart(),f=`
import { createPlayground, type EmbedOptions } from 'livecodes';

const options: EmbedOptions = ${h(d)};
createPlayground('#container', options);

`.trimStart(),p=`
import LiveCodes from 'livecodes/react';

export default function App() {
  const options = ${h(d)};
  return (<LiveCodes {...options}></LiveCodes>);
}

`.trimStart(),g=`
<script setup>
import LiveCodes from "livecodes/vue";

const options = ${h(d)};
</script>
<template>
  <LiveCodes v-bind="options" />
</template>

`,v=`
<script>
import { onMount } from 'svelte';
import { createPlayground } from 'livecodes';

let options = $state(${h(d)});
let container = $state(null);
onMount(() => {
  createPlayground(container, options);
});
</script>

<div bind:this="{container}"></div>

`.trimStart(),j=`
import { createPlayground, type EmbedOptions } from 'livecodes';

export default function App() {
  const options: EmbedOptions = ${h(d)};
  const onMounted = (container: HTMLElement) => {
    createPlayground(container, options);
  };

  return <div ref={onMounted}></div>;
}

`.trimStart();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a,{className:`container_Egsj ${e.className}`,style:{height:i||"50vh",...e.style},appUrl:l.G,...e,config:{theme:c,themeColor:"hsl(215, 8%, 60%)",..."object"==typeof e.config?e.config:{}}}),!1!==e.showCode&&(0,n.jsx)(m,{js:u,ts:f,react:p,vue:g,svelte:v,solid:j})]})}},58500:function(e,s,t){t.d(s,{Z:()=>d});var n=t("85893");t("67294");var o=t("6735");function r(e){let{children:s,fallback:t}=e;return(0,o.Z)()?(0,n.jsx)(n.Fragment,{children:s?.()}):t??null}var i=t("31705"),a=t("38294"),l=t("21858");function d(e){let{params:s,config:t,code:o,language:d="js",codeTitle:c="",showLineNumbers:h=!1,formatCode:u=!0,linkText:f="Run in LiveCodes",style:p={},className:m=""}=e,g=(0,a.r)({appUrl:l.G,params:s,config:t});return(0,n.jsxs)("div",{style:{marginBottom:"30px",...p},className:m,children:[o&&(0,n.jsx)(r,{children:()=>(0,n.jsx)(i.Z,{language:d,title:c,showLineNumbers:h,children:u?function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"js";return window.prettier?.format(e,{parser:"html"===s?"html":"babel",plugins:window.prettierPlugins})}(o,d):o})}),(0,n.jsxs)("a",{href:g,target:"_blank",rel:"noreferrer",children:[f,(0,n.jsx)("svg",{width:"12",height:"12","aria-hidden":"true",viewBox:"0 0 24 24",className:"iconExternalLink_node_modules-@docusaurus-theme-classic-lib-theme-Icon-ExternalLink-styles-module",style:{marginLeft:"4px"},children:(0,n.jsx)("path",{fill:"currentColor",d:"M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"})})]})]})}},38294:function(e,s,t){t.d(s,{T:function(){return o},r:function(){return r}});var n=t(17728);async function o(e){let s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!=typeof e||e instanceof HTMLElement||!e.headless&&"headless"!==e.view||(t=e,e=null);let{config:n={},headless:o,loading:i="lazy",view:a}=t,l=o||"headless"===a,d=null,c=null;if("string"==typeof e)d=document.querySelector(e);else if(e instanceof HTMLElement)d=e;else if(!(l&&"object"==typeof e))throw Error("A valid container element is required.");if(!d){if(l)P(d=document.createElement("div")),document.body.appendChild(d);else throw Error(`Cannot find element: "${e}"`)}let h=new URL(r(t)),u=h.origin;h.searchParams.set("embed","true"),h.searchParams.set("loading",l?"eager":i),h.searchParams.set("sdkVersion",process.env.SDK_VERSION||"latest"),"object"==typeof n&&Object.keys(n).length>0&&h.searchParams.set("config","sdk");let f=t.params;"object"==typeof f&&Object.keys(f).length>0&&JSON.stringify(f).length<1800&&Object.keys(f).forEach(e=>{h.searchParams.set(e,encodeURIComponent(String(f[e])))});let p=!1,m="Cannot call API methods after calling `destroy()`.",g=[],v=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message";addEventListener(s,e),g.push(e)},j=await new Promise(e=>{if(!d)return;let s=d.dataset.height||d.style.height;if(s&&!l){let e=isNaN(Number(s))?s:s+"px";d.style.height=e}"false"===d.dataset.defaultStyles||l||(d.style.backgroundColor||="#fff",d.style.border||="1px solid black",d.style.borderRadius||="8px",d.style.boxSizing||="border-box",d.style.padding||="0",d.style.width||="100%",d.style.height||=d.style.height||"300px",d.style.minHeight="200px",d.style.flexGrow="1",d.style.overflow||="hidden",d.style.resize||="vertical");let t="livecodes",o=d.querySelector(`iframe.${t}`),r=o||document.createElement("iframe");r.classList.add(t),r.setAttribute("allow","accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; web-share"),r.setAttribute("allowtransparency","true"),r.setAttribute("allowpaymentrequest","true"),r.setAttribute("allowfullscreen","true"),r.setAttribute("sandbox","allow-same-origin allow-downloads allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-presentation allow-scripts"),r.setAttribute("loading","eager"===i?"eager":"lazy"),l?P(r):(r.style.height="100%",r.style.minHeight="200px",r.style.width="100%",r.style.margin="0",r.style.border="0",r.style.borderRadius=d.style.borderRadius),v(function e(s){s.source===r.contentWindow&&s.origin===u&&s.data?.type==="livecodes-init"&&(removeEventListener("message",e),c=Number(s.data.payload.appVersion.replace(/^v/,"")))}),(!c||c<46)&&v(function e(s){s.source===r.contentWindow&&s.origin===u&&s.data?.type==="livecodes-get-config"&&(removeEventListener("message",e),r.contentWindow?.postMessage({type:"livecodes-config",payload:n},u))}),r.onload=()=>{e(r)},r.src=h.href,o||d.appendChild(r)}),x=new Promise(e=>{v(function s(t){t.source===j.contentWindow&&t.origin===u&&t.data?.type==="livecodes-ready"&&(removeEventListener("message",s),e(),x.settled=!0)})}),b=()=>p?Promise.reject(m):new Promise(async e=>{x.settled&&e(),j.contentWindow?.postMessage({type:"livecodes-load"},u),await x,e()}),y=(e,s)=>new Promise(async(t,n)=>{if(p)return n(m);await b();let o=L();v(function s(r){if(r.source===j.contentWindow&&r.origin===u&&r.data?.type==="livecodes-api-response"&&r.data?.id===o&&r.data.method===e){removeEventListener("message",s);let e=r.data.payload;e?.error?n(e.error):t(e)}}),j.contentWindow?.postMessage({method:e,id:o,args:s},u)}),w={},S=["load","ready","code","console","tests","destroy"],k=(e,s)=>{if(p)throw Error(m);return S.includes(e)?(y("watch",[e]),w[e]||(w[e]=[]),w[e]?.push(s),{remove:()=>{w[e]=w[e]?.filter(e=>e!==s),w[e]?.length===0&&y("watch",[e,"unsubscribe"])}}):{remove:()=>void 0}},E=e=>({"livecodes-app-loaded":"load","livecodes-ready":"ready","livecodes-change":"code","livecodes-console":"console","livecodes-test-results":"tests","livecodes-destroy":"destroy"})[e];v(async function(e){let s=E(e.data?.type??"");if(e.source!==j.contentWindow||e.origin!==u||!s||!w[s])return;let t=e.data?.payload;w[s]?.forEach(e=>{e(t)})});let C=()=>{j?.remove?.(),Object.values(w).forEach(e=>{e.length=0}),g.forEach(e=>removeEventListener("message",e)),g.length=0,s&&d&&s.unobserve(d),p=!0};function P(e){e.style.position="absolute",e.style.top="0",e.style.visibility="hidden",e.style.opacity="0"}"lazy"===i&&"IntersectionObserver"in window&&(s=new IntersectionObserver((e,s)=>{e.forEach(async e=>{e.isIntersecting&&(await b(),s.unobserve(d))})},{rootMargin:"150px"})).observe(d);let L=()=>(String(Math.random())+Date.now().toFixed()).replace("0.","");return{load:()=>b(),run:()=>y("run"),format:e=>y("format",[e]),getShareUrl:e=>y("getShareUrl",[e]),getConfig:e=>y("getConfig",[e]),setConfig:e=>y("setConfig",[e]),getCode:()=>y("getCode"),show:(e,s)=>y("show",[e,s]),runTests:()=>y("runTests"),onChange:e=>k("code",e),watch:k,exec:function(e){for(var s=arguments.length,t=Array(s>1?s-1:0),n=1;n<s;n++)t[n-1]=arguments[n];return y("exec",[e,...t])},destroy:()=>p?Promise.reject(m):(C(),Promise.resolve())}}function r(){let e,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{appUrl:t="https://livecodes.io",params:o={},config:r={},headless:i,import:a,lite:l,view:d,...c}=s;try{e=new URL(t)}catch{throw Error(`${t} is not a valid URL.`)}let h=new URLSearchParams;Object.entries(c).forEach(s=>{let[t,n]=s;void 0!==n&&e.searchParams.set(t,String(n))});let u="headless"===s.view||i;if(l&&(console.warn('Deprecation notice: "lite" option is deprecated. Use "config: { mode: \'lite\' }" instead.'),"object"==typeof r&&null==r.mode?r.mode="lite":e.searchParams.set("lite","true")),d&&(console.warn('Deprecation notice: The "view" option has been moved to "config.view". For headless mode use "headless: true".'),"object"==typeof r&&null==r.view&&"headless"!==d?r.view=d:e.searchParams.set("view",d)),"string"==typeof r)try{new URL(r),e.searchParams.set("config",encodeURIComponent(r))}catch{throw Error('"config" is not a valid URL or configuration object.')}else r&&"object"==typeof r&&Object.keys(r).length>0&&(r.title&&"Untitled Project"!==r.title&&e.searchParams.set("title",r.title),r.description&&r.description.length>0&&e.searchParams.set("description",r.description),h.set("config","code/"+(0,n.compressToEncodedURIComponent)(JSON.stringify(r))));if(o&&"object"==typeof o&&Object.keys(o).length>0)try{h.set("params",(0,n.compressToEncodedURIComponent)(JSON.stringify(o)))}catch{Object.keys(o).forEach(s=>{e.searchParams.set(s,encodeURIComponent(String(o[s])))})}return a&&e.searchParams.set("x",encodeURIComponent(a)),u&&e.searchParams.set("headless","true"),h.toString().length>0&&(e.hash=h.toString()),e.href}},50065:function(e,s,t){t.d(s,{Z:function(){return a},a:function(){return i}});var n=t(67294);let o={},r=n.createContext(o);function i(e){let s=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);