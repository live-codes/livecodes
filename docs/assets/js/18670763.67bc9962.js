"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["9723"],{8663:function(e,t,n){n.r(t),n.d(t,{default:()=>p,frontMatter:()=>a,customModules:()=>d,assets:()=>c,metadata:()=>s,toc:()=>h,contentTitle:()=>l});var s=JSON.parse('{"id":"features/intellisense","title":"IntelliSense","description":"The code editor provides a rich experience with intellisense and autocompletion. Many of the features required for this are based on TypeScript types that are either inferred by the editor or supplied as data definition files.","source":"@site/docs/features/intellisense.mdx","sourceDirName":"features","slug":"/features/intellisense","permalink":"/livecodes/docs/features/intellisense","draft":false,"unlisted":false,"editUrl":"https://github.com/live-codes/livecodes/tree/develop/docs/docs/features/intellisense.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Module Resolution","permalink":"/livecodes/docs/features/module-resolution"},"next":{"title":"AI Code Assistant \uD83E\uDE84","permalink":"/livecodes/docs/features/ai"}}'),o=n("5893"),r=n("65"),i=n("3365");let a={},l="IntelliSense",c={},d={editor:"monaco",activeEditor:"script",script:{language:"typescript",content:"import { Greeter } from 'my-greeter';\n\nconst greeter = new Greeter();\n// now `greeter` has autocomplete\n\ndocument.body.innerText = greeter.morning();\n\n// this should show error in the editor\n// Property 'morningGreetings' is private and only accessible within class 'Greeter'\nconsole.log(greeter.morningGreetings);"},imports:{"my-greeter":"data:text/javascript;charset=UTF-8;base64,ZXhwb3J0IGNsYXNzIEdyZWV0ZXIgew0KICAgIGNvbnN0cnVjdG9yKCkgew0KICAgICAgICB0aGlzLm1vcm5pbmdHcmVldGluZ3MgPSBbJ0dvb2QgbW9ybmluZycsICdIYXZlIGEgZ29vZCBkYXknLCAnSG93IGFyZSB5b3UgdG9kYXk/J107DQogICAgICAgIHRoaXMuZXZlbmluZ0dyZWV0aW5ncyA9IFsnR29vZCBldmVuaW5nJywgJ0dvb2QgbmlnaHQnLCAnU2xlZXAgd2VsbCddOw0KICAgIH0NCiAgICByYW5kb21TZWxlY3RvcihhcnJheSkgew0KICAgICAgICByZXR1cm4gYXJyYXlbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyYXkubGVuZ3RoKV07DQogICAgfQ0KICAgIG1vcm5pbmcoKSB7DQogICAgICAgIHJldHVybiB0aGlzLnJhbmRvbVNlbGVjdG9yKHRoaXMubW9ybmluZ0dyZWV0aW5ncyk7DQogICAgfQ0KICAgIGV2ZW5pbmcoKSB7DQogICAgICAgIHJldHVybiB0aGlzLnJhbmRvbVNlbGVjdG9yKHRoaXMuZXZlbmluZ0dyZWV0aW5ncyk7DQogICAgfQ0KfQ0K"},types:{"my-greeter":"data:text/typescript;charset=UTF-8;base64,ZXhwb3J0IGRlY2xhcmUgY2xhc3MgR3JlZXRlciB7DQogIHByaXZhdGUgbW9ybmluZ0dyZWV0aW5nczsNCiAgcHJpdmF0ZSBldmVuaW5nR3JlZXRpbmdzOw0KICBwcml2YXRlIHJhbmRvbVNlbGVjdG9yOw0KICBtb3JuaW5nKCk6IHN0cmluZzsNCiAgZXZlbmluZygpOiBzdHJpbmc7DQp9DQo="}},h=[{value:"Types for imported npm packages",id:"types-for-imported-npm-packages",level:2},{value:"TypeScript TwoSlash",id:"typescript-twoslash",level:2},{value:"Custom Types",id:"custom-types",level:2},{value:"Demo",id:"demo",level:2},{value:"Related",id:"related",level:2}];function u(e){let t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"intellisense",children:"IntelliSense"})}),"\n","\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.a,{href:"/livecodes/docs/features/editor-settings#code-editor",children:"code editor"})," provides a rich experience with ",(0,o.jsx)(t.a,{href:"https://code.visualstudio.com/docs/editor/intellisense",children:"intellisense"})," and autocompletion. Many of the features required for this are based on TypeScript types that are either inferred by the editor or supplied as data definition files."]}),"\n",(0,o.jsx)(t.p,{children:"This not only works when the editor language is TypeScript, but also works with others like JavaScript and JSX."}),"\n",(0,o.jsx)(t.p,{children:"Example:"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"LiveCodes Autocomplete",src:n(6368).Z+"",width:"1127",height:"621"})}),"\n",(0,o.jsx)(t.h2,{id:"types-for-imported-npm-packages",children:"Types for imported npm packages"}),"\n",(0,o.jsx)(t.p,{children:"LiveCodes will try to automatically find type definitions for npm modules imported in the editor."}),"\n",(0,o.jsx)(t.p,{children:"These are examples for automatically loading React types with autocomplete and hover info:"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"LiveCodes Intellisense",src:n(9203).Z+"",width:"1128",height:"754"})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"LiveCodes Intellisense",src:n(313).Z+"",width:"1126",height:"713"})}),"\n",(0,o.jsx)(t.h2,{id:"typescript-twoslash",children:"TypeScript TwoSlash"}),"\n",(0,o.jsxs)(t.p,{children:["The code editor supports ",(0,o.jsx)(t.a,{href:"https://github.com/microsoft/TypeScript-Website/tree/v2/packages/ts-twoslasher",children:"TypeScript TwoSlash"}),". This can be very useful for debugging, sharing and teaching TypeScript."]}),"\n",(0,o.jsxs)(t.p,{children:["This is supported in ",(0,o.jsx)(t.a,{href:"/livecodes/docs/languages/javascript",children:"JavaScript"}),", ",(0,o.jsx)(t.a,{href:"/livecodes/docs/languages/typescript",children:"TypeScript"}),", ",(0,o.jsx)(t.a,{href:"/livecodes/docs/languages/jsx",children:"JSX"})," and ",(0,o.jsx)(t.a,{href:"/livecodes/docs/languages/tsx",children:"TSX"}),". This also includes ",(0,o.jsx)(t.a,{href:"/livecodes/docs/languages/babel",children:"Babel"}),", ",(0,o.jsx)(t.a,{href:"/livecodes/docs/languages/sucrase",children:"Sucrase"}),", ",(0,o.jsx)(t.a,{href:"/livecodes/docs/languages/solid",children:"Solid"}),", ",(0,o.jsx)(t.a,{href:"/livecodes/docs/languages/react-native",children:"React Native"}),", etc."]}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.img,{alt:"TypeScript TwoSlash",src:n(258).Z+"",width:"1150",height:"878"})," "]}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.img,{alt:"TwoSlash in JSX",src:n(9481).Z+"",width:"1147",height:"939"})," "]}),"\n",(0,o.jsx)(t.h2,{id:"custom-types",children:"Custom Types"}),"\n",(0,o.jsx)(t.p,{children:"If no type definitions are found, or if you want to provide your own (e.g. for a module that is not hosted on npm), custom type definition files can be used."}),"\n",(0,o.jsxs)(t.p,{children:["In the standalone app, these can be provided in ",(0,o.jsx)(t.a,{href:"/livecodes/docs/advanced/custom-settings",children:"custom settings"})," using the ",(0,o.jsx)(t.code,{children:"types"})," property. This takes an object with the key representing the module name and the value representing the URL of the file."]}),"\n",(0,o.jsx)(t.p,{children:"Example:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",metastring:'title="Custom Settings"',children:'{\n  "types": {\n    "my-module": "https://cdn.jsdelivr.net/npm/my-module@1.0.0/types/my-module.d.ts",\n    "my-other-module": "https://my-website.com/my-other-module/my-other-module.d.ts"\n  }\n}\n'})}),"\n",(0,o.jsxs)(t.p,{children:["For embedded playgrounds, these can be provided in the ",(0,o.jsx)(t.a,{href:"/livecodes/docs/configuration/configuration-object",children:"configuration object"})," using the ",(0,o.jsx)(t.a,{href:"/livecodes/docs/configuration/configuration-object#types",children:(0,o.jsx)(t.code,{children:"types"})})," property."]}),"\n",(0,o.jsxs)(t.p,{children:["This can be combined with the ",(0,o.jsx)(t.a,{href:"/livecodes/docs/configuration/configuration-object#imports",children:(0,o.jsx)(t.code,{children:"imports"})})," property to provide ",(0,o.jsx)(t.a,{href:"/livecodes/docs/features/module-resolution#custom-module-resolution",children:"importmap"})," for runtime implementation of your custom modules."]}),"\n",(0,o.jsxs)(t.p,{children:["This is an example of how to create a playground that provides the implementation of the custom module: ",(0,o.jsx)(t.code,{children:"my-module"})," and its type definition to provide editor intellisense:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"import { createPlayground } from 'livecodes';\n\nconst config = {\n  activeEditor: 'script',\n  script: {\n    language: 'javascript',\n    content: `import { foo } from 'my-module';\\n\\nconsole.log(foo());`\n  };\n  imports: {\n    'my-module': 'https://my-website.com/my-module/index.js',\n  },\n  types: {\n    'my-module': 'https://my-website.com/my-module/my-module.d.ts',\n  },\n};\n\ncreatePlayground('#container', {config});\n"})}),"\n",(0,o.jsxs)(t.p,{children:["Please note that the URLs used for ",(0,o.jsx)(t.code,{children:"types"})," and ",(0,o.jsx)(t.code,{children:"imports"})," properties may be full URLs or ",(0,o.jsx)(t.a,{href:"/livecodes/docs/features/data-urls",children:"data URLs"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"This can be of great use for library authors who want to provide playgrounds for documenting their libraries that are not (yet) published to npm."}),"\n",(0,o.jsx)(t.h2,{id:"demo",children:"Demo"}),"\n",(0,o.jsx)(t.p,{children:"Let's assume we have this TypeScript module:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",metastring:'title="Greeter.ts"',children:"export class Greeter {\n  private morningGreetings = ['Good morning', 'Have a good day', 'How are you today?'];\n  private eveningGreetings = ['Good evening', 'Good night', 'Sleep well'];\n\n  private randomSelector(array: string[]) {\n    return array[Math.floor(Math.random() * array.length)];\n  }\n\n  public morning() {\n    return this.randomSelector(this.morningGreetings);\n  }\n\n  public evening() {\n    return this.randomSelector(this.eveningGreetings);\n  }\n}\n"})}),"\n",(0,o.jsx)(t.p,{children:"which compiles to this JavaScript:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",metastring:'title="Greeter.js"',children:"export class Greeter {\n  constructor() {\n    this.morningGreetings = ['Good morning', 'Have a good day', 'How are you today?'];\n    this.eveningGreetings = ['Good evening', 'Good night', 'Sleep well'];\n  }\n  randomSelector(array) {\n    return array[Math.floor(Math.random() * array.length)];\n  }\n  morning() {\n    return this.randomSelector(this.morningGreetings);\n  }\n  evening() {\n    return this.randomSelector(this.eveningGreetings);\n  }\n}\n"})}),"\n",(0,o.jsx)(t.p,{children:"and this type definition:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",metastring:'title="Greeter.d.ts"',children:"export declare class Greeter {\n  private morningGreetings;\n  private eveningGreetings;\n  private randomSelector;\n  morning(): string;\n  evening(): string;\n}\n"})}),"\n",(0,o.jsxs)(t.p,{children:["The JavaScript output (Greeter.js) and the data definition file (Greeter.d.ts) should be hosted online or converted to data URLs (see ",(0,o.jsx)(t.a,{href:"/livecodes/docs/features/assets",children:"assets"})," and ",(0,o.jsx)(t.a,{href:"/livecodes/docs/features/data-urls",children:"data URLs"}),")."]}),"\n",(0,o.jsx)(t.p,{children:"Then, they can be used like that:"}),"\n","\n",(0,o.jsx)(i.Z,{config:d,height:"80vh"}),"\n",(0,o.jsx)(t.h2,{id:"related",children:"Related"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"/livecodes/docs/features/module-resolution",children:"Module Resolution"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"/livecodes/docs/features/data-urls",children:"Data Urls"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"/livecodes/docs/features/assets",children:"Assets"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"/livecodes/docs/advanced/custom-settings",children:"Custom Settings"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.a,{href:"/livecodes/docs/configuration/configuration-object",children:"Configuration Object"})}),"\n"]})]})}function p(e={}){let{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},6368:function(e,t,n){n.d(t,{Z:function(){return s}});let s=n.p+"assets/images/autocomplete-54ec86de500afd076e2948246f4bf434.jpg"},9203:function(e,t,n){n.d(t,{Z:function(){return s}});let s=n.p+"assets/images/intellisense-1-bbc692078d1b88aaf8d2be72beb49849.jpg"},313:function(e,t,n){n.d(t,{Z:function(){return s}});let s=n.p+"assets/images/intellisense-2-ffdab70d10948aa165e3332a58d37827.jpg"},9481:function(e,t,n){n.d(t,{Z:function(){return s}});let s=n.p+"assets/images/twoslash-jsx-dce9c452f6f57be25c0145a3471c25d9.jpg"},258:function(e,t,n){n.d(t,{Z:function(){return s}});let s=n.p+"assets/images/twoslash-129fce4a76fef85f9c655b3d0278c216.jpg"},3365:function(e,t,n){n.d(t,{Z:()=>f});var s=n("5893"),o=n("4200"),r=n("7294"),i=n("8294");function a(e){let t=(0,r.useRef)(null),[n,o]=(0,r.useState)(e.className||""),[a,l]=(0,r.useState)(e.style||{}),[c,d]=(0,r.useState)(e.height),[h,u]=(0,r.useState)(),[p,m]=(0,r.useState)(JSON.stringify(e.config||"")),[g,f]=(0,r.useState)("");return(0,r.useEffect)(()=>{if(!t.current)return;let{className:n,style:s,height:r,sdkReady:a,config:c,...y}=e;if(o(n||""),l(s||{}),d(r),h&&g===JSON.stringify(y)){if(p===JSON.stringify(c))return;m(JSON.stringify(c)),"string"==typeof c?fetch(c).then(e=>e.json()).then(e=>{h?.setConfig(e)}):c&&h.setConfig(c)}else f(JSON.stringify(y)),h?.destroy(),(0,i.T)(t.current,{config:c,...y}).then(e=>{u(e),"function"==typeof a&&a(e)})},[e]),(0,r.useEffect)(()=>()=>{h?.destroy()},[]),(0,s.jsx)("div",{ref:t,className:n,style:a,"data-height":c})}var l=n("1858"),c=n("3262"),d=n("1705"),h=n("7645"),u=n("8168"),p=n("8228"),m=n("5050");function g(e){let[t,n]=(0,r.useState)(e.js),[o,i]=(0,r.useState)(e.ts),[a,l]=(0,r.useState)(e.react),[g,f]=(0,r.useState)(e.vue),[y,v]=(0,r.useState)(e.svelte),b="3.7rem",[j,x]=(0,r.useState)(!0),[w,S]=(0,r.useState)(b),C=(0,r.useRef)(null),Z=()=>{setTimeout(()=>{S(`calc(${C.current.offsetHeight}px + ${b})`)},5),setTimeout(()=>{S(`calc(${C.current.offsetHeight}px + ${b})`)},255)};return(0,r.useEffect)(()=>{if(c.Z.canUseDOM){let e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"js";try{return window.prettier?.format(e,{parser:"html"===t?"html":"babel",plugins:window.prettierPlugins})}catch{return e}};n(e(t,"js")),i(e(o,"ts")),l(e(a,"jsx")),f(e(g,"html")),v(e(y,"html"))}},[]),(0,s.jsxs)("details",{className:`alert alert--info ${m.Z.details} ${p.Z.details}`,"data-collapsed":j,style:{height:j?b:w,overflow:"hidden",willChange:"height",transition:`height ${j?"250ms":"265ms"} ease-in-out 0s`,margin:"1em 0"},children:[(0,s.jsx)("summary",{onClick:()=>{x(!j),Z()},children:"show code"}),(0,s.jsx)("div",{ref:C,style:{display:"block",overflow:"hidden"},children:(0,s.jsx)("div",{className:m.Z.collapsibleContent,children:(0,s.jsxs)(u.Z,{groupId:"sdk-code",children:[(0,s.jsx)(h.Z,{value:"js",label:"JS",attributes:{onMouseDown:Z},children:(0,s.jsx)(d.Z,{language:"js",children:t})}),(0,s.jsx)(h.Z,{value:"ts",label:"TS",attributes:{onMouseDown:Z},children:(0,s.jsx)(d.Z,{language:"ts",children:o})}),(0,s.jsx)(h.Z,{value:"react",label:"React",attributes:{onMouseDown:Z},children:(0,s.jsx)(d.Z,{language:"jsx",children:a})}),(0,s.jsx)(h.Z,{value:"vue",label:"Vue",attributes:{onMouseDown:Z},children:(0,s.jsx)(d.Z,{language:"html",children:g})}),(0,s.jsx)(h.Z,{value:"svelte",label:"Svelte",attributes:{onMouseDown:Z},children:(0,s.jsx)(d.Z,{language:"html",children:y})})]})})})]})}function f(e){let{className:t,style:n,showCode:r,height:i,...c}=e,{colorMode:d}=(0,o.I)(),h=e=>JSON.stringify(e,null,2),u=`
import { createPlayground } from 'livecodes';

const options = ${h(c)};
createPlayground('#container', options);

`.trimStart(),p=`
import { createPlayground, type EmbedOptions } from 'livecodes';

const options: EmbedOptions = ${h(c)};
createPlayground('#container', options);

`.trimStart(),m=`
import LiveCodes from 'livecodes/react';

export default function App() {
  const options = ${h(c)};
  return (<LiveCodes {...options}></LiveCodes>);
}

`.trimStart(),f=`
<script setup>
import LiveCodes from "livecodes/vue";

const options = ${h(c)};
</script>
<template>
  <LiveCodes v-bind="options" />
</template>

`,y=`
<script>
import { onMount } from 'svelte';
import { createPlayground } from 'livecodes';

let options = $state(${h(c)});
let container = $state(null);
onMount(() => {
  createPlayground(container, options);
});
</script>

<div bind:this="{container}"></div>

`.trimStart();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a,{className:`container_Egsj ${e.className}`,style:{height:i||"50vh",...e.style},appUrl:l.G,...e,config:{theme:d,themeColor:"hsl(215, 8%, 60%)",..."object"==typeof e.config?e.config:{}}}),!1!==e.showCode&&(0,s.jsx)(g,{js:u,ts:p,react:m,vue:f,svelte:y})]})}},8294:function(e,t,n){n.d(t,{T:function(){return o},r:function(){return r}});var s=n(7728);async function o(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!=typeof e||e instanceof HTMLElement||!e.headless&&"headless"!==e.view||(n=e,e=null);let{config:s={},headless:o,loading:i="lazy",view:a}=n,l=o||"headless"===a,c=null,d=null;if("string"==typeof e)c=document.querySelector(e);else if(e instanceof HTMLElement)c=e;else if(!(l&&"object"==typeof e))throw Error("A valid container element is required.");if(!c){if(l)G(c=document.createElement("div")),document.body.appendChild(c);else throw Error(`Cannot find element: "${e}"`)}let h=new URL(r(n)),u=h.origin;h.searchParams.set("embed","true"),h.searchParams.set("loading",l?"eager":i),h.searchParams.set("sdkVersion",process.env.SDK_VERSION||"latest"),"object"==typeof s&&Object.keys(s).length>0&&h.searchParams.set("config","sdk");let p=n.params;"object"==typeof p&&Object.keys(p).length>0&&JSON.stringify(p).length<1800&&Object.keys(p).forEach(e=>{h.searchParams.set(e,encodeURIComponent(String(p[e])))});let m=!1,g="Cannot call API methods after calling `destroy()`.",f=[],y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message";addEventListener(t,e),f.push(e)},v=await new Promise(e=>{if(!c)return;let t=c.dataset.height||c.style.height;if(t&&!l){let e=isNaN(Number(t))?t:t+"px";c.style.height=e}"false"===c.dataset.defaultStyles||l||(c.style.backgroundColor||="#fff",c.style.border||="1px solid black",c.style.borderRadius||="8px",c.style.boxSizing||="border-box",c.style.padding||="0",c.style.width||="100%",c.style.height||=c.style.height||"300px",c.style.minHeight="200px",c.style.flexGrow="1",c.style.overflow||="hidden",c.style.resize||="vertical");let n="livecodes",o=c.querySelector(`iframe.${n}`),r=o||document.createElement("iframe");r.classList.add(n),r.setAttribute("allow","accelerometer; camera; encrypted-media; display-capture; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; web-share"),r.setAttribute("allowtransparency","true"),r.setAttribute("allowpaymentrequest","true"),r.setAttribute("allowfullscreen","true"),r.setAttribute("sandbox","allow-same-origin allow-downloads allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-presentation allow-scripts"),r.setAttribute("loading","eager"===i?"eager":"lazy"),l?G(r):(r.style.height="100%",r.style.minHeight="200px",r.style.width="100%",r.style.margin="0",r.style.border="0",r.style.borderRadius=c.style.borderRadius),y(function e(t){t.source===r.contentWindow&&t.origin===u&&t.data?.type==="livecodes-init"&&(removeEventListener("message",e),d=Number(t.data.payload.appVersion.replace(/^v/,"")))}),(!d||d<46)&&y(function e(t){t.source===r.contentWindow&&t.origin===u&&t.data?.type==="livecodes-get-config"&&(removeEventListener("message",e),r.contentWindow?.postMessage({type:"livecodes-config",payload:s},u))}),r.onload=()=>{e(r)},r.src=h.href,o||c.appendChild(r)}),b=new Promise(e=>{y(function t(n){n.source===v.contentWindow&&n.origin===u&&n.data?.type==="livecodes-ready"&&(removeEventListener("message",t),e(),b.settled=!0)})}),j=()=>m?Promise.reject(g):new Promise(async e=>{b.settled&&e(),v.contentWindow?.postMessage({type:"livecodes-load"},u),await b,e()}),x=(e,t)=>new Promise(async(n,s)=>{if(m)return s(g);await j();let o=T();y(function t(r){if(r.source===v.contentWindow&&r.origin===u&&r.data?.type==="livecodes-api-response"&&r.data?.id===o&&r.data.method===e){removeEventListener("message",t);let e=r.data.payload;e?.error?s(e.error):n(e)}}),v.contentWindow?.postMessage({method:e,id:o,args:t},u)}),w={},S=["load","ready","code","console","tests","destroy"],C=(e,t)=>{if(m)throw Error(g);return S.includes(e)?(x("watch",[e]),w[e]||(w[e]=[]),w[e]?.push(t),{remove:()=>{w[e]=w[e]?.filter(e=>e!==t),w[e]?.length===0&&x("watch",[e,"unsubscribe"])}}):{remove:()=>void 0}},Z=e=>({"livecodes-app-loaded":"load","livecodes-ready":"ready","livecodes-change":"code","livecodes-console":"console","livecodes-test-results":"tests","livecodes-destroy":"destroy"})[e];y(async function(e){let t=Z(e.data?.type??"");if(e.source!==v.contentWindow||e.origin!==u||!t||!w[t])return;let n=e.data?.payload;w[t]?.forEach(e=>{e(n)})});let I=()=>{v?.remove?.(),Object.values(w).forEach(e=>{e.length=0}),f.forEach(e=>removeEventListener("message",e)),f.length=0,t&&c&&t.unobserve(c),m=!0};function G(e){e.style.position="absolute",e.style.top="0",e.style.visibility="hidden",e.style.opacity="0"}"lazy"===i&&"IntersectionObserver"in window&&(t=new IntersectionObserver((e,t)=>{e.forEach(async e=>{e.isIntersecting&&(await j(),t.unobserve(c))})},{rootMargin:"150px"})).observe(c);let T=()=>(String(Math.random())+Date.now().toFixed()).replace("0.","");return{load:()=>j(),run:()=>x("run"),format:e=>x("format",[e]),getShareUrl:e=>x("getShareUrl",[e]),getConfig:e=>x("getConfig",[e]),setConfig:e=>x("setConfig",[e]),getCode:()=>x("getCode"),show:(e,t)=>x("show",[e,t]),runTests:()=>x("runTests"),onChange:e=>C("code",e),watch:C,exec:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return x("exec",[e,...n])},destroy:()=>m?Promise.reject(g):(I(),Promise.resolve())}}function r(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{appUrl:n="https://livecodes.io",params:o={},config:r={},headless:i,import:a,lite:l,view:c,...d}=t;try{e=new URL(n)}catch{throw Error(`${n} is not a valid URL.`)}let h=new URLSearchParams;Object.entries(d).forEach(t=>{let[n,s]=t;void 0!==s&&e.searchParams.set(n,String(s))});let u="headless"===t.view||i;if(l&&(console.warn('Deprecation notice: "lite" option is deprecated. Use "config: { mode: \'lite\' }" instead.'),"object"==typeof r&&null==r.mode?r.mode="lite":e.searchParams.set("lite","true")),c&&(console.warn('Deprecation notice: The "view" option has been moved to "config.view". For headless mode use "headless: true".'),"object"==typeof r&&null==r.view&&"headless"!==c?r.view=c:e.searchParams.set("view",c)),"string"==typeof r)try{new URL(r),e.searchParams.set("config",encodeURIComponent(r))}catch{throw Error('"config" is not a valid URL or configuration object.')}else r&&"object"==typeof r&&Object.keys(r).length>0&&(r.title&&"Untitled Project"!==r.title&&e.searchParams.set("title",r.title),r.description&&r.description.length>0&&e.searchParams.set("description",r.description),h.set("config","code/"+(0,s.compressToEncodedURIComponent)(JSON.stringify(r))));if(o&&"object"==typeof o&&Object.keys(o).length>0)try{h.set("params",(0,s.compressToEncodedURIComponent)(JSON.stringify(o)))}catch{Object.keys(o).forEach(t=>{e.searchParams.set(t,encodeURIComponent(String(o[t])))})}return a&&e.searchParams.set("x",encodeURIComponent(a)),u&&e.searchParams.set("headless","true"),h.toString().length>0&&(e.hash=h.toString()),e.href}},65:function(e,t,n){n.d(t,{Z:function(){return a},a:function(){return i}});var s=n(7294);let o={},r=s.createContext(o);function i(e){let t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);